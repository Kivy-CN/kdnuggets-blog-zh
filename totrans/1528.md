# Pandas DataFrame 索引

> 原文：[https://www.kdnuggets.com/2019/04/pandas-dataframe-indexing.html](https://www.kdnuggets.com/2019/04/pandas-dataframe-indexing.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](#comments)

### 使用 `loc[]` 按标签选择行和列。

### 使用 `iloc[]` 按位置选择行和列。

### 明确指定行和列，即使是用“:”。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google 网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业轨道。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google 数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你在 IT 领域的组织

* * *

[要观看视频、获取幻灯片和代码，请查看课程。它是免费的（$ 和 CC0）。](https://end-to-end-machine-learning.teachable.com/courses/516023/lectures/9460205)

### 长版：为那些不喜欢记忆事物的人介绍 Pandas DataFrame 的索引

从 DataFrame 中提取元素、行和列有很多方法。（如果你觉得勇敢，可以查看 Ted Petrou 关于 pandas 索引的[7(!)部分系列](https://medium.com/dunder-data/selecting-subsets-of-data-in-pandas-6fcd0170be9c)。）一些索引方法看起来非常相似，但行为却大相径庭。本文的目标是确定一种从 DataFrame 中提取数据的单一策略，这种策略易于解释且能产生可靠的结果。仅作警告——这些只是我个人的看法，不能保证权威或准确。

首先，我们使用维基百科上关于世界最高山脉的数据创建一个小的数据框。对于每座山脉，我们有其名称、高度（以米为单位）、首次登顶的年份以及所属山脉范围。如果这是你第一次接触 pandas DataFrame，那么每座山及其相关信息就是一行，每条信息，例如名称或高度，就是一列。

![figure-name](../Images/14492dd94238e5ccda7ea5e548c7c35b.png)

每列都有一个名称，也称为标签。我们列的标签是“name”，“height (m)”，“summitted”和“mountain range”。在 pandas 数据框中，每行也有一个名称。默认情况下，这个标签只是行号。然而，你可以将其中一列设置为 DataFrame 的索引，这意味着其值将用作行标签。我们将“name”列设置为我们的索引。

![figure-name](../Images/3176bee2931823fa39419e8dae5b6f7d.png)

从DataFrame中挑选出某一列进行操作是一个常见的操作。要通过标签选择一列，我们使用`.loc[]`函数。为了让命令更容易理解，我们可以始终包含我们感兴趣的行索引和列索引。在这种情况下，我们对所有行感兴趣。为了表示这一点，我们使用冒号。然后，为了指示我们感兴趣的列，我们添加其标签。命令`mountains.loc[:, 'summitted']`可以得到仅包含‘summitted’列的数据。

![figure-name](../Images/8debc2f94edf5476a94be2bf7ecdc0e9.png)

值得注意的是，如果这个命令返回一个Series，它是pandas用来表示列的数据结构。如果我们只想要‘summitted’列中的数字数组，那么我们在命令末尾添加`.values`。这将返回一个包含[1953, 1954, 1955, 1956]的numpy数组。

![figure-name](../Images/a678978f6df65027448769d964476139.png)

如果我们只想获取一行，则再次使用`.loc[]`函数，这次指定行标签，并在列位置放置冒号。

![figure-name](../Images/fc613cac209c072f7b74ee128023a318.png)

如果我们只想要一个单一的值，例如K2被征服的年份，那么我们可以同时指定行和列的标签。行总是先出现。

![figure-name](../Images/c34e5e044ecef1d084f12d56682b3150.png)

尽管你可以仅使用一个参数在`.loc[]`函数中完成操作，但如果你始终指定行和列，即使是用冒号，也会更直观易懂。

我们不必局限于使用这种方法选择单行或单列。在这里，在行位置我们传递标签列表。这将返回一组行，而不仅仅是一行。

![figure-name](../Images/8e49196daaf9838f2146b09c04a6393f.png)

我们还可以通过指定起始列和结束列，并在它们之间放置冒号，来获取列的子集。在这种情况下，'height': 'summitted'将给我们所有从起始点‘height’到终点‘summitted’之间的列。请注意，这与numpy中的数值索引不同，其中端点被省略。此外，由于我们已经将名称列指定为索引，它也会包含在我们返回的数据框中。

![figure-name](../Images/06cfa4b73deb13154511c975b9669771.png)

此外，我们可以选择那些值满足特定条件的行或列。在这种情况下，我们想找到‘summitted’列中值大于1954的行。在行位置，我们可以放置任何布尔表达式，其值的数量与行数相同。如果需要，我们也可以对列执行相同操作。

![figure-name](../Images/33d239b181c62efb58680923d23d2654.png)

除了通过标签选择行和列，我们还可以通过行号和列号选择它们。列的排序，因此它们的位置，取决于数据框的初始化方式。索引列，即我们的‘name’列，不计算在内。

![figure-name](../Images/2975b76dd68de2814214c727392b0a0c.png)

要按位置选择数据，我们使用 .iloc[] 函数。再次说明，第一个参数是行，第二个参数是列。要选择零行中的所有列，我们写作 .iloc[0, ;]

![figure-name](../Images/e51a267517b3ecc81859fb8a3506bcce.png)

同样，我们可以通过位置选择某一列，只需在.iloc[]函数的列位置中输入我们想要的列号。

![figure-name](../Images/554f1a6b7b170135790b36bec7f8e073.png)

我们可以通过指定行和列的位置来提取单个值。

![figure-name](../Images/5e2c06f34d584e175fa764674fae587f.png)

如果我们想要挑选特定的行和/或特定的列，我们可以传递一个位置列表。

![figure-name](../Images/34336c177018df8d0d6d170882ad0d96.png)

我们还可以使用冒号范围操作符按位置获取一组连续的行或列。请注意，与使用标签的 .loc[] 函数不同，使用位置的 .iloc[] 函数不包括端点。在这种情况下，它仅返回零列和一列，而不返回二列。

![figure-name](../Images/35c98d70e09218939c5fb6a8ed4e9528.png)

所有这些可以总结如下。

1.  使用 .loc[] 进行标签索引

1.  使用 .iloc[] 进行基于位置的索引，并

1.  即使使用冒号，也要明确指定行和列。

这一系列指南将为你提供一种一致且易于解释的方式，从 pandas DataFrame 中提取所需的数据。

祝你数据处理顺利！查看我的[端到端机器学习课程](https://end-to-end-machine-learning.teachable.com/)以获取更多数据处理技巧和机器学习教程。

[原文](https://brohrer.github.io/dataframe_indexing.html)。已获许可转载。

**相关：**

+   [在 Pandas 中使用 Excel](https://www.kdnuggets.com/2018/01/using-excel-pandas.html)

+   [Pandas 备忘单：Python 中的数据科学和数据整理](https://www.kdnuggets.com/2017/01/pandas-cheat-sheet.html)

+   [用 Python 清理数据](https://www.kdnuggets.com/2017/01/tidying-data-python.html)

### 更多相关主题

+   [停止学习数据科学以寻找目的，并寻找目的以…](https://www.kdnuggets.com/2021/12/stop-learning-data-science-find-purpose.html)

+   [学习数据科学统计的最佳资源](https://www.kdnuggets.com/2021/12/springboard-top-resources-learn-data-science-statistics.html)

+   [成功数据科学家的 5 个特征](https://www.kdnuggets.com/2021/12/5-characteristics-successful-data-scientist.html)

+   [是什么让Python成为初创公司理想的编程语言](https://www.kdnuggets.com/2021/12/makes-python-ideal-programming-language-startups.html)

+   [每个数据科学家都应该了解的三个R语言库（即使你使用Python）](https://www.kdnuggets.com/2021/12/three-r-libraries-every-data-scientist-know-even-python.html)

+   [成为优秀数据科学家所需的5项关键技能](https://www.kdnuggets.com/2021/12/5-key-skills-needed-become-great-data-scientist.html)
