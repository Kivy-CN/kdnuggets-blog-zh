# 你会幸存于泰坦尼克号吗？Python 机器学习指南第 1 部分

> 原文：[https://www.kdnuggets.com/2016/07/titanic-machine-learning-guide-part-1.html](https://www.kdnuggets.com/2016/07/titanic-machine-learning-guide-part-1.html)

**Patrick Triest, SocialCops**。

如果机器能够学习呢？

自机器出现以来，这一直是科幻和哲学中最引人入胜的问题之一。随着现代技术的发展，这些问题不再只是创意推测，机器学习无处不在。从决定你可能想在 Netflix 上观看的电影到预测股市趋势，机器学习对现代数据理解产生了深远的影响。

本教程旨在提供一个可访问的介绍，教你如何将机器学习技术应用于自己的项目和数据集。你将学会如何在短短 20 分钟内使用 Python 应用不同的机器学习技术，从决策树到深度神经网络，处理一个示例数据集。这是一个实用的介绍，而非概念性的；为了全面了解机器学习的能力，我强烈建议你寻求解释这些技术低级实现的资源。

对于我们的示例数据集：RMS 泰坦尼克号的乘客。我们将使用一个开放的数据集，提供关于1912年那次臭名昭著的航行上的乘客数据。通过检查诸如舱位、性别和年龄等因素，我们将尝试不同的机器学习算法，并构建一个程序，预测给定乘客是否能够幸存此次灾难。

**设置你的机器学习实验室**

学习机器学习的最佳方式是跟随本教程在本地计算机上进行。为了做到这一点，如果你还没有安装相关的软件包，你需要先进行安装。

+   [Python](https://www.python.org)（本教程使用的是 3.4.2 版本）

+   [SciPy 生态系统](https://www.scipy.org)（NumPy, SciPy, Pandas, IPython, matplotlib）

+   [SciKit-Learn](http://scikit-learn.org/stable/)

+   [TensorFlow](https://www.tensorflow.org)

对于安装这些软件包的方式有多种选择。我建议使用“pip” [Python 包管理器](https://pip.pypa.io/en/stable/)，这将允许你简单地运行“pip3 install <packagename>”来安装每个依赖项。</packagename>

对于实际编写和运行代码，我建议使用 IPython，它将允许你运行模块化的代码块并立即查看输出值和数据可视化，同时使用 [Jupyter Notebook](https://jupyter.org) 作为图形界面。

你还需要我们将要分析的泰坦尼克号数据集，你可以在这里找到：[biostat.mc.vanderbilt.edu/wiki/pub/Main/DataSets/titanic3.xls](http://biostat.mc.vanderbilt.edu/wiki/pub/Main/DataSets/titanic3.xls)

**初步数据：谁幸存了泰坦尼克号，为什么？**

首先导入所需的 Python 依赖项。

```py
import matplotlib.pyplot as plt
%matplotlib inline
import random
import numpy as np
import pandas as pd
from sklearn import datasets, svm, cross_validation, tree, preprocessing, metrics
import sklearn.ensemble as ske
import tensorflow as tf
from tensorflow.contrib import skflow

```

[点击这里查看要点](https://gist.github.com/triestpa/3b384a15076aeb4ec9cc7bb8c5e494c7)

一旦我们将电子表格文件读取到 Pandas 数据框中（可以想象为超级增强版的 Excel 表格），我们可以使用 head() 命令查看前五行数据。

```py
titanic_df = pd.read_excel('titanic3.xls', 'titanic3', index_col=None, na_values=['NA'])
titanic_df.head()

```

[点击这里查看要点](https://gist.github.com/triestpa/63916ed9026f4d94d59453d53784703b)

[![泰坦尼克号 head()](../Images/9c7a78b8fc7cf94bafbbbbf4dfba10b1.png)](https://gist.github.com/triestpa/63916ed9026f4d94d59453d53784703b)

列标题变量的含义如下：

+   **生存** - 生存（0 = 否；1 = 是）

+   **舱位** - 乘客舱位（1 = 头等舱；2 = 二等舱；3 = 三等舱）

+   **姓名** - 姓名

+   **性别** - 性别

+   **年龄** - 年龄

+   **兄弟姐妹/配偶** - 乘客的兄弟姐妹/配偶数量

+   **家属** - 乘客的父母/子女数量

+   **票号** - 票号

+   **票价** - 乘客票价

+   **舱房** - 舱房

+   **登船港口** - 登船港口（C = 赫尔堡；Q = 皇后镇；S = 南安普顿）

+   **救生艇** - 救生艇（如果幸存）

+   **遗体** - 遗体编号（如果未幸存且遗体被找回）

现在我们将数据放入数据框中，可以开始使用强大的 Pandas 单行函数进行高级分析。首先，我们来看一下泰坦尼克号乘客的整体生存概率。

```py
titanic_df['survived'].mean()

# 0.3819709702062643

```

[点击这里查看要点](https://gist.github.com/triestpa/4c8a7694a2b7fee5633d99b2a421d5ef)

计算结果显示，只有 38% 的乘客幸存下来。生存几率并不高。造成这一巨大生命损失的原因是泰坦尼克号仅配备了 20 艘救生艇，远远不够 1,317 名乘客和 885 名船员使用。看起来不太可能所有乘客的生存几率相等，因此我们将继续分解数据，以研究决定谁获得救生艇座位、谁没有获得的社会动态。

在20世纪初，社会阶层高度分化，尤其是在泰坦尼克号上，奢华的头等舱区域完全对中产阶级的二等舱乘客封闭，尤其是对持有三等舱“经济票价”票的乘客。为了了解每个舱位的组成，我们可以按舱位分组数据，查看每列的平均值：

```py
titanic_df.groupby('pclass').mean()

```

[点击这里查看要点](https://gist.github.com/triestpa/b939b78f9c6b37d82f91f72dc36b9185)

![课堂含义](../Images/73edbbd0420fb96aa3e22706c61bdb4b.png)

我们可以从这些数据中得出一些有趣的见解。例如，头等舱乘客的生存率为 62%，而三等舱乘客的生存率为 25.5%。此外，低等级舱位的乘客一般较年轻，头等舱的票价显然远高于二等舱和三等舱。头等舱的平均票价为 87.5 英镑，相当于 2016 年的 13,487 美元。

我们可以使用按舱位和性别分组的功能来扩展我们的统计分析：

```py
class_sex_grouping = titanic_df.groupby(['pclass','sex']).mean()
class_sex_grouping

```

[点击这里查看要点](https://gist.github.com/triestpa/7eebb009c3529d3cfb132bd495a8f6f6)

![按性别幸存](../Images/b905c0bb74aeb8b8ea7f7ad9f68c1c38.png)

```py
class_sex_grouping['survived'].plot.bar()

```

[点击这里查看要点](https://gist.github.com/triestpa/7eebb009c3529d3cfb132bd495a8f6f6)![按性别幸存图](../Images/ebda2056c300993db9b0259b0e9efe32.png)

当泰坦尼克号沉没时，船员们著名地优先考虑谁可以乘坐救生艇，遵循严格的海洋传统，即优先疏散妇女和儿童。我们的统计结果清晰地反映了这一政策的第一部分，因为在所有舱位中，女性的幸存率远高于男性。我们还可以看到，女性的平均年龄比男性年轻，旅行时更可能与家人同行，并且她们的票价略高。

“女人和儿童优先”政策的第二部分的有效性可以通过按年龄划分的幸存率来推断。

```py
group_by_age = pd.cut(titanic_df["age"], np.arange(0, 90, 10))
age_grouping = titanic_df.groupby(group_by_age).mean()
age_grouping['survived'].plot.bar()

```

[点击这里查看要点](https://gist.github.com/triestpa/775c689998337c7afafa9fc7cfe2511c)![幸存年龄图](../Images/e33ce2952c4f80c9381539ebf49d7de1.png)

在这里我们可以看到，儿童确实是最有可能幸存的年龄组，尽管这一比例仍然悲剧性地低于60%。

![Patrick Triest](../Images/58fde3736bd01dbcfdf3fd2657ea5996.png)**个人简介: [Patrick Triest](https://www.linkedin.com/in/triestpa)** 是一位23岁的Android开发者/物联网工程师/数据科学家/有志成为先锋的人，来自波士顿，目前在SocialCops工作。他对学习有很强的瘾，有时在发现一些特别有趣的东西后，他会非常兴奋并写下他的想法。

[原文](http://blog.socialcops.com/engineering/machine-learning-python). 已获许可转载。

**相关:**

+   [掌握Python机器学习的7个步骤](/2015/11/seven-steps-machine-learning-python.html)

+   [数据科学和机器学习的前10名IPython笔记本教程](/2016/04/top-10-ipython-nb-tutorials.html)

+   [R 学习路径：从初学者到专家的 7 个步骤](/2016/03/datacamp-r-learning-path-7-steps.html)

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google 网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业道路。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google 数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升您的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持您组织的 IT

* * *

### 更多相关话题

+   [数据科学家需要专注于特定领域以应对科技寒冬](https://www.kdnuggets.com/2023/08/data-scientists-need-specialize-survive-tech-winter.html)

+   [如果我必须重新开始学习数据科学，我会怎么做？](https://www.kdnuggets.com/2020/08/start-learning-data-science-again.html)

+   [什么时候使用集成技术是一个好选择？](https://www.kdnuggets.com/2022/07/would-ensemble-techniques-good-choice.html)

+   [数据科学面试指南 - 第2部分：面试资源](https://www.kdnuggets.com/2022/04/data-science-interview-guide-part-2-interview-resources.html)

+   [数据科学面试指南 - 第1部分：结构](https://www.kdnuggets.com/2022/04/data-science-interview-guide-part-1-structure.html)

+   [想成为数据科学家？第1部分：你需要的10项硬技能](https://www.kdnuggets.com/want-to-become-a-data-scientist-part-1-10-hard-skills-you-need)
