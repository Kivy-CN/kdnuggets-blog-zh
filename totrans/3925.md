# Python 模式：使用 `max` 代替 `if`

> 原文：[https://www.kdnuggets.com/2019/01/python-patterns-max-instead-if.html](https://www.kdnuggets.com/2019/01/python-patterns-max-instead-if.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [comments](#comments)

![Header image](../Images/79377060617d28ff134f156bb760451a.png)

在编写 Python 代码时，我经常需要查看一组对象，为每个对象确定一个分数，并保存最佳分数及其相关的对象。例如，寻找在 [Scrabble](https://en.wikipedia.org/wiki/Scrabble) 中用我当前拥有的字母能组成的最高分的单词。

* * *

## 我们的前 3 个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity Certificate](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support Professional Certificate](https://www.kdnuggets.com/google-itsupport) - 支持你的组织进行 IT 工作

* * *

一种方法是遍历所有对象，并使用占位符记住到目前为止看到的最佳对象，如下所示：

```py
# Set up placeholder variables
best_score = 0
best_word = None

# Try all possible words, saving the best one seen
for word in possible_words(my_letters):
  score = score_word(word)

  if score > best_score:
    best_score = score
    best_word = word
```

你可能以前在自己的代码中写过这种逻辑。代码并不复杂，但我们仍然可以通过快速调整提高其可读性。

### 使用 `max()` 简化

`if score > best_score` 让你想起了什么？我们可能实现 `max()` 函数的方式！使用 `max()` 可以很好地简化代码：

```py
# Set up placeholder variables
best_seen = (0, None)

# Try all possible words, saving the best one seen
for word in possible_words(my_letters):
  score = score_word(word)

  newest_seen = (score, word)
  best_seen = max(best_seen, newest_seen)
```

将所有数据存储在一个元组中意味着分配和比较现在都一次性处理。这减少了我们混淆分配的可能性，并使我们所做的事情更清楚。

这里有一个潜在的陷阱：`max()` 选择第一个元素最大的元组（在我们的情况下是分数），这是我们想要的。但是，如果两个元组的第一个元素相同，`max()` 将继续比较剩余的元素，直到打破平局。所以，如果两个单词的分数相同，`max()` 将接着比较单词，这样它会按照字典顺序进行比较。

要让 `max()` 只比较第一个元素，我们可以使用 `key` 参数。`key` 参数接受一个函数，该函数在每个对象上调用，并返回另一个对象用于比较。我们可以用它来选择第一个条目，如下所示：

```py
# Set up placeholder variables
best_seen = (0, None)

# Try all possible words, saving the best one seen
for word in possible_words(my_letters):
  score = score_word(word)

  newest_seen = (score, word)
  best_seen = max(best_seen, newest_seen, key=lambda x: x[0])
```

### 更简单

在上述示例中，我们想保存分数和单词，但如果我们只关心生成最高分的单词，而不是分数本身呢？那么还有一个更简单的方法！

默认情况下，`max()` 使用标准比较操作符，但我们可以将其更改为使用我们的 `score_word()`，使用上述相同的 `key` 参数。然后我们得到：

```py
words = possible_words(my_letters)
best_word = max(words, key=score_word)
```

这给我们提供了一个非常紧凑（并且相对防错）的模式，将所有的循环和占位符都推入了`max()`的实现中。

**个人简介： [亚历山大·古德](https://www.linkedin.com/in/alexandergude/)** 目前是Intuit的数据科学家，利用机器学习进行欺诈预防。他拥有加州大学伯克利分校的物理学学士学位和明尼苏达大学双城校区的基础粒子物理学博士学位。

[原文](https://alexgude.com/blog/python-patterns-max-not-if/)。经许可转载。

**相关：**

+   [5个“干净代码”技巧将显著提升你的生产力](/2018/10/5-clean-code-tips-dramatically-improve-productivity.html)

+   [传统编程和机器学习有多大不同？](/2018/12/different-conventional-programming-machine-learning.html)

+   [使用Python在数据预处理上获得2–6倍的速度提升](/2018/10/get-speed-up-data-pre-processing-python.html)

### 更多相关内容

+   [停止在数据科学项目中硬编码 - 使用配置文件](https://www.kdnuggets.com/2023/06/stop-hard-coding-data-science-project-config-files-instead.html)

+   [为什么你应该使用线性回归模型而不是…的3个理由](https://www.kdnuggets.com/2021/08/3-reasons-linear-regression-instead-neural-networks.html)

+   [忘掉PIP、Conda和requirements.txt吧！使用Poetry，并…](https://www.kdnuggets.com/2023/07/forget-pip-conda-requirementstxt-poetry-instead-thank-later.html)

+   [揭示隐藏模式：层次聚类简介](https://www.kdnuggets.com/unveiling-hidden-patterns-an-introduction-to-hierarchical-clustering)

+   [机器学习中的设计模式及MLOps](https://www.kdnuggets.com/2022/02/design-patterns-machine-learning-mlops.html)

+   [通过《快速Python数据科学》提升你的Python技能！](https://www.kdnuggets.com/2022/06/manning-step-python-game-fast-python-data-science.html)
