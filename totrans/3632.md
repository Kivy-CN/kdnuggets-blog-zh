# 驯服 MLOps 中的复杂性

> 原文：[https://www.kdnuggets.com/2020/05/taming-complexity-mlops.html](https://www.kdnuggets.com/2020/05/taming-complexity-mlops.html)

[评论](#comments)

**由 [Sourav Dey](https://www.linkedin.com/in/souravdeymit/)，Manifold.ai 的首席技术官**。

现在差不多快两年了，我的同事 Alexander Ng [分享了我们的想法](https://www.kdnuggets.com/2018/05/torus-docker-first-data-science.html)，为什么机器学习工程师 (MLEs) 的崛起意味着我们需要一种 DevOps 方法来应对机器学习 (ML)，以及为什么我们的团队创建了一个开源工具来使其他从事 AI 和数据科学的团队的工作更轻松。Orbyter 1.0（当时叫做 Torus）专注于通过提供一个完全配置、现成的 Docker 化本地开发环境，简化 ML 管道，帮助数据科学项目。

在刚发布的 2.0 版本中，我们专注于减少附带复杂性，同时继续添加让你的工作更轻松的功能。

### 将最佳实践变为现成解决方案

Orbyter 2.0 内置了减少附带复杂性的功能。如果你还不熟悉软件中的固有复杂性与附带复杂性的二分法，你可以阅读 David Hayes 的 [很棒的解释](https://pressupinc.com/blog/2014/05/root-causes-software-complexity/)：

> 软件中的所有复杂性都可以准确地看作是固有复杂性与附带复杂性这两种情况之一。把你软件中所有让人不爽的部分去掉，减去那些因为是难题而让人不爽的部分，你剩下的就是附带复杂性的（小山丘或大山，我让你选择）...

数据科学和人工智能充满了难题，因此编写 ML 软件通常伴随着显著的固有复杂性。我们无法在工具中解决这些问题；困难的问题总是困难的。然而，我们可以通过对软件工程最佳实践进行规范来减少附带复杂性，例如：

+   使用 [Black](https://black.readthedocs.io/en/stable/) 进行 PEP8 标准的 linting

+   使用 [pytest](https://docs.pytest.org/en/latest/) 进行简单的单元测试

+   集中式日志设置

+   在 GitHub 中添加持续集成钩子

+   遵守数据管道抽象

例如，Orbyter 2.0 现在允许你使用包含的本地脚本自动将代码格式化为 [Python PEP 8](https://www.python.org/dev/peps/pep-0008/) 标准。它还具有现成的与 [GitHub Actions](https://github.com/features/actions) 的持续集成，因此当你将代码推送到 GitHub 时，它会自动进行 lint 检查并运行单元测试。一个 YAML 文件提供了一个配置稳健日志记录的单一位置。此外，代码被构建为符合隔离的输入/输出架构，允许在数据管道中快速迭代。我们还定义了一些明确的端点——train、predict、evaluate——作为可以作为 Docker 入口点调用的 Click 命令行脚本。

![](../Images/2bc22ef5c66306e53a412ecd17f81cf8.png)

*示例项目架构。*

本质上，我们尝试将良好的软件工程规范尽可能地做成即插即用。你的未来自己会感谢你。

### 追踪你的实验

尽管许多组织现在拥有强大的数据科学团队，进行重要的实验和建模研发，但这些公司往往在将这些工作的结果 [从实验室到工厂](https://hbr.org/2013/04/two-departments-for-data-succe) 时遇到困难。没有人希望看到他们的辛勤工作被搁置在孤岛中；真正的乐趣在于看到你的模型在现实世界中产生影响。但要实现这种转变需要大量的工程工作，许多组织仍然没有足够的生产部署能力。

为了解决这一断层，我们添加了一个新的 MLflow 容器。Orbyter 1.0 提供了一个单一的容器，并且是流行的 [Cookiecutter Data Science](https://drivendata.github.io/cookiecutter-data-science/) 的一个分支，适合轻松设置 Docker 化的工作流。Orbyter 2.0 仍然是基本的 Docker 化数据科学，但现在当你启动它时，你会得到三个不同的容器：第一个像以前一样提供 Jupyter；第二个提供 Bash，用于运行脚本；第三个提供 [MLflow](https://mlflow.org/)，用于实验追踪。

我们认为实验追踪是应用机器学习的一个重要部分，并且非常喜欢使用 MLflow 来完成这一步骤。它还可以帮助进行可重复运行的打包以及将模型发送到部署。

### 继续降低入门门槛

我们之所以最初开始构建 Orbyter，是因为我们相信 Docker 和容器化是未来的发展方向。Alex 在他的初始帖子中解释得很好：

> 尽管通过仔细使用虚拟环境和有纪律的系统级配置管理也可以实现这种一致性，但容器在新环境的启动/停止时间和开发者生产力方面仍然提供了显著的优势。然而，我们从数据科学社区反复听到的是：我知道 Docker 会使这变得更简单，但我没有时间或资源去设置和搞清楚这一切。

Orbyter 的诞生是为了降低进入 Docker 首选工作流的门槛。随着 Orbyter 2.0 的额外变化，迁移到 Docker 首选工作流比以往任何时候都更简单。迁移到这个 Docker 化工作流使得使用各种云工具变得更加方便——包括 SageMaker、Kubernetes、ECS 等。例如：

+   我们使用 AWS Batch 为制药客户建立了一个 AWS 大规模实验平台。得益于在 Docker 容器中，我们快速完成了这一任务，并在 MLflow 中进行跟踪。我们会在夜间运行任务，并在早上查看结果。

+   我们为多个客户开发了复杂的 CI/CD 管道，这些管道在 Git 标签后自动构建生产 Docker 镜像，并将其放入 ECR，以便轻松投入生产。

由于 Orbyter 本身功能越来越丰富，我们致力于保持入门过程尽可能简单明了。我们创建了一个演示仓库，展示了如何使用它—将我们在 Strata 数据大会上展示、路测和优化的演示公开提供。你可以在[这里](https://github.com/manifoldai/orbyter-demo)找到它。

随着我们继续开发 Orbyter 并简化开发流程，请关注更多更新。

**相关：**

+   [揭开 AI 基础设施栈的神秘面纱](https://www.kdnuggets.com/2020/05/demystifying-ai-infrastructure-stack.html)

+   [部署机器学习模型意味着什么？](https://www.kdnuggets.com/2020/02/deploy-machine-learning-model.html)

+   [10 个对 Python 开发者有用的机器学习实践](https://www.kdnuggets.com/2020/05/10-useful-machine-learning-practices-python-developers.html)

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌 IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织的 IT

* * *

### 更多相关主题

+   [使用变压器的内存复杂性](https://www.kdnuggets.com/2022/12/memory-complexity-transformers.html)

+   [线性回归模型选择：平衡简单性和复杂性](https://www.kdnuggets.com/2023/02/linear-regression-model-selection-balancing-simplicity-complexity.html)

+   [MLOps 中的设计模式](https://www.kdnuggets.com/2022/02/design-patterns-machine-learning-mlops.html)

+   [MLOps 是一团乱麻，但这是可以预期的](https://www.kdnuggets.com/2022/03/mlops-mess-expected.html)

+   [MLOps 全面指南](https://www.kdnuggets.com/2023/08/comprehensive-guide-mlops.html)

+   [Ploomber与Kubeflow：简化MLOps](https://www.kdnuggets.com/2022/02/ploomber-kubeflow-mlops-easier.html)
