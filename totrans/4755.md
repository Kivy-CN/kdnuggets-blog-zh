# 使用 USB 摄像头和无线连接的 Raspberry Pi 构建监控系统

> 原文：[https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html](https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html?page=2#comments)![图像](../Images/7ecb460338fdae3902be4aab8d9b2b90.png)

使用 Raspberry Pi 连接 USB 摄像头和当发生变化时点亮 LED 的电路的监控系统

本教程讨论如何使用插入到 Raspberry Pi (RPi) 的 USB 摄像头构建监控系统，该系统通过无线接口连接到 PC。使用 PyGame 访问摄像头并捕获图像，这些图像存储在 RPi 的 SD 卡中。为场景创建一个背景模型，以发现与默认状态的变化。一个简单的电路连接到 GPIO 引脚，当发生变化时，点亮 LED 作为状态指示。

* * *

## 我们的前三名课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速入门网络安全职业

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析能力

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌 IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织的 IT 部门

* * *

本教程包含以下步骤：

1.  使用无线接口将 RPi 连接到 PC。

1.  将 USB 摄像头连接到 RPi。

1.  使用**PyGame**捕获图像。

1.  构建背景模型。

1.  检测背景模型的变化。

1.  构建一个简单的电路，当发生变化时点亮 LED。

本教程假设读者的 PC 连接到无线网络，RPi 通过以太网接口连接到路由器。要进行这样的工作，请阅读标题为“**在 Raspberry Pi 上运行的图像分类器的构建**”的教程，链接如下：

[https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad](https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad)

你应该能够使用像“Advanced IP Scanner”这样的软件来了解设备的 IP 地址，并熟悉使用 MobaXterm 软件建立 SSH 连接。之后，我们可以开始讨论上述每一个步骤。

### 1\. 使用无线接口将 RPi 连接到 PC

在之前的教程“**在树莓派上构建图像分类器**”中，我们建立了一个由三台设备连接的网络，包括RPi、一个路由器和一台PC。RPi通过以太网接口连接到路由器，而PC则通过无线接口连接到路由器。在本教程中，我们将通过使用RPi的无线接口连接到路由器来修改该网络。这使得网络完全无线连接，避免了线缆的限制。

在能够使用RPi的无线接口之前，需要对其进行配置。因此，我们仍将使用通过以太网接口建立的连接来配置无线接口。通过路由器的DHCP，RPi以太网接口将获得一个IPv4地址。该地址可以用来建立安全外壳（SSH）连接。你可以参考之前的教程获取关于建立连接的更多细节。

在使用MobaXterm创建的SSH会话中，我们可以开始使用终端命令或Raspbian OS的GUI配置无线接口。两种方法都很简单。

使用终端命令，我们将首先扫描可用的无线网络以找到它们的服务集标识符（SSID）。这可以通过以下命令完成：

```py
pi@raspberrypi:~ $ sudo iwlist wlan0 scan

```

该命令输出的前几行如下面的图所示。目标无线网络的SSID是“**TEData_864A**”。注意，你不必使用路由器将PC连接到RPi。使用智能手机，我们可以创建一个接入点来进行连接。

![](../Images/e00bb22c99f7e98a0bf514ad0d8043d7.png)

知道目标网络的SSID后，我们可以使用它来配置无线接口。此配置存在于一个文件中，可以通过以下命令访问：

```py
pi@raspberrypi:~ $ sudo nano /etc/wpa_supplicant/wpa_supplicant.conf

```

文件将在终端中打开。使用向下箭头，返回到文件末尾以编写网络配置。这是通过写入网络的SSID和密码来完成的，如下所示：

```py
network={

                ssid=”TEData_864A”

                psk=”YOUR_NETWOK_PASSWORD”

}

```

然后，按CTRL+X退出文件，按Y保存更改。以我的情况，我配置了两个网络，因此文件内容根据下图显示了两个配置的网络。

![](../Images/8c8f3a5bd05976638e6091c288008624.png)

你可能需要将无线接口的状态从“up”更改为“down”，然后再将其设置为“up”以应用这些配置。这可以通过以下两个命令完成：

```py
pi@raspberry:~ $ sudo ifdown wlan0

pi@raspberry:~ $ sudo ifup wlan0

```

要检查无线接口是否正确配置，请输入“**ifconfig**”命令以检索接口的配置。

```py
pi@raspberry:~ $ ifconfig

```

根据该命令的输出，无线接口被分配了一个IPv4地址为192.168.1.8。这就是如何使用终端命令配置无线连接的方法。

![](../Images/2f9a1b84ba603eb859c7e2f63456efad.png)

我们也可以通过操作系统的 GUI 来完成相同的操作，可以使用 **startlxde** 终端命令访问该 GUI。GUI 打开后，会在操作系统栏的右侧显示一个网络连接图标。点击它会打开一个无线网络列表，如下图所示。点击任意项目将打开一个窗口，允许您输入密码。输入 SSID 为“**TEData_864A**”的网络密码后，输入“**ifconfig**”命令，结果将与前图所示相同。

![](../Images/9887a4656096aa509325b8a94b45c7c2.png)

此时，我们已经将 PC 和 RPi 无线连接到路由器。当前网络的状态如图所示。我们现在可以断开以太网连接，只使用 RPi 和路由器之间的无线连接。

![](../Images/aabcf9e426da78e352c0080ade64f188.png)

### 2\. 将 USB 摄像头连接到 RPi

RPi 有自己的摄像头模块可以使用。为了避免购买可能价格昂贵的这个模块，我们可以使用 USB 摄像头，这种摄像头可能随处可见且成本较低。此类摄像头的配置非常简单。只需将 USB 摄像头连接到 RPi 的一个 USB 端口。连接完成后，我们可以通过使用“fswebcam”软件包捕捉图像以检查摄像头是否正常工作。首先，我们需要使用以下命令安装该软件包：

```py
pi@raspberry:~ $ sudo apt-get install fswebcam

```

之后，我们可以用它来捕捉图像。一种非常基本的方法如下：

```py
pi@raspberry:~ $ sudo fswebcam test_image.jpg

```

这将访问摄像头，捕捉图像，并将其保存在当前目录中的 SD 卡上，文件名为“test_image.jpg”。执行该命令后的输出如图所示。

![](../Images/7f9efd622efe59a63ca7ddfd6f4da000.png)

这是捕捉到的图像：

![](../Images/4817e837d8c7dc448b431c6e5d47bb3e.png)

### 相关更多内容

+   [使用 Python 为亚马逊产品构建推荐系统](https://www.kdnuggets.com/2023/02/building-recommender-system-amazon-products-python.html)

+   [使用 Hugging Face Transformers 构建推荐系统](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)

+   [如何利用级别系统预测 AI 成本](https://www.kdnuggets.com/2022/03/level-system-help-forecast-ai-costs.html)

+   [学习系统设计：前 5 名必读书单](https://www.kdnuggets.com/learning-system-design-top-5-essential-reads)

+   [使用 Python 的 Watchdog 监控文件系统](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)

+   [使用 Llama 和 ChatGPT 构建多聊天后台微服务](https://www.kdnuggets.com/building-microservice-for-multichat-backends-using-llama-and-chatgpt)
