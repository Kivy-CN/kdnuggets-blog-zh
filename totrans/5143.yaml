- en: SQL With CSVs
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2023/01/sql-csvs.html](https://www.kdnuggets.com/2023/01/sql-csvs.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![SQL With CSVs](../Images/d30ab2e25327dab49fed47189b537040.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by Author
  prefs: []
  type: TYPE_NORMAL
- en: 'You can run SQL query on a CSV file:'
  prefs: []
  type: TYPE_NORMAL
- en: By importing a CSV file on [SQL Online IDE](https://sqliteonline.com/#).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By importing a CSV file directly to Database.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By using Python, R, or Julia Packages to run SQL directly on a CSV file.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By using DuckDB, which is best for running fast analytical queries on large
    CSV files.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By using CLI tools.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: In this post, we will be reviewing the most popular CLI tool for processing
    the CSV files and learning how to run SQL queries on CSV files hassle free.
  prefs: []
  type: TYPE_NORMAL
- en: csvkit
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[csvkit](https://csvkit.readthedocs.io/en/latest/) consists of multiple command
    line conversion and processing tools. It is the king of tabular file formats.'
  prefs: []
  type: TYPE_NORMAL
- en: You can convert Excel to CSV, JSON to CSV, and CSV to JSON files.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Analyze the data by printing column names, viewing a subset of columns, reordering
    the columns, finding the rows with matching cells, and generating the summary
    statistics.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Run SQL Query on CSV file.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Import the data to the PostgreSQL database and extract the data from PostgreSQL
    to a CSV file.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We will be focusing on running SQL queries and displaying and saving the result.
  prefs: []
  type: TYPE_NORMAL
- en: Installation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: You can install the csvkit using PIP.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: After installation, read the documentation in Shell by typing the command below
    or reading the [documentation](https://csvkit.readthedocs.io/en/latest/) online.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Syntax
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To run the SQL, you need to use the --query argument and then write a query
    in the quotation mark. For longer SQL queries, you can use line breaks, as it
    works fine with PowerShell/ Bash.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Note:** the file name at the end must be the same as the name of the table
    in the query.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: SQL with CSVs using csvkit
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will use a modified version of the [Top 50 Fast-Food Chains
    in USA](https://www.kaggle.com/datasets/iamsouravbanerjee/top-50-fastfood-chains-in-usa)
    dataset from Kaggle to run the SQL query on a CSV file and print and save the
    results.
  prefs: []
  type: TYPE_NORMAL
- en: Simple Query
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: First, we will run a simple query to test if the command works.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '**Output:**'
  prefs: []
  type: TYPE_NORMAL
- en: The results show four columns and the first two records of fast food chains
    in the USA.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Complex Query
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let’s try to run a complex SQL query to filter out the top 5 fast food chains
    with sales greater than or equal to 4 billion dollars.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '**Output:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Results with csvlook
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We will pipe “|” our result to the **csvlook** command and convert the result
    into tabular form.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '**Output:**'
  prefs: []
  type: TYPE_NORMAL
- en: It has improved the SQL query output.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Saving the results
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We will use redirection “>” to save SQL query results into CSV files. You can
    provide a filename or filename with a full address.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '**Result:**'
  prefs: []
  type: TYPE_NORMAL
- en: As we can see, the file is successfully saved in the current directory.
  prefs: []
  type: TYPE_NORMAL
- en: '![SQL With CSVs](../Images/f11401dbdae82e9aeb4757c0740e97eb.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by Author | Filtered CSV file using SQL
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Having a handy command line tool helps you in automating the tasks and data
    pipelines. You can even use free online SQL tools and start working on the data
    analysis project.
  prefs: []
  type: TYPE_NORMAL
- en: I will recommend you use [Deepnote](https://deepnote.com/) for running SQL queries
    on CSV files in seconds. It uses DuckDB in the background.
  prefs: []
  type: TYPE_NORMAL
- en: Do let me know if you have questions about using SQL in Jupyter notebook, Deepnote,
    DuckDB, and csvkit. I will try my best to assist you.
  prefs: []
  type: TYPE_NORMAL
- en: '**[Abid Ali Awan](https://www.polywork.com/kingabzpro)** ([@1abidaliawan](https://twitter.com/1abidaliawan))
    is a certified data scientist professional who loves building machine learning
    models. Currently, he is focusing on content creation and writing technical blogs
    on machine learning and data science technologies. Abid holds a Master''s degree
    in Technology Management and a bachelor''s degree in Telecommunication Engineering.
    His vision is to build an AI product using a graph neural network for students
    struggling with mental illness.'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Query Your Pandas DataFrames with SQL](https://www.kdnuggets.com/2021/10/query-pandas-dataframes-sql.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Data Preparation with SQL Cheatsheet](https://www.kdnuggets.com/2021/05/data-preparation-sql-cheat-sheet.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Getting Started with SQL Cheatsheet](https://www.kdnuggets.com/2022/08/getting-started-sql-cheatsheet.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Handling Missing Values in Time-series with SQL](https://www.kdnuggets.com/2022/09/handling-missing-values-timeseries-sql.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[4 Useful Intermediate SQL Queries for Data Science](https://www.kdnuggets.com/2022/12/4-useful-intermediate-sql-queries-data-science.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[5 Tricky SQL Queries Solved](https://www.kdnuggets.com/2020/11/5-tricky-sql-queries-solved.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
