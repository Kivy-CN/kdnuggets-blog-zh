# 使用 USB 摄像头和无线连接的树莓派构建监控系统

> 原文：[https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html](https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html?page=2#comments)![图片](../Images/7ecb460338fdae3902be4aab8d9b2b90.png)

使用树莓派连接 USB 摄像头和一个在发生变化时点亮 LED 的电路的监控系统

本教程讨论如何使用连接到树莓派 (RPi) 的 USB 摄像头构建监控系统，该树莓派通过无线接口连接到 PC。使用 PyGame 访问摄像头并捕获图像，这些图像存储在 RPi 的 SD 卡中。为场景创建一个背景模型，以便从默认状态中发现变化。一个简单的电路连接到 GPIO 引脚，用于指示这些状态的 LED 灯。

* * *

## 我们的前三大课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google 网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google 数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织的 IT

* * *

本教程包含以下步骤：

1.  使用无线接口将 RPi 连接到 PC。

1.  将 USB 摄像头连接到 RPi。

1.  使用 **PyGame** 捕获图像。

1.  构建背景模型。

1.  检测背景模型的变化。

1.  构建一个在发生变化时点亮 LED 的简单电路。

本教程假设读者拥有一台连接到无线网络的 PC 和通过以太网接口连接到路由器的 RPi。有关此工作的详细信息，请阅读标题为“**在树莓派上构建图像分类器**”的教程，链接如下：

[https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad](https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad)

你应该能够通过使用诸如“Advanced IP Scanner”的软件来获取设备的 IP 地址，并熟悉使用 MobaXterm 软件建立 SSH 连接。之后，我们可以开始讨论上述每一个步骤。

### 1\. 使用无线接口将 RPi 连接到 PC

在之前的教程“**在树莓派上构建图像分类器**”中，我们构建了一个包含RPi、路由器和PC的三设备网络。RPi通过以太网接口连接到路由器，而PC则通过无线接口连接到路由器。在本教程中，我们将通过使用RPi的无线接口连接到路由器来修改这个网络。这使得网络完全无线连接，避免了线缆的限制。

RPi的无线接口在使用之前需要配置。为此，我们将继续使用通过以太网接口建立的连接来配置无线接口。通过路由器中的DHCP，RPi以太网接口将被分配一个IPv4地址。然后可以使用该地址建立安全外壳（SSH）连接。有关建立连接的更多详细信息，请参考之前的教程。

在使用MobaXterm创建的SSH会话中，我们可以使用终端命令或Raspbian OS的GUI开始配置无线接口。两种方法都很简单。

使用终端命令，我们将首先扫描可用的无线网络，以找到它们的服务集标识符（SSID）。可以使用以下命令来完成这一操作：

```py
pi@raspberrypi:~ $ sudo iwlist wlan0 scan

```

该命令的输出前几行如图所示。目标无线网络的SSID是**TEData_864A**。请注意，你不必使用路由器来将PC连接到RPi。我们可以使用智能手机创建一个访问点来进行连接。

![](../Images/e00bb22c99f7e98a0bf514ad0d8043d7.png)

在知道目标网络的SSID后，我们可以用它来配置无线接口。这种配置存在于一个文件中，可以使用以下命令访问：

```py
pi@raspberrypi:~ $ sudo nano /etc/wpa_supplicant/wpa_supplicant.conf

```

文件将在终端中打开。使用向下箭头，回到文件末尾以编写网络配置。这是通过写入网络的SSID和密码来完成的，如下所示：

```py
network={

                ssid=”TEData_864A”

                psk=”YOUR_NETWOK_PASSWORD”

}

```

之后，按CTRL+X退出文件，然后按Y保存更改。对我来说，我配置了两个网络，因此文件内容包含了两个配置的网络，如下图所示。

![](../Images/8c8f3a5bd05976638e6091c288008624.png)

你可能需要将无线接口的状态从“up”更改为“down”，然后再将其设置为“up”以应用这些配置。这可以通过以下两个命令完成：

```py
pi@raspberry:~ $ sudo ifdown wlan0

pi@raspberry:~ $ sudo ifup wlan0

```

要检查无线接口是否配置正确，请输入“**ifconfig**”命令以检索接口的配置。

```py
pi@raspberry:~ $ ifconfig

```

根据该命令的输出，无线接口被分配了一个IPv4地址192.168.1.8。这就是使用终端命令配置无线连接的方法。

![](../Images/2f9a1b84ba603eb859c7e2f63456efad.png)

我们可以通过操作系统的GUI实现相同的操作，该GUI可以通过**startlxde**终端命令访问。打开GUI后，OS栏右侧会有一个网络连接的图标。点击它会打开一个菜单，显示可用的无线网络，如下图所示。点击任何项目会打开一个窗口，允许输入密码。通过输入SSID为“**TEData_864A**”的网络密码，并输入“**ifconfig**”命令，结果将与之前的图示相同。

![](../Images/9887a4656096aa509325b8a94b45c7c2.png)

此时，我们已经将PC和RPi无线连接到路由器。当前网络如下图所示。我们现在可以移除以太网连接，仅使用RPi和路由器之间的无线连接。

![](../Images/aabcf9e426da78e352c0080ade64f188.png)

### 2\. 将USB摄像头连接到RPi

RPi有自己的相机模块可以使用。为了节省成本，我们可以使用一个USB摄像头，这种摄像头在很多地方都能以较低的价格找到。配置这样的摄像头非常简单。只需将USB摄像头连接到RPi的USB端口之一。完成后，我们可以通过使用“fswebcam”包捕捉图像来检查摄像头是否正常工作。首先，我们需要使用以下命令安装该包：

```py
pi@raspberry:~ $ sudo apt-get install fswebcam

```

之后，我们可以用它来捕捉图像。一种非常基本的方法如下：

```py
pi@raspberry:~ $ sudo fswebcam test_image.jpg

```

这会访问摄像头，捕捉图像，并将其保存到当前目录中的SD卡上，文件名为“test_image.jpg”。执行命令后的输出如以下图所示。

![](../Images/7f9efd622efe59a63ca7ddfd6f4da000.png)

这是捕捉到的图像：

![](../Images/4817e837d8c7dc448b431c6e5d47bb3e.png)

### 更多相关主题

+   [使用Python为亚马逊产品构建推荐系统](https://www.kdnuggets.com/2023/02/building-recommender-system-amazon-products-python.html)

+   [使用Hugging Face Transformers构建推荐系统](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)

+   [如何利用等级系统预测AI成本](https://www.kdnuggets.com/2022/03/level-system-help-forecast-ai-costs.html)

+   [学习系统设计：5本必读书单](https://www.kdnuggets.com/learning-system-design-top-5-essential-reads)

+   [使用Python的Watchdog监控文件系统](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)

+   [使用Llama和ChatGPT构建多聊天后端的微服务](https://www.kdnuggets.com/building-microservice-for-multichat-backends-using-llama-and-chatgpt)
