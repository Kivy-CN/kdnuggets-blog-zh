- en: Monitor Model Performance in the MLOps Pipeline with Python
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2023/05/monitor-model-performance-mlops-pipeline-python.html](https://www.kdnuggets.com/2023/05/monitor-model-performance-mlops-pipeline-python.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![Monitor Model Performance in the MLOps Pipeline with Python](../Images/c45e64265ef9f59c378eddc4e66498df.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by [rawpixel.com](https://www.freepik.com/free-photo/girl-coding-interactive-screen_13307587.htm#query=machine%20learning&from_query=mlops&position=2&from_view=search&track=sph)
    on [Freepik](https://www.freepik.com/)
  prefs: []
  type: TYPE_NORMAL
- en: The machine learning model is only helpful if used in production to solve business
    problems. However, the business problem and the machine learning model are constantly
    evolving. That is why we need to maintain the machine learning so the performance
    keeps up with the business KPI. This is where the MLOps concept came from.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: MLOps, or machine learning operations, is a collection of techniques and tools
    for machine learning in production. From the machine learning automation, versioning,
    delivery, and monitoring is something that MLOps handle. This article will focus
    on monitoring and how we use Python packages to set up monitoring model performance
    in production. Let’s get into it.
  prefs: []
  type: TYPE_NORMAL
- en: Monitor Model Performance
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'When we talk about monitoring in the MLOps, it could refer to many things,
    as one of the MLOps principles is monitoring. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '- Monitor the data distribution change over time'
  prefs: []
  type: TYPE_NORMAL
- en: '- Monitor the features used in the development vs. production'
  prefs: []
  type: TYPE_NORMAL
- en: '- Monitor model decay'
  prefs: []
  type: TYPE_NORMAL
- en: '- Monitor model performance'
  prefs: []
  type: TYPE_NORMAL
- en: '- Monitor the system staleness'
  prefs: []
  type: TYPE_NORMAL
- en: There are still a lot of elements to monitor in the MLOps, but in this article,
    we will focus on monitoring model performance. Model performance, in our case,
    refers to the capability of the model to make reliable predictions from unseen
    data, measured with specific metrics such as accuracy, precision, recall, etc.
  prefs: []
  type: TYPE_NORMAL
- en: Why do we need to monitor the model performance? It’s to maintain the model
    prediction reliability to solve the business problem. Before production, we often
    calculate the model performance and its effect on the KPI; for example, the baseline
    is 70% Accuracy if we want our model still follow the business needs, but below
    that is unacceptable. That is why monitoring the performance would allow the model
    always to meet the business requirements.
  prefs: []
  type: TYPE_NORMAL
- en: Using Python, we would learn how model monitoring is done. Let’s start by installing
    the package. There are many choices for model monitoring, but for this example,
    we would use the open-source package for monitoring called [evidently](https://docs.evidentlyai.com/).
  prefs: []
  type: TYPE_NORMAL
- en: Setup the Model Monitoring with Python
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: First, we need to install the evidently package with the following code.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: After installing the package, we would download the data example, the insurance
    claim data from [Kaggle](https://www.kaggle.com/datasets/buntyshah/auto-insurance-claims-data).
    Also, we would clean the data before we use them further.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: In the code above, we select some columns for model training purposes, transform
    them into numerical representation, and split the data for reference (data) and
    current data (val).
  prefs: []
  type: TYPE_NORMAL
- en: We need reference or baseline data in the MLOps pipeline to monitor model performance.
    It’s usually the data separated from the training data (for example, test data).
    Also, we need the current data or the data unseen by the model (incoming data).
  prefs: []
  type: TYPE_NORMAL
- en: Let’s use evidently to monitor the data and the model performance. Because data
    drift would affect the model performance, it’s also something considered to monitor.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![Monitor Model Performance in the MLOps Pipeline with Python](../Images/c3d7dcebabead70913ce16ac29d29e40.png)'
  prefs: []
  type: TYPE_IMG
- en: The evidently package would automatically show a report on what happened to
    the dataset. The information includes the dataset drift and the column drift.
    For the example above, we don’t have any dataset drift occurrence, but two columns
    drifted.
  prefs: []
  type: TYPE_NORMAL
- en: '![Monitor Model Performance in the MLOps Pipeline with Python](../Images/d76b0e29afa4bd8595f1aeba97aca230.png)'
  prefs: []
  type: TYPE_IMG
- en: The report shows that the column ‘property_claim’ and ‘timestamp’ indeed have
    drift detected. This information can be used in the MLOps pipeline to retrain
    the model, or we still need a further data exploration.
  prefs: []
  type: TYPE_NORMAL
- en: If required, we can also acquire the data report above in the log dictionary
    object.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Next, let’s try to train a classifier model from the data and try to use evidently
    to monitor the model's performance.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Evidently would need both the target and prediction columns in the reference
    and the current dataset. Let’s add the model prediction to the dataset and use
    evidently to monitor the performance.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: As a note, it’s better to have the reference data that is not the training data
    for the actual cases to monitor the model performance. Let’s set up the model
    performance monitoring with the following code.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '![Monitor Model Performance in the MLOps Pipeline with Python](../Images/ee6313a5cadb8d52e7ffa771987a9c3d.png)'
  prefs: []
  type: TYPE_IMG
- en: In the result, we get the current model quality metrics are lower than the reference
    (expected as we use training data for the reference). Depending on the business
    requirement, the metrics above could become indicators of the next step we need
    to take. Let’s see the other information we get from the evidently report.![Monitor
    Model Performance in the MLOps Pipeline with Python](../Images/5966c68fa602c9eacf831cdb98eb0873.png)
  prefs: []
  type: TYPE_NORMAL
- en: The class Representation report shows the actual class distribution.![Monitor
    Model Performance in the MLOps Pipeline with Python](../Images/8a236668802bf968ba1f256b57a2a4ff.png)
  prefs: []
  type: TYPE_NORMAL
- en: The confusion matrix shows how the prediction values were against the actual
    data in both reference and current datasets.
  prefs: []
  type: TYPE_NORMAL
- en: '![Monitor Model Performance in the MLOps Pipeline with Python](../Images/30e0bbb1075e3353ae937c087e25baff.png)'
  prefs: []
  type: TYPE_IMG
- en: Quality Metrics by Class show how the performance of each class.
  prefs: []
  type: TYPE_NORMAL
- en: Like before, we can transform the classification performance report into a dictionary
    log with the following code.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: That is all for now. You can set up the model performance monitor with evidently
    in any MLOps pipeline you currently have, and it would still work wonderfully.
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Model performance monitoring is an essential task in the MLOps pipeline as it’s
    the one that would help maintain how our model keeps up with the business requirement.
    With a Python package called evidently, we can easily set up the model performance
    monitor, which can be integrated into any existing MLOps pipeline.
  prefs: []
  type: TYPE_NORMAL
- en: '**[Cornellius Yudha Wijaya](https://www.linkedin.com/in/cornellius-yudha-wijaya/)**
    is a data science assistant manager and data writer. While working full-time at
    Allianz Indonesia, he loves to share Python and Data tips via social media and
    writing media.'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Monitor Your File System With Python’s Watchdog](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Managing Model Drift in Production with MLOps](https://www.kdnuggets.com/2023/05/managing-model-drift-production-mlops.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Boost your machine learning model performance!](https://www.kdnuggets.com/2023/04/manning-boost-machine-learning-model-performance.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Using Transfer Learning to Boost Model Performance](https://www.kdnuggets.com/using-transfer-learning-to-boost-model-performance)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Machine Learning Pipeline Optimization with TPOT](https://www.kdnuggets.com/2021/05/machine-learning-pipeline-optimization-tpot.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[6 Data Science Technologies You Need to Build Your Supply Chain Pipeline](https://www.kdnuggets.com/2022/01/6-data-science-technologies-need-build-supply-chain-pipeline.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](../Images/eb105b2b614c4a6165d83fbc2b9711a1.png)'
  prefs: []
  type: TYPE_IMG
- en: '[](/news/subscribe.html)'
  prefs: []
  type: TYPE_NORMAL
- en: '[Get the FREE ebook ''The Great Big Natural Language Processing Primer'' and
    ''The Complete Collection of Data Science Cheat Sheets'' along with the leading
    newsletter on Data Science, Machine Learning, AI & Analytics straight to your
    inbox.](/news/subscribe.html)'
  prefs: []
  type: TYPE_NORMAL
- en: By subscribing you accept KDnuggets [Privacy Policy](https://www.kdnuggets.com/news/privacy-policy.html)
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '[<= Previous post](https://www.kdnuggets.com/2023/05/build-chatgptlike-chatbot-courses.html)[Next
    post =>](https://www.kdnuggets.com/2023/05/stop-chatgpt-get-ahead-99-users.html)'
  prefs: []
  type: TYPE_NORMAL
- en: '[Latest Posts](/news/index.html)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[How To Trace Memory Allocation in Python](https://www.kdnuggets.com/how-to-trace-memory-allocation-in-python)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[How to Import Data in R](https://www.kdnuggets.com/how-to-import-data-in-r)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Top 5 Machine Learning APIs Practitioners Should Know](https://www.kdnuggets.com/top-5-machine-learning-apis-practitioners-should-know)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[New Professional Tech Certificates from Google, Snowflake & Microsoft](https://www.kdnuggets.com/new-professional-tech-certificates-from-google-snowflake-microsoft)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[5 Hidden Gem Python Libraries for Data Science](https://www.kdnuggets.com/5-hidden-gem-python-libraries-for-data-science)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[NumPy for Linear Algebra Applications](https://www.kdnuggets.com/numpy-for-linear-algebra-applications)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: Top Posts
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '[4 Entry-Level Certificates from Microsoft to Land In-Demand Jobs](https://www.kdnuggets.com/4-entry-level-certificates-from-microsoft-to-land-in-demand-jobs)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[5 Hidden Gem Python Libraries for Data Science](https://www.kdnuggets.com/5-hidden-gem-python-libraries-for-data-science)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[10 Built-In Python Modules Every Data Engineer Should Know](https://www.kdnuggets.com/10-built-in-python-modules-every-data-engineer-should-know)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[How to Manage Categorical Data Effectively with Pandas](https://www.kdnuggets.com/how-to-manage-categorical-data-effectively-with-pandas)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Project Ideas to Master Data Engineering](https://www.kdnuggets.com/project-ideas-to-master-data-engineering)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Using FastAPI for Building ML-Powered Web Apps](https://www.kdnuggets.com/using-fastapi-for-building-ml-powered-web-apps)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[I Took Udacity’s Free A/B Testing Course by Google: Here’s What I Learned](https://www.kdnuggets.com/i-took-udacitys-free-a-b-testing-course-by-google-heres-what-i-learned)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Stop Paying for Courses and Learn for Free](https://www.kdnuggets.com/stop-paying-for-courses-and-learn-for-free)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Using FLUX.1 Locally](https://www.kdnuggets.com/using-flux-1-locally)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[5 Common Data Science Mistakes and How to Avoid Them](https://www.kdnuggets.com/5-common-data-science-mistakes-and-how-to-avoid-them)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: © 2024 [Guiding Tech Media](https://www.guidingtechmedia.com/)   |   [About](/about/index.html)
      |   [Contact](/contact.html)   |   [Advertise](https://mailchi.mp/kdnuggets/media-kit)
    |   [Privacy](/news/privacy-policy.html)   |   [Terms of Service](/terms-of-service.html)
  prefs: []
  type: TYPE_NORMAL
- en: Published on May 9, 2023 by Cornellius Yudha Wijaya
  prefs: []
  type: TYPE_NORMAL
