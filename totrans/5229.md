# SQL 案例研究：帮助创业公司 CEO 管理数据

> 原文：[https://www.kdnuggets.com/2018/09/sql-case-study-helping-startup-ceo-manage-data.html](https://www.kdnuggets.com/2018/09/sql-case-study-helping-startup-ceo-manage-data.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/09/sql-case-study-helping-startup-ceo-manage-data.html?page=2#comments)

**作者 [Ezz El Din Abdullah](https://www.linkedin.com/in/ezzeddinabdullah/)，前数据科学实习生及编程导师**

你可能听说过，如果你懂英语，你可以用 SQL 编写查询。这几乎是正确的，因为 SQL 非常直观，确实像普通英语。

在本教程中，你将学习如何创建表格、插入值、使用和理解一些数据类型、使用 SELECT 语句、更新记录、使用一些聚合函数如 COUNT()、MIN()、SUM()、使用 WHERE 子句、从字符串中删除字符、将字符串转换为数字值、编写子查询、检索顶端和底部候选项、添加列、做循环以及制作直方图。

![Image](../Images/64f8ef0e434222d28b74b283fc6e77f2.png)

不过，如果你在学习时更喜欢视频而非文章，我在 Udemy 发布了这篇文章作为一个实践课程 “[**直观 SQL 数据库案例研究**](https://www.udemy.com/intuitive-sql-databases-case-study)” 。这个课程包括了这里写的所有代码片段，以及在 SQL shell 上以互动方式展示的更多内容。

所有之前的任务都可以通过展示案例研究来完成，以帮助你找到一些指导，以实际的方式处理数据。在阅读这个教程时，最好做的是编写我写的代码，并且请给自己一个机会，让你的双手动起来，特别是如果你是初学者，因为这使你在这门语言中变得出色（实际上对于你学习的几乎所有东西都适用）。如果你知道一些 SQL，希望你也能觉得这篇文章对你有用，并且发现一些其他可以增加你知识的东西。

我正在使用 PostgreSQL，这是一个通用数据库管理系统，但你仍然可以使用 MySQL、Oracle、DB2 等数据库的所有代码。如果你发现某段代码不起作用，请询问谷歌关于你使用的数据库管理系统的语法。

比如说，我们想要这样的表：

| Id | 名字 | 年龄 | 城市 | 工资 |
| --- | --- | --- | --- | --- |
| 1 | Wael | 23 | 开罗 | 800$ |
| 2 | Ragab | 24 | 吉萨 | 900$ |
| 3 | Ali | 24 | 吉萨 | 1500$ |
| 4 | Othman | 25 | 吉萨 | 2000$ |
| 5 | Waleed | 26 | 开罗 | 2100$ |
| 6 | Abdo | 23 | 亚历克斯 | 900$ |
| 7 | Moetaz | 22 | 开罗 | 800$ |

**创建表格：**

我们可以使用以下查询创建这样的表：

```py

CREATE TABLE startup(
id int NOT NULL,
name varchar(10) NOT NULL,
age int CHECK(age > 0),
city varchar(10),
salary varchar(5),
PRIMARY KEY(id));

```

让我们更详细地看看我们写的内容。我们使用 `create()` 创建了一个表。这个表叫做 startup，它包括了一个名为 id 的城市列，其数据类型为整数，并且不允许 NULL 值；稍后我们将解释原因。第二列是 ‘name’，其数据类型为 varchar(10)，这是一个可变长度的字符类型，最大为 10 个字符，即 ‘Ali’ 在内存中占用 3 个字符的空间，而 ‘Othman’ 占用 6 个字符的空间。这个列也可以存储为 char，它是一个固定长度的字符类型为 10，但在这种情况下，‘Ali’ 会在内存中占用 10 个字符的空间，而 ‘Othman’ 也会占用 10 个字符的空间。‘name’ 列也可以存储为 text，这对于存储来说不是很明智，因为 text 类型可以在内存中占用最多 2GB 的数据。在编写查询时，你应该考虑存储，因为你的表可能包含大量数据，检索这些数据可能没有你希望的那么快。

回到查询中，‘name’ 列不能为 NULL（即应该包含一个名字而不是空值）。‘age’ 列包含整数值，并且只允许正数。‘city’ 和 ‘salary’ 分别包含可变长度的字符类型 10 和 5 个字符。最后，‘id’ 列包含唯一值（主键）。这意味着它不能包含重复的值（在我们的例子中是整数）。这种语法可以在定义 id 为 int 时完成，因此可以这样做：‘id int primary key not null’。

注意 SQL 不区分大小写，因此上述查询中的任何关键字都可以使用小写字母，但使用大写字母是一种好的实践。

**检索数据：**

现在，我们可以通过以下方式检索到目前为止的内容：

```py

SELECT *
FROM startup;

```

SELECT 子句是 SQL 中最常用的关键字。这个查询简单地从 startup 表中检索所有数据。正如我们从结果中看到的，它包括我们创建的所有列，且目前没有行数据。

**向表中插入值：**

让我们填充这个表中的第一行：

```py

INSERT INTO startup
VALUES(1, 'Wael', 23, 'Cairo', '800$');

```

现在第一行已经完成：

| Id | name | age | city | salary |
| --- | --- | --- | --- | --- |
| 1 | Wael | 23 | Cairo | 800$ |

让我们重新写一遍之前的查询，看看会发生什么：

```py

INSERT INTO startup
VALUES(1, 'Wael', 23, 'Cairo', '800$');

```

我们看到一个错误提示我们：

```py

ERROR:  duplicate key value violates unique constraint "startup_pkey"
DETAIL:  Key (id)=(1) already exists.

```

那是因为 id 是主键，只能包含唯一值，不能有像 id = 1 这样的重复值。

如果你犯了一个错误，并为年龄输入了负数，例如这样：

```py

INSERT INTO startup
VALUES(1, 'Wael', -23, 'Cairo', '800$');

```

你将会得到一个错误：

```py

ERROR:  new row for relation "startup" violates check constraint "startup_age_check"
DETAIL:  Failing row contains (1, 'Wael', -23, 'Cairo', '800$').

```

那是因为你已经通过 CHECK 子句设置了一个约束，只允许正数。

让我们再做一个查询来形成第二行：

```py

INSERT INTO startup
VALUES(2, 'Ragab', 24, 'Giza', '900$');

```

让我们看看如果我这样做来填充第三行会发生什么：

```py

INSERT INTO startup
VALUES(3, Ali, 24, 'Giza', '1500$');

```

会有一个错误提示我们：

```py

ERROR:  column "ali" does not exist

```

那是因为包含 ‘Ali’ 的 ‘name’ 列没有以字符串形式出现，所以我们需要将其放在单引号之间。

在形成第四行时：

```py

INSERT INTO startup
VALUES(4, 'Othman', 25, 'Giza', '2000$');

```

让我们填充其余的列：

```py

INSERT INTO startup
VALUES(5, 'Waleed', 26, 'Cairo', '2100$');
INSERT INTO startup
VALUES(6, 'Abdo', 23, 'Alex', '900$');
INSERT INTO startup
VALUES(7, 'Moetaz', 22, 'Cairo', '2000$');

```

在最后一行，我犯了一个错误，把薪水填成了 2000$ 而不是 800$。我们可以通过一个更新查询来修复这个问题：

```py

UPDATE startup
SET salary = '800$'
WHERE id = 7;

```

UPDATE 子句被使用，后跟表名，将薪资设置为 800$，条件是我们知道它定义了感兴趣的行，例如 id = 7。

**插入到特定列中：**

让我们尝试添加另一行，包含特定列；例如 id 和薪资值：

```py

INSERT INTO startup(
id, salary)
VALUES(8, '1000$');

```

这将引发一个错误，提示我们：

```py

ERROR:  null value in column "name" violates not-null constraint
DETAIL:  Failing row contains (8, null, null, null, 1000$).

```

这意味着你必须填写‘name’列，因为我们将其定义为 NOT NULL，这意味着我们不能让它为空；它必须有值。

所以，我们可以通过在查询中添加名称列来解决这个问题：

```py

INSERT INTO startup(
id, name, salary)
VALUES(8, 'Mohammed', '1000$');

```

### 更多相关内容

+   [使用 Python 进行自动化机器学习：一个案例研究](https://www.kdnuggets.com/2023/04/automated-machine-learning-python-case-study.html)

+   [12 个建议：从数据分析师到初创公司联合创始人](https://www.kdnuggets.com/2021/12/12-tips-data-analyst-to-co-founder.html)

+   [在 ChatGPT 时代建立深科技初创公司的 10 个障碍](https://www.kdnuggets.com/2023/04/10-hurdles-building-deep-tech-startup-age-chatgpt.html)

+   [KDnuggets 新闻，8月31日：完整的数据科学学习路线图…](https://www.kdnuggets.com/2022/n35.html)

+   [超级学习指南：免费的算法与数据结构电子书](https://www.kdnuggets.com/2022/06/super-study-guide-free-algorithms-data-structures-ebook.html)

+   [完整的数据科学学习路线图](https://www.kdnuggets.com/2022/08/complete-data-science-study-roadmap.html)
