# 树莓派物联网项目的乐趣与利润

> 原文：[https://www.kdnuggets.com/2018/09/raspberry-pi-iot-projects-fun-profit.html](https://www.kdnuggets.com/2018/09/raspberry-pi-iot-projects-fun-profit.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/09/raspberry-pi-iot-projects-fun-profit.html?page=2#comments)

**由 [Rubens Zimbres](Data Scientist) 数据科学家**

软件和硬件之间的前沿领域令人着迷。我们，数据科学家，习惯于为商业目的开发机器学习算法，这些模型的输出通常以利润、成本节约甚至无形的输出，如客户满意度来衡量。当然，我们可以使用 Power BI、Tableau 或者云端工具如 Kibana、Quick Sight 或 Tago 来可视化模型的输出。但是，看到模型的结果在物理世界中展现出来，而不仅仅是在屏幕上，是非常有成就感的。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业道路

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌 IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织的 IT

* * *

我一直在金融和电信领域从事物联网工作。可以很容易地在仪表板上生成关于给定系统故障的警报，比如基站（BTS）的饱和度，这是电信信号传递的节点。现在，想象一下，除了仪表板上的警报之外，我们还自动将电信数据流量重定向到不同的服务点，以便销售点（POS）始终保持连接。这将提升收单商的利润和商家的满意度。我们甚至可以调整现实世界中机器的设置。

在物联网项目中，我们与硬件紧密合作。像销售点（POS）、电力和水表、甘蔗磨机、Libelium 套件（用于农业）、电梯、健康设备等设备发送的遥测数据可以进行分析，以开发预测性维护模型，从而帮助企业降低成本、提高效率，同时优化物流。在这些情况下，可以使用 SIM 卡、Wi-Fi、蓝牙或无线电信号（LoRa）实现连接。

IoT解决方案的一个部分是网关。它在设备（温度、湿度传感器）和云之间进行通信。在我之前的文章中，我解释了如何将您的笔记本电脑转换为IoT设备，提供了如何将数据从设备发送到AWS、从设备到仪表板的端到端解决方案的详细信息（[kdnuggets.com/2018/06/zimbres-iot-aws-machine-learning-dashboard.html](/2018/06/zimbres-iot-aws-machine-learning-dashboard.html)）。

在这篇文章中，我将解释如何在没有图形界面的情况下，通过命令行运行IoT项目，使用Ubuntu Core在Raspberry Pi 3上。更简单的方法是使用Raspbian，它为您的项目提供了图形界面。Raspbian是基于Debian的计算机操作系统。然而，我决定尝试Ubuntu Core，因为安全性在IoT中应该是主要关注点。Ubuntu Core可以用于数字标牌、机器人、无人机和边缘网关。这是一个更具挑战性且更安全的选择。

下图显示了常规Linux系统和Ubuntu Core之间的区别：

![图片](../Images/a5e7f3adc3484ae89e68266b09368abe.png)

Ubuntu Core是一个轻量级系统，具有“安全性为核心”的特点。它由snap构成，“自包含、隔离和受保护的代码块”。即使使用ESC :w !sudo tee %命令在vim中，也很难更改系统中的只读文件。

由于它是一个ARM系统，安装机器学习库非常不同，因为这类系统有一些特定的包，并且很多依赖项没有包含，甚至没有“wget”。所以让我们开始吧。当你购买Raspberry时，它不包括电源（右上角下面）和SD卡（右侧突出）。Model 3 B配有4个USB接口和一个以太网接口。它还包含HDMI、音频和摄像头接口。在这个项目中，我们不会使用鼠标，显示器、以太网线和键盘仅在系统的第一次运行中使用，以设置互联网连接。

![图片](../Images/f27e7c1f698f424d0ea244fcd8ec074f.png)

首先要做的是在SD卡（micro）上安装操作系统。因此，从他们的网站下载Ubuntu Core镜像：[http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-pi3.img.xz](http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-pi3.img.xz)

然后，下载Etcher以将镜像烧录到卡中：[https://etcher.io/](https://etcher.io/)

现在，您需要生成私钥和公钥，这些密钥将被上传到您的Ubuntu One账户（https://login.ubuntu.com/）。

```py

mkdir ~/.ssh
chmod 700 ~/.ssh
ssh-keygen -t rsa -b 4096

```

然后，复制密钥代码并粘贴到您的Ubuntu One账户中：

```py

ssh-rsa ABCDEF1234512345 user@Dell

```

将卡插入Raspberry，并打开电源开关。瞧，系统将启动：

![图片](../Images/ffa8de6308b05378de320279508b99ee.png)

这会在第一次运行时需要几秒钟，然后你将被引导到网络配置。配置 DHCP 以及你的 Wi-Fi 用户名和密码。然后 Ubuntu Core 将提供你应该 ssh 的地址。

以防万一，请确保端口 22（ssh 使用的端口）已打开：

```py

sudo ufw allow 22

```

现在，我们将密钥复制到客户端计算机中的新目录 `.ssh`：

```py

ssh-keygen -R 192.168.15.XXX
mkdir .ssh
cp id_rsa ~/.ssh/id_rsa
cp id_rsa.pub ~/.ssh/id_rsa.pub
cd .ssh

```

我们准备通过 ssh 连接到 Raspberry。运行：

```py

ssh -vvv user@192.168.15.XXX 
Or
ssh -vvv 192.168.15.XXX -l user

```

`-vvv` 命令将提供有关 ssh 连接的详细信息。连接时，窗口将打开，要求输入密码。你已经连接上了，登录信息会发生变化：

`user@localhost:~$`

此时，你可以断开监视器、键盘和以太网线，因为通信将通过 Wi-Fi 完成，整个项目将通过命令行进行。现在让我们安装 snap classic，这是一个我们将安装机器学习库的容器：

```py

sudo snap install classic --edge --devmode
sudo classic

Creating classic environment
Parallel unsquashfs: Using 4 processors
11111 inodes (11975 blocks) to write
[===========================================================/] 11975/11975 100%

(classic)user@localhost:~$ sudo apt update
(classic)user@localhost:~$ sudo apt install snapcraft build-essential git

```

此时，你可以回到我之前的文章中，那里我测量 CPU 温度并发送到 Amazon AWS（kdnuggets.com/2018/06/zimbres-iot-aws-machine-learning-dashboard.html），或者我们可以继续：

```py

export LC_ALL=C
source .bashrc
pip install setuptools
pip install AWSIoTPythonSDK

```

![Image](../Images/a08a59dea7e2e98d470f4cf1e7105b59.png)

在 Ubuntu Core 中，生成和编辑笔记本并不像想象的那样简单。你不能打开 Jupyter、Spyder 或甚至 Notepad 创建新文件，因为没有图形界面。你必须使用命令“touch”来创建文件：

```py

touch AWS_Send_0.py

```

创建新文件后，你可以使用“vim”命令打开并编辑文件，并粘贴代码：

```py

vi AWS_Send_0.py

```

输入 “i” 然后 CTRL+SHIFT+V 代码到: https://github.com/RubensZimbres/Repo-2018/blob/master/CPU%20Temperature%20-%20IoT%20Project/AWS_Send_test.py

之后，输入：

```py

ESC :wq ENTER

```

![Image](../Images/d61fc85b7395624fe3013c0417487225.png)

这会保存文件。记得将 rootCA.pem + *.crt + *private.pem.key + *.public.pem.key 复制到你的 Raspberry 上，以便正确访问 AWS IoT Core。

运行以下命令将 Raspberry 的 CPU 温度发送到 AWS：

```py

python AWS_Send_0.py -e a23312345.iot.us-east-1.amazonaws.com -r rootCA.pem -c 123412345-certificate.pem.crt -k 12345-private.pem.key -id arn:aws:iot:us-east-1:1123112345:thing/CPUDevice -t 'Topic'

```

你将通过 IoT Core 仪表板检查连接：

![Image](../Images/3315e307f68baac8f4eaef3f30b8d64c.png)

重要的是要注意，你正在 Ubuntu classic 环境下运行 Python，在 chroot 中。因此，需要运行“sudo python”以访问 Raspberry 上的 GPIO（通用输入/输出）。

### 更多相关话题

+   [使用 tqdm 实现 Python 中的进度条，趣味与收益并存](https://www.kdnuggets.com/2022/09/progress-bars-python-tqdm-fun-profit.html)

+   [适合初学者的有趣 Python 项目！](https://www.kdnuggets.com/2022/10/beginner-friendly-python-projects-fun.html)

+   [短小有趣的课程，让你快速了解生成性 AI](https://www.kdnuggets.com/short-and-fun-courses-to-get-you-up-to-speed-about-generative-ai)

+   [AIoT 革命：AI 和 IoT 如何改变我们的世界](https://www.kdnuggets.com/2022/07/aiot-revolution-ai-iot-transforming-world.html)

+   [KDnuggets 新闻，7 月 27 日：AIoT 革命：AI 和 IoT 如何……](https://www.kdnuggets.com/2022/n30.html)

+   [简单快速的数据流处理用于机器学习项目](https://www.kdnuggets.com/2022/11/simple-fast-data-streaming-machine-learning-projects.html)
