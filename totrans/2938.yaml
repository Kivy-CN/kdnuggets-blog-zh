- en: Analyzing Tweets with NLP in Minutes with Spark, Optimus and Twint
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2019/05/analyzing-tweets-nlp-spark-optimus-twint.html](https://www.kdnuggets.com/2019/05/analyzing-tweets-nlp-spark-optimus-twint.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [comments](/2019/05/analyzing-tweets-nlp-spark-optimus-twint.html?page=2#comments)![figure-name](../Images/158845770b9097a4963776d6c8df466e.png)'
  prefs: []
  type: TYPE_IMG
- en: Introduction
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: If you are here it’s likely that you are interested in analyzing tweets (or
    something similar) and you have a lot of them, or can get them. One of the most
    annoying things for that is getting a Twitter application, get the authentication
    and all of that. And then if you are using Pandas, there’s no way to scale that.
  prefs: []
  type: TYPE_NORMAL
- en: So what about a system that doesn’t have to authenticate with the Twitter API,
    that can get an unlimited (well almost) amount of tweets and the power to analyze
    them, with NLP and more. Well you’re in for a treat because that’s exactly what
    I’m going to show you right now.
  prefs: []
  type: TYPE_NORMAL
- en: Getting the project and repo
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![figure-name](../Images/0afff08895ea09d9967d745fe9c90c7f.png)[https://matrixds.com/](https://matrixds.com/)'
  prefs: []
  type: TYPE_IMG
- en: 'You can follow everything I’m going to show you very easily. Just forklift
    this MatrixDS project:'
  prefs: []
  type: TYPE_NORMAL
- en: '[**MatrixDS | The Data Project Workbench**'
  prefs: []
  type: TYPE_NORMAL
- en: '*MatrixDS is a place to build, share and manage data projects at any scale.*community.platform.matrixds.com](https://community.platform.matrixds.com/community/project/5ccc9c4b3175e0603c394444/files)'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure-name](../Images/49dc0eb58479ce87d4d33757b68ce13e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Also there’s a GitHub repo with everything:'
  prefs: []
  type: TYPE_NORMAL
- en: '[**FavioVazquez/twitter_optimus_twint**'
  prefs: []
  type: TYPE_NORMAL
- en: '*Analyzing tweets with Twint, Optimus and Apache Spark. - FavioVazquez/twitter_optimus_twint*github.com](https://github.com/FavioVazquez/twitter_optimus_twint)'
  prefs: []
  type: TYPE_NORMAL
- en: With MatrixDS you can actually run the notebooks, get the data and run the analysis
    for free, so if you want to learn more please do it.
  prefs: []
  type: TYPE_NORMAL
- en: Getting Twint and Optimus
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![figure-name](../Images/d49ee9761db3018624e8da2a75534fdd.png)'
  prefs: []
  type: TYPE_IMG
- en: Twint utilizes Twitter’s search operators to let you scrape Tweets from specific
    users, scrape Tweets relating to certain topics, hashtags & trends, or sort out
    *sensitive* information from Tweets like e-mail and phone numbers.
  prefs: []
  type: TYPE_NORMAL
- en: With Optimus, a library I co-created, you can clean your data, prepare it, analyze
    it, create profilers and plots, and perform machine learning and deep learning,
    all in a distributed fashion, because on the back-end we have Spark, TensorFlow,
    Sparkling Water and Keras.
  prefs: []
  type: TYPE_NORMAL
- en: 'So let’s first install everything you need, for that when you are in the Matrix
    project, go to the Analyze Tweets notebook and run (you can also do this from
    the JupyterLab terminal):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'After that, we need to install Twint, for that run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'This will download a scr/ folder so we need to do some config:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Then to import Twint that we need to run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'and finally:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Optimus was installed in the first step, so let’s just start it (this will
    start a Spark cluster for you):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Setup Twint for scrapping tweets
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![figure-name](../Images/c6d42439029e2f5090ec93963e5d389c.png)[https://www.theverge.com/2015/11/3/9661180/twitter-vine-favorite-fav-likes-hearts](https://www.theverge.com/2015/11/3/9661180/twitter-vine-favorite-fav-likes-hearts)'
  prefs: []
  type: TYPE_IMG
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'If you are running this on notebooks you’ll need also to run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Search for data science tweets
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![figure-name](../Images/15d7cd1e1b1b0ee760bfebf1484940b4.png)'
  prefs: []
  type: TYPE_IMG
- en: I’ll start our analysis scrapping tweets about data science, you can change
    this to whatever you want.
  prefs: []
  type: TYPE_NORMAL
- en: 'For doing that we just need to run this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Let me explain this code to you. In the last section when we ran the code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'we started a new Twint configuration. After that we need to pass different
    options we want to scrape tweets. Here’s the full list of configuring options:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'So in this code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: We are setting the search term, them formatting the response (just to check),
    getting only 20 tweets with the Limit =1 (they are in increments of 20) and finally
    making the result compatible with Pandas.
  prefs: []
  type: TYPE_NORMAL
- en: 'Then when we run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'We are launching the search. The result is:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Doesn’t look that good but we got what we wanted. TWEETS!
  prefs: []
  type: TYPE_NORMAL
- en: Saving results into Pandas
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![figure-name](../Images/4b2054e82dc2febdc44394a2b860dfc3.png)'
  prefs: []
  type: TYPE_IMG
- en: Sadly there’s no direct connection between Twint and Spark, but we can do it
    with Pandas and then pass the result to Optimus.
  prefs: []
  type: TYPE_NORMAL
- en: 'I created to simple functions that you can see in the actual project that helps
    you with Pandas and the weird Twint API for this part. So when we run this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'You’ll see:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'These are the columns we have from the query we just did. There’s a lot of
    different things to do with this data, but for this article I’ll only use some
    of them. So to transform the result from Twint to Pandas we run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'and you’ll see this Pandas DF:'
  prefs: []
  type: TYPE_NORMAL
- en: '![figure-name](../Images/16619ee77856d1eb13a972582d73bc74.png)'
  prefs: []
  type: TYPE_IMG
- en: Much better isn’t it?
  prefs: []
  type: TYPE_NORMAL
- en: Sentiment Analysis (the simple way)
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![figure-name](../Images/67b470446e10c47f12b1b93ad24a8739.png)'
  prefs: []
  type: TYPE_IMG
- en: We will run a sentiment analysis on some tweets, using Optimus and TextBlob
    a library for NLP. The first thing we need to do is clean this tweets, for that
    Optimus is the best choice.
  prefs: []
  type: TYPE_NORMAL
- en: 'For saving the data as an Optimus (Spark) DF we need to run:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'We’ll just remove accents and special characters with Optimus (for a real work
    scenario you need to do much more than this like removing links, images, and stopwords),
    for that:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'Then we need to collect this tweets from Spark to get them in a Python list,
    for that:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: 'Then to analyze the sentiment of these tweets we will use TextBlob *sentiment*
    function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: 'That will give us:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: Neutral
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: Neutral
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: Positive
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: Neutral
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: Negative
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: Positive
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: Neutral
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: Positive
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: Negative
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: Positive
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: Neutral
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: Neutral.
  prefs: []
  type: TYPE_NORMAL
- en: And so on.
  prefs: []
  type: TYPE_NORMAL
- en: Well that was extremely easy, but it won’t scale, because in the end we are
    collecting the data from Spark so the driver’s RAM is the limit. Let’s do it a
    little better.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Analyzing Scientific Articles with fine-tuned SciBERT NER Model and Neo4j](https://www.kdnuggets.com/2021/12/analyzing-scientific-articles-finetuned-scibert-ner-model-neo4j.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Data Analytics: The Four Approaches to Analyzing Data and How To…](https://www.kdnuggets.com/2023/04/data-analytics-four-approaches-analyzing-data-effectively.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Analyzing the Probability of Future Success with Intelligence…](https://www.kdnuggets.com/2022/02/analyzing-probability-future-success-intelligence-node-attributes-evolution-model.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Analyzing Diversity & Inclusion with SQL](https://www.kdnuggets.com/2022/11/analyzing-diversity-inclusion-sql.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Master the Power of Data Analytics: The Four Approaches to Analyzing Data](https://www.kdnuggets.com/2023/03/master-power-data-analytics-four-approaches-analyzing-data.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Build AI Chatbot in 5 Minutes with Hugging Face and Gradio](https://www.kdnuggets.com/2023/06/build-ai-chatbot-5-minutes-hugging-face-gradio.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
