# 为什么数据科学家和数据工程师需要理解云中的虚拟化

> 原文：[https://www.kdnuggets.com/2017/01/data-scientist-engineer-understand-virtualization-cloud.html/2](https://www.kdnuggets.com/2017/01/data-scientist-engineer-understand-virtualization-cloud.html/2)

**隔离与安全**

将一个团队的工作与另一个团队的工作分开很重要，以便他们能够达到业务所需的服务水平协议（SLA）。在虚拟化领域，通过将服务器和虚拟机分组到各自的资源池中来实现隔离，从而限制对外部工作负载的影响。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业的快车道。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织IT需求

* * *

例如：某家医疗公司不同的团队在进行特定的分析任务时使用Hortonworks集群，同时在同一基础设施上运行MapR集群以用于其他分析目的。

在专用虚拟机中部署的分布式防火墙可以排除对某些集群和数据的访问，防止其他位于同一基础设施上的访问。由于这些分布式防火墙位于虚拟机中，因此它们可以随工作负载一起移动，不受物理边界的限制。

**性能**

数据科学家需要在时间限制内找到他们查询的答案。执行这些工作的系统的性能对这个群体至关重要。

为了测试数据科学程序在虚拟机上的性能，VMware工程师在Spark集群上执行了一组机器学习（ML）算法，其中集群中的每个节点都位于虚拟机中。这些测试也在没有虚拟化的相同服务器上执行，并比较了测试结果。以下是结果的一个示例。

![虚拟化与云计算](../Images/d0071cfa0df0c60b8ad8d66ab1ce1e4e.png)

这些类型的系统最初使用大量的示例数据来训练模型，以便模型能够识别数据中的某些模式。在上述设置中，这些示例集的范围为7亿到21亿条记录。每个示例具有40个特征或数据记录的不同方面（例如交易金额和信用卡购买的到期日期）。

模型在经过大量示例训练后，会被提供一个新的事务实例。这可能是信用卡交易或客户申请新信用卡的请求等。分析模型会被要求将该特定事务分类为良好或欺诈交易。使用统计技术，模型会对这个问题给出二元答案。这种分析称为二元分类。还测试了几种其他类型的机器学习算法。

结果显示，这些在 vSphere 虚拟机上运行的机器学习算法表现出良好的性能，有时甚至比同等的裸机实现的测试代码表现更佳。有关这些工作负载及其结果的完整技术描述见于 [http://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/bigdata-perf-vsphere6.pdf](http://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/bigdata-perf-vsphere6.pdf)

**云部署的虚拟化选择**

在数据科学家/数据工程师以及基础设施管理团队开始在云中部署分析基础设施软件时，可以选择的技术选项在这里进行了强调。

1.  正确配置虚拟机的规格

1.  将虚拟机放置到最合适的主机服务器上

1.  配置虚拟机内不同的软件角色

1.  将计算资源组分配给不同的团队

1.  快速供应

1.  在基础设施层面监控应用程序

**虚拟机的规格**

在创建虚拟机时，你选择内存的数量、虚拟 CPU 的数量、存储布局和网络配置——如果需要，你可以稍后进行更改。这些都是软件构造，而不是硬件构造，因此更容易改变。在大数据实践中，我们已经看到，运行 Hadoop/Spark 类型工作负载的高端虚拟机的最低值为 4 个 vCPUs，通用的经验法则是 16 个 vCPUs。虽然能利用超过 16 个 vCPUs 的应用较为稀少，但仍然是可行的。例如，那些高度并行化的代码中包含大量并发线程的情况。

虚拟机所需的内存量可以与物理内存一样大，尽管我们看到当代工作负载的配置内存为 256Gb 或 512Gb。经典 Hadoop 工作节点的基本操作可以适应许多工作负载的 128Gb 内存限制。这些尺寸将由应用平台架构师决定，但对最终用户、数据科学家和数据工程师而言，了解任何虚拟机适用的限制也是很有价值的。鉴于硬件容量，这些数字可以在短时间内扩展，以查看在新条件下工作是否更快完成。

**将虚拟机放置到服务器上**

在一些云环境中，你可以选择将虚拟机适配到主机服务器和包含它们的机架上；而在其他环境中，你则不能。在提供这种选择的地方，你可以做出优化应用性能的决策。例如，在私有云中，你可以选择不让服务器的物理内存或物理 CPU 资源被过多的虚拟机或过大的虚拟机资源配置所超负荷。避免这种物理资源的过度承诺通常有助于那些资源密集型应用的性能，比如数据分析应用。

相关的问题是每台物理主机服务器上应该有多少个虚拟机。在我们进行虚拟化测试时，每台服务器上两个到四个适当大小的虚拟机可以作为起点获得良好的结果——随着对平台和工作负载经验的增长，这个数字可以增加。在你能看到服务器硬件类型和配置的情况下，应该尊重 NUMA 边界来调整虚拟机的大小，以便从机器上获得最佳性能。上述虚拟化最佳实践文档中提供了这个领域的详细技术建议。

**虚拟机中的不同软件角色**

在大多数现代分布式数据平台中，软件进程角色被分为“主节点”和“工作节点”。控制进程运行在前者上，而驱动个别工作部分的执行器则在工作节点中运行。你为这些不同角色中的每一个创建一个模板虚拟机（一个“黄金主机”），然后根据你需要的角色实例数量复制或克隆该虚拟机。可能有一个选项可以将分析软件组件本身安装到模板虚拟机中，从而在克隆或集群成员实例化时避免重复安装。这些节点在集群的生命周期内可以通过供应商的管理工具随时进行新的软件服务的自定义。同样，当我们需要更少的工作节点来执行分析工作时，我们也可以以相同的方式将某些角色从集群中撤销。

**将计算资源组分配给不同团队**

虚拟化方法的一个固有价值是硬件资源的汇聚，使得总CPU/内存的部分可以被划分并专用于特定的目的和团队。虚拟化包括“资源池”的概念，能够保留一定的计算和内存能力（跨多个机器）。一个部门的一组虚拟机存在于其资源池的受限空间内，而另一个部门则存在于另一个资源池中。这些资源池可能在物理上相邻。当需要时，可以动态地将更多计算资源分配给其中的一个或另一个。这让拥有来自其团队的竞争请求的数据科学部门经理对资源分配有了更多控制权，这取决于每个团队项目工作的需求和相对重要性。

**快速配置**

为数据科学家的使用创建一组虚拟机的速度显然比提供新的物理机器要快得多，从而提高了生产工作的时间效率。进一步的灵活性，如在虚拟机集群中进行扩展和收缩则更加重要。在我们见过的大型分析应用部署中，初始阶段会迅速扩展，从20个节点（虚拟机）增加到单个集群中的300多个节点。随着时间推移和新工作负载的出现，这些大型基础设施可能会收缩，以便在相同的硬件集合中适应新的工作负载，尽管这些工作负载会被划分到不同的资源池中。这种灵活性是虚拟化的一个功能。为各个团队划定的严格所有权边界在这里被打破了。

**基础设施级别的监控应用**

数据科学家/工程师希望了解查询为何需要这么长时间才能完成。我们对这一现象在各种类型数据库的历史中非常熟悉。SQL引擎是当前大数据基础设施上最流行的层之一——事实上，几乎每个供应商都有一个。不断需要查找那些占用系统资源的低效或结构不良的查询。虚拟机和资源池最初提供了对这些不良查询的隔离。但进一步说，如果云提供商允许的话，能够在基础设施级别查看代码的效果，为追踪其效果和优化执行时间提供了宝贵的数据。

**云基础设施在变化中**

在我们的开场白中，我们提到了公共云、私有云和混合云。对于在这些类型的云上使用通用基础设施和管理工具存在广泛的兴趣。当这些基础元素对于私有云和公共云是相同的时，应用程序可以根据业务需求在任一环境中运行。实际上，应用程序可以有序地从一个环境迁移到另一个环境，而无需更改。对于数据科学家/工程师来说，界限将会模糊，因为特定的分析工作项目可能最初是在公共云中进行实验，随着其成熟，迁移到私有云以优化其性能。相反的迁移也可能发生。2016年底发布的公告表明，完整的 VMware 软件定义数据中心产品组合将作为服务在 AWS 上运行。这种跨私有云和公共云的通用基础设施扩展了数据科学家/数据工程师的灵活性和选择。VMware Cloud on AWS 上的分析工作负载现在可以在本地方式中访问 AWS 的 S3 存储，在一个共同的数据中心内，从而降低数据访问的延迟。

在本文中，我们已经了解了对于数据科学家和数据工程师来说，理解虚拟化结构的重要性，因为他们将分析部署到各种云平台上。虚拟化是这些数据工作者需要了解的关键启用层，以便从中获得最佳结果。

**大数据/Hadoop 在 VMware vSphere 上 - 参考材料**

部署指南：

1.  虚拟化 Hadoop - 部署指南

    [www.vmware.com/bde](http://www.vmware.com/bde)  在资源 -> 入门指南，或更直接地：

    [www.vmware.com/files/pdf/products/vsphere/Hadoop-Deployment-Guide-USLET.pdf](http://www.vmware.com/files/pdf/products/vsphere/Hadoop-Deployment-Guide-USLET.pdf)

1.  在 vSphere 上使用 Isilon 存储部署虚拟化 Cloudera CDH - EMC/Isilon 的技术指南

    [hsk-cdh.readthedocs.org/en/latest/hsk.html#deploy-a-cloudera-hadoop-cluster](https://urldefense.proofpoint.com/v2/url?u=http-3A__hsk-2Dcdh.readthedocs.org_en_latest_hsk.html-23deploy-2Da-2Dcloudera-2Dhadoop-2Dcluster&d=AAMFAw&c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&r=_MJE4XiBiWsXd4egNduIpJhdnAwm4uba3wOzdrllJfU&m=5Irnh2t-m180pvuGRKqlxlbI3nC0TBh9YVu69qvhCH8&s=w-l1c5EVQDxjuCfCcf478iD7ICQX2fFmaFhYkcecjdI&e=)

    或在 [community.emc.com/docs/DOC-26892](https://community.emc.com/docs/DOC-26892) 查找最新版本

1.  在 vSphere 上使用 Isilon 存储部署虚拟化 Hortonworks HDP - EMC/Isilon 的技术指南

    [hsk-hwx.readthedocs.org/en/latest/hsk.html#deploy-a-hortonworks-hadoop-cluster-with-isilon-for-hdfs](https://urldefense.proofpoint.com/v2/url?u=http-3A__hsk-2Dhwx.readthedocs.org_en_latest_hsk.html-23deploy-2Da-2Dhortonworks-2Dhadoop-2Dcluster-2Dwith-2Disilon-2Dfor-2Dhdfs&d=AAMFAw&c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&r=_MJE4XiBiWsXd4egNduIpJhdnAwm4uba3wOzdrllJfU&m=5Irnh2t-m180pvuGRKqlxlbI3nC0TBh9YVu69qvhCH8&s=1L55fgiFfIKAT0ENwlHauUOVW9PdRmVlAPxAkP2gtQ8&e=)

    或参见 [community.emc.com/docs/DOC-26892](https://community.emc.com/docs/DOC-26892)

参考架构：

1.  Cloudera 参考架构 - Isilon 版本

    [www.cloudera.com/content/cloudera/en/documentation/reference-architecture/latest/PDF/cloudera_ref_arch_vmware_isilon.pdf](https://www.cloudera.com/content/cloudera/en/documentation/reference-architecture/latest/PDF/cloudera_ref_arch_vmware_isilon.pdf)

1.  Cloudera 参考架构 – 直接附加存储版本

    [www.cloudera.com/content/cloudera/en/documentation/reference-architecture/latest/PDF/cloudera_ref_arch_vmware_local_storage.pdf](https://www.cloudera.com/content/cloudera/en/documentation/reference-architecture/latest/PDF/cloudera_ref_arch_vmware_local_storage.pdf)

1.  Cisco UCS 和 EMC Isilon 的大数据：构建一个 60 节点 Hadoop 集群（使用 Cloudera）

    [www.cisco.com/c/dam/en/us/td/docs/unified_computing/ucs/UCS_CVDs/Cisco_UCS_and_EMC_Isilon-with-Cloudera_CDH5.pdf](http://www.cisco.com/c/dam/en/us/td/docs/unified_computing/ucs/UCS_CVDs/Cisco_UCS_and_EMC_Isilon-with-Cloudera_CDH5.pdf)

1.  在 VMware vSphere 上部署 Hortonworks 数据平台（HDP） – 技术参考架构

    [hortonworks.com/wp-content/uploads/2014/02/1514.Deploying-Hortonworks-Data-Platform-VMware-vSphere-0402161.pdf](https://urldefense.proofpoint.com/v2/url?u=http-3A__hortonworks.com_wp-2Dcontent_uploads_2014_02_1514.Deploying-2DHortonworks-2DData-2DPlatform-2DVMware-2DvSphere-2D0402161.pdf&d=CwMF-g&c=Sqcl0Ez6M0X8aeM67LKIiDJAXVeAw-YihVMNtXt-uEs&r=SOgN0aaEng7AKOMYtRIpCw&m=_FQ0HHBVlPkrhJkDTfzWeOkcHV1SvJpLfwXVS_UGFpw&s=Ecnqao9QBEHPgmRev3jWEixynkATJflvkbwRlVxRrCc&e=)

案例研究：

1.  Adobe 在 VMware vSphere 上部署 Hadoop-as-a-Service

    [www.vmware.com/files/pdf/products/vsphere/VMware-vSphere-Adobe-Deploys-HAAS-CS.pdf](http://www.vmware.com/files/pdf/products/vsphere/VMware-vSphere-Adobe-Deploys-HAAS-CS.pdf)

1.  在大规模基础设施中虚拟化 Hadoop – EMC 的技术白皮书

    [community.emc.com/docs/DOC-41473](https://community.emc.com/docs/DOC-41473)

1.  Skyscape 云服务在 vSphere 上部署 Hadoop

    [www.vmware.com/files/pdf/products/vsphere/VMware-vSphere-Skyscape-Cloud-Services-Deploys-Hadoop-Cloud.pdf](http://www.vmware.com/files/pdf/products/vsphere/VMware-vSphere-Skyscape-Cloud-Services-Deploys-Hadoop-Cloud.pdf)

1.  在 VMware IT 中虚拟化大数据 – 从小规模开始

    [blogs.vmware.com/vsphere/2015/11/virtualizing-big-data-at-vmware-it-starting-out-at-small-scale.html](https://blogs.vmware.com/vsphere/2015/11/virtualizing-big-data-at-vmware-it-starting-out-at-small-scale.html)

性能：

1.  vSphere® 6 上的大数据性能 – 优化虚拟化大数据应用的最佳实践（2016）

    [www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/bigdata-perf-vsphere6.pdf](http://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/bigdata-perf-vsphere6.pdf)

1.  VMware vSphere® 6 上高性能服务器的虚拟化 Hadoop 性能（2015）

    [www.vmware.com/resources/techresources/10452](http://www.vmware.com/resources/techresources/10452)

1.  VMware vSphere 5.1 上的虚拟化 Hadoop 性能

    [www.vmware.com/resources/techresources/10360](http://www.vmware.com/resources/techresources/10360)

    上述两个技术文档中有一些非常有用的最佳实践。

1.  vSphere 5 上虚拟化 Hadoop 性能的基准测试案例研究

    [www.vmware.com/resources/techresources/10222](http://www.vmware.com/resources/techresources/10222)

1.  事务处理委员会 – TPCx-HS 基准测试结果（Cloudera 在 VMware 上的性能，由 Dell 提交）

    [www.tpc.org/tpcx-hs/results/tpcxhs_results.asp](http://www.tpc.org/tpcx-hs/results/tpcxhs_results.asp)

1.  ESG 实验室评审：配备 EMC Isilon 的 VCE vBlock 系统用于企业 Hadoop

    [www.esg-global.com/lab-reports/esg-lab-review-vce-vblock-systems-with-emc-isilon-for-enterprise-hadoop/](http://www.esg-global.com/lab-reports/esg-lab-review-vce-vblock-systems-with-emc-isilon-for-enterprise-hadoop/)

    [labs.vmware.com/flings/big-data-extensions-for-vsphere-standard-edition](https://labs.vmware.com/flings/big-data-extensions-for-vsphere-standard-edition)

其他 vSphere 功能与大数据：

1.  使用 VMware vSphere 5 故障容错保护 Hadoop

    [www.vmware.com/files/pdf/techpaper/VMware-vSphere-Hadoop-FT.pdf](http://www.vmware.com/files/pdf/techpaper/VMware-vSphere-Hadoop-FT.pdf)

1.  面向弹性大象 – 为云端启用 Hadoop

    [labs.vmware.com/vmtj/toward-an-elastic-elephant-enabling-hadoop-for-the-cloud](http://labs.vmware.com/vmtj/toward-an-elastic-elephant-enabling-hadoop-for-the-cloud)

1.  Apache Flume 和 Apache Scoop 数据摄取到 VMware vSphere 上的 Apache Hadoop 集群

    [www.vmware.com/files/pdf/products/vsphere/VMware-vSphere-Data-Ingestion-Solution-Guide.pdf](https://www.vmware.com/files/pdf/products/vsphere/VMware-vSphere-Data-Ingestion-Solution-Guide.pdf)

1.  Hadoop 虚拟化扩展（HVE）：

    [www.vmware.com/files/pdf/Hadoop-Virtualization-Extensions-on-VMware-vSphere-5.pdf](http://www.vmware.com/files/pdf/Hadoop-Virtualization-Extensions-on-VMware-vSphere-5.pdf)

VMware 首席技术官和 Cloudera 首席技术官访谈视频及 Adobe 参考视频：

[hwww.youtube.com/playlist?list=PL9MeVsU0uG662xAjTB8XSD83GXSDuDzuk](https://www.youtube.com/playlist?list=PL9MeVsU0uG662xAjTB8XSD83GXSDuDzuk)

**个人简介：贾斯廷·穆雷**（[**@johjustinmurray**](https://twitter.com/johjustinmurray)）是VMware在加州帕洛阿尔托的技术营销架构师。自2007年起，他在VMware担任过多种技术和联盟角色。贾斯廷与VMware的客户和现场工程师合作，制定虚拟化技术在大数据领域的使用指南和最佳实践。他在各种会议上就这些主题发表过演讲，并且已[发表了博客](http://blogs.vmware.com/vsphere)、白皮书及其他相关材料。

**相关：**

+   [云计算关键术语解释](/2016/06/cloud-computing-key-terms-explained.html)

+   [机器学习趋势与人工智能的未来](/2016/06/machine-learning-trends-future-ai.html)

+   [介绍云托管的深度学习模型](/2016/07/algorithmia-cloud-hosted-deep-learning-models.html)

### 更多相关话题

+   [24本最佳（及免费）书籍以理解机器学习](https://www.kdnuggets.com/2020/03/24-best-free-books-understand-machine-learning.html)

+   [图表：理解数据的自然方式](https://www.kdnuggets.com/2022/10/manning-graphs-natural-way-understand-data.html)

+   [使用SQL理解数据科学职业趋势](https://www.kdnuggets.com/using-sql-to-understand-data-science-career-trends)

+   [挑选示例以理解机器学习模型](https://www.kdnuggets.com/2022/11/picking-examples-understand-machine-learning-model.html)

+   [11个AWS云和数据迁移的最佳实践](https://www.kdnuggets.com/2023/04/11-best-practices-cloud-data-migration-aws-cloud.html)

+   [云存储采纳是商业当下的需求](https://www.kdnuggets.com/2022/02/cloud-storage-adoption-need-hour-business.html)
