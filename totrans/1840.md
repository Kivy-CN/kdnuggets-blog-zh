# Jupyter Notebook 数据科学最佳实践

> 原文：[https://www.kdnuggets.com/2016/10/jupyter-notebook-best-practices-data-science.html](https://www.kdnuggets.com/2016/10/jupyter-notebook-best-practices-data-science.html)

**作者：乔纳森·惠特莫，硅谷数据科学。**

[Jupyter Notebook](http://www.jupyter.org/) 是一个极好的工具，可以用多种方式使用。由于其灵活性，团队设置中处理数据科学问题时可能会具有挑战性。我们在这里展示了一些 SVDS 实施的最佳实践，这些实践在与团队和客户一起使用笔记本后制定出来的——这可能也对你的数据科学团队有所帮助。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业轨道。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌 IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织 IT

* * *

![Jupyter](../Images/f79919b082e4195113c37e791c8cd699.png)

保持工作的版本控制，并在不互相干扰的情况下维护共享空间，一直是一个棘手的问题。我们在这里展示了我们当前的系统视角，这对我们有用——也可能对你的数据科学团队有帮助。

### 总体思考过程

数据科学项目中有两种笔记本：实验室笔记本和交付笔记本。首先，每本笔记本都有组织性的方法。

**实验室（或开发）笔记本：**

让传统的纸质实验室笔记本作为你的指南：

+   每本笔记本都保留了分析过程中的历史（和日期）记录。

+   笔记本不仅仅是实验和开发的地方。

+   每本笔记本由一个作者控制：团队中的数据科学家（以首字母标记）。

+   笔记本可以在过长时进行拆分（想象翻页）。

+   笔记本可以按主题拆分，如果这样做是有意义的。

**交付（或报告）笔记本**

+   它们是实验室笔记本的完全打磨版本。

+   它们存储分析的最终输出。

+   笔记本由整个数据科学团队控制，而不是由任何一个人控制。

### 版本控制

这是我们如何使用 git 和 GitHub 的一个例子。Github 的一个美妙新功能是他们现在可以自动在仓库中渲染 Jupyter Notebooks。

在进行分析时，我们会对代码和数据科学输出进行内部审查。我们使用传统的拉取请求方法进行审查。然而，在发出拉取请求时，查看更新后的 `.ipynb` 文件之间的差异时，这些更新不会以有用的方式呈现。人们倾向于推荐的一个解决方案是提交转换后的 `.py` 文件。这对于查看输入代码的差异（同时省略输出）很有帮助，并且对于查看更改很有用。然而，在审查数据科学工作时，看到输出本身也是至关重要的。

例如，一位数据科学家可能会对以下初始图进行反馈，并希望看到改进：

[![not-great](../Images/00cf9c2843f638280f29a35ea9441241.png)](http://www.svds.com/wp-content/uploads/2015/09/not-great.png)

[![better-fit](../Images/4be609a94bc651a8b98b7b2a349c38d7.png)](http://www.svds.com/wp-content/uploads/2015/09/better-fit.png)

顶部的图形与数据的拟合较差，而底部的图形则较好。能够在团队成员的工作拉取请求审查中直接查看这些图形至关重要。

在 [这里](https://github.com/jbwhit/OSCON-2015/commit/6750b962606db27f69162b802b5de4f84ac916d5) 查看 Github 提交示例。

请注意，有三种方法可以查看更新后的图形（选项位于底部）。

**保存后钩子**

我们与许多不同的客户合作。他们的一些版本控制环境缺乏良好的渲染能力。虽然可以在企业防火墙后部署 nbviewer 的实例，但有时这仍然不是一个选项。如果你遇到这种情况，并且想保持上述代码审查的框架，我们有一个解决方法。在这些情况下，我们在每次提交中提交每个笔记本的 `.ipynb`、`.py` 和 `.html` 文件。每次保存笔记本时，可以通过编辑 jupyter 配置文件并添加保存后钩子，简单且自动地创建 `.py` 和 `.html` 文件。

默认的 jupyter 配置文件位于：

`~/.jupyter/jupyter_notebook_config.py`

如果没有这个文件，请运行：

`jupyter notebook --generate-config`

创建此文件，并添加以下文本：

运行 `jupyter notebook`，你就准备好了！

如果你希望仅在使用特定“配置文件”时保存 `.html` 和 `.py` 文件，这会有些复杂，因为 Jupyter 现在不再使用配置文件的概念。

首先通过 bash 命令行创建一个新的配置文件名：

这将创建一个新的目录和文件 `~/.jupyter_profile2/jupyter_notebook_config.py`。然后运行 `jupyter notebook` 并按正常方式工作。要切换回默认配置文件，你需要将（手动、shell 函数或你的 `.bashrc`）设置回：

`export JUPYTER_CONFIG_DIR=~/.jupyter`。

现在，每次保存笔记本时，都会更新相同名称的 `.py` 和 `.html` 文件。将这些文件添加到你的提交和拉取请求中，你将从每种文件格式中受益。

### 将所有内容整合起来

这是一个进行中的项目的目录结构，其中包含一些关于文件命名的明确规则。

**示例目录结构**

[PRE0]   - 开发 # (实验记录风格)   + [ISO 8601 日期]-[DS-缩写]-[2-4 字描述].ipynb   + 2015-06-28-jw-initial-data-clean.html   + 2015-06-28-jw-initial-data-clean.ipynb   + 2015-06-28-jw-initial-data-clean.py   + 2015-07-02-jw-coal-productivity-factors.html   + 2015-07-02-jw-coal-productivity-factors.ipynb   + 2015-07-02-jw-coal-productivity-factors.py  - 交付 # (最终分析、代码、演示等)   + Coal-mine-productivity.ipynb   + Coal-mine-productivity.html   + Coal-mine-productivity.py  - 图表   + 2015-07-16-jw-production-vs-hours-worked.png  - src # (模块和脚本)   + init.py   + load_coal_data.py   + figures # (图表和绘图)   + production-vs-number-employees.png   + production-vs-hours-worked.png  - 数据 (备份，独立于版本控制)   + coal_prod_cleaned.csv [PRE1]`

**好处**

这种工作流程和结构有许多好处。首要且主要的好处是它们创建了分析进展的历史记录。它也容易被搜索：

+   按日期 (`ls 2015-06*.ipynb`)

+   作者 (`ls 2015*-jw-*.ipynb`)

+   按主题 (`ls *-coal-*.ipynb`)

其次，在拉取请求时，拥有 .py 文件可以让人快速查看哪些输入文本发生了变化，而拥有 .html 文件则可以让人快速查看哪些输出发生了变化。将这作为一个无痛的保存后钩子，使得这种工作流程变得轻松自如。

最后，这种方法还有许多较小的优点，数量太多无法一一列举——如果你有问题或对模型的进一步改进有建议，请 [与我们联系](http://www.svds.com/contact/)。有关此主题的更多信息，请查看 O'Reilly Media 的 [相关视频](http://shop.oreilly.com/product/0636920044260.do)。

**简历: [Jonathan Whitmore](https://www.linkedin.com/in/jonathanbwhitmore/)** 是 SVDS 的数据科学家。在进行天体物理学的博士后研究后，Jonathan 成为计算和天文学领域备受追捧的演讲者。他对将机器学习和统计技术应用于工业问题充满热情，并且开发了新颖的数据分析技术。

[原文](https://www.svds.com/tbt-jupyter-notebook-best-practices-data-science/?utm_source=kdnuggets&utm_medium=referral)。经许可转载。

**相关：**

+   [Python 中的统计数据分析](/2016/07/statistical-data-analysis-python.html)

+   [Jupyter+Spark+Mesos: 一个“有观点”的 Docker 镜像](/2016/05/ibm-jupyter-spark-mesos-docker.html)

+   [数据科学入门 – Python](/2016/07/getting-started-data-science-python.html)

### 更多关于这个主题

+   [Jupyter Notebook 上的数据科学项目的 5 个免费模板](https://www.kdnuggets.com/5-free-templates-for-data-science-projects-on-jupyter-notebook)

+   [数据科学家必备的 10 个 Jupyter Notebook 小贴士和技巧](https://www.kdnuggets.com/2023/06/10-jupyter-notebook-tips-tricks-data-scientists.html)

+   [金融中的 Python：在 Jupyter Notebook 内实时数据流](https://www.kdnuggets.com/python-in-finance-real-time-data-streaming-within-jupyter-notebook)

+   [如何在 Jupyter Notebook 上设置 Julia](https://www.kdnuggets.com/2022/11/setup-julia-jupyter-notebook.html)

+   [Jupyter Notebook 魔法方法速查表](https://www.kdnuggets.com/jupyter-notebook-magic-methods-cheat-sheet)

+   [Mercury 概述：创建数据科学组合及……](https://www.kdnuggets.com/2022/05/overview-mercury-creating-data-science-portfolio-notebook-based-webapps.html)
