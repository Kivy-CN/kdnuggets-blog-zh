- en: 'Remote Data Science: How to Send R and Python Execution to SQL Server from
    Jupyter Notebooks'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2018/07/r-python-execution-sql-server-jupyter.html](https://www.kdnuggets.com/2018/07/r-python-execution-sql-server-jupyter.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [comments](#comments)'
  prefs: []
  type: TYPE_IMG
- en: '**By [Kyle Weller](https://www.linkedin.com/in/ai-is-the-future/)**'
  prefs: []
  type: TYPE_NORMAL
- en: '![R and Python in SQL Server](../Images/cf5ff7d619b8bcc49c2e7183cf96d9b2.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Introduction**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Did you know that you can execute R and Python code remotely in SQL Server from
    Jupyter Notebooks or any IDE? [Machine Learning Services](https://aka.ms/SQLMLOverview) in
    SQL Server eliminates the need to move data around. Instead of transferring large
    and sensitive data over the network or losing accuracy on ML training with sample
    csv files, you can have your R/Python code execute within your database. You can
    work in Jupyter Notebooks, RStudio, PyCharm, VSCode, Visual Studio, wherever you
    want, and then send function execution to SQL Server bringing intelligence to
    where your data lives.
  prefs: []
  type: TYPE_NORMAL
- en: 'This tutorial will show you an example of how you can send your python code
    from Jupyter notebooks to execute within SQL Server. The same principles apply
    to R and any other IDE as well. If you prefer to learn through videos, this tutorial
    is also published on YouTube here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Microsoft Cloud](../Images/60ebebfdb8a421779f5c0c9d33354ff3.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Environment Setup Prerequisites**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Install ML Services on SQL Server**'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In order for R or Python to execute within SQL, you first need the Machine Learning
    Services feature installed and configured. See this [how-to guide](https://aka.ms/SetupMLServices).
  prefs: []
  type: TYPE_NORMAL
- en: '**Install RevoscalePy via Microsoft''s Python Client**'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In order to send Python execution to SQL from Jupyter Notebooks, you need to
    use Microsoft's RevoscalePy package. To get RevoscalePy, download and install
    Microsoft's ML Services Python Client. [Documentation Page](https://docs.microsoft.com/en-us/machine-learning-server/install/python-libraries-interpreter) or [Direct
    Download Link](https://aka.ms/mls93-py) (for Windows).
  prefs: []
  type: TYPE_NORMAL
- en: 'After downloading, open powershell as an administrator and navigate to the
    download folder. Start the installation with this command (feel free to customize
    the install folder):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Be patient while the installation can take a little while. Once installed navigate
    to the new path you installed in. Let''s make an empty folder and open Jupyter
    Notebooks:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Create a new notebook with the Python 3 interpreter:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Python 3 Notebook](../Images/278231a10d909a743eff4e148e7ba193.png)'
  prefs: []
  type: TYPE_IMG
- en: To test if everything is setup, import revoscalepy in the first cell and execute.
    If there are no error messages you are ready to move forward.
  prefs: []
  type: TYPE_NORMAL
- en: '![Import revoscalepy](../Images/ca6dd77d9b37907e0928e6ff275dce07.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Database Setup (Required for this tutorial only)**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For the rest of the tutorial you can clone [this Jupyter Notebook from Github](https://aka.ms/RemoteExecJupyter) if
    you don't want to copy paste all of the code. This database setup is a one time
    step to ensure you have the same data as this tutorial. You don't need to perform
    any of these setup steps to use your own data.
  prefs: []
  type: TYPE_NORMAL
- en: '**Create a database**'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Modify the connection string for your server and use pyodbc to create a new
    database.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Import Iris sample from SkLearn**'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Iris is a popular dataset for beginner data science tutorials. It is included
    by default in sklearn package.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '**Use RecoscalePy APIs to create a table and load the Iris data**'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '*(You can also do this with pyodbc, sqlalchemy or other packages)*'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '**Define a Function to Send to SQL Server**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Write any python code you want to execute in SQL. In this example we are creating
    a scatter matrix on the iris dataset and only returning the bytestream of the
    .png back to Jupyter Notebooks to render on our client.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '**Send execution to SQL**'
  prefs: []
  type: TYPE_NORMAL
- en: Now that we are finally set up, check out how easy sending remote execution
    really is! First, import revoscalepy. Create a sql_compute_context, and then send
    the execution of any function seamlessly to SQL Server with RxExec. No raw data
    had to be transferred from SQL to the Jupyter Notebook. All computation happened
    within the database and only the image file was returned to be displayed.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: While this example is trivial with the Iris dataset, imagine the additional
    scale, performance, and security capabilities that you now unlocked. You can use
    any of the latest open source R/Python packages to build Deep Learning and AI
    applications on large amounts of data in SQL Server. We also offer [leading edge](https://cloudblogs.microsoft.com/sqlserver/2016/10/11/1000000-predictions-per-second/),
    high-performance algorithms in Microsoft's [RevoScaleR ](https://docs.microsoft.com/en-us/machine-learning-server/r-reference/revoscaler/revoscaler)and [RevoScalePy ](https://docs.microsoft.com/en-us/sql/advanced-analytics/python/what-is-revoscalepy?view=sql-server-2017)APIs.
    Using these with the latest innovations in the open source world allows you to
    bring unparalleled selection, performance, and scale to your applications.
  prefs: []
  type: TYPE_NORMAL
- en: '**Learn More**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Check out [SQL Machine Learning Services Documentation](https://aka.ms/SQLMLDocs) to
    learn how you can easily deploy your R/Python code with SQL stored procedures
    making them accessible in your ETL processes or to any application. Train and
    store machine learning models in your database bringing intelligence to where
    your data lives.
  prefs: []
  type: TYPE_NORMAL
- en: Basic R and Python Execution in SQL Server: [https://aka.ms/BasicMLServicesExecution](https://aka.ms/BasicMLServicesExecution)
  prefs: []
  type: TYPE_NORMAL
- en: Set up Machine Learning Services in SQL Server: [https://aka.ms/SetupMLServices](https://aka.ms/SetupMLServices)
  prefs: []
  type: TYPE_NORMAL
- en: End-to-end tutorial solutions on Github: [https://microsoft.github.io/sql-ml-tutorials/](https://microsoft.github.io/sql-ml-tutorials/)
  prefs: []
  type: TYPE_NORMAL
- en: 'Other YouTube Tutorials:'
  prefs: []
  type: TYPE_NORMAL
- en: How to Install SQL Server Machine Learning Services: [https://aka.ms/InstallMLServices](https://aka.ms/InstallMLServices) How
    to Enable SQL Server Machine Learning Services: [https://aka.ms/EnableMLServices](https://aka.ms/EnableMLServices) Basics
    of R and Python Execution in SQL: [https://aka.ms/ExecuteMLServices](https://aka.ms/ExecuteMLServices)
  prefs: []
  type: TYPE_NORMAL
- en: '**Bio**: [Kyle Weller](https://www.linkedin.com/in/ai-is-the-future/) is a
    Program Manager on Microsoft’s Azure Machine Learning team. After working as a
    Software Developer at a few startups, he joined Microsoft and spent time in Office,
    and Bing building scalable data instrumentation, platform, and API solutions.
    He was on the Cortana Data & Analytics team driving measurement strategy, researching
    user behavior patterns, standardizing KPIs, and identifying growth opportunities
    for the product. He now works on Azure machine learning products focusing on bringing
    intelligence to where data lives. This includes SQL Server’s new Machine Learning
    Services that allow R + Python execution in SQL.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Related:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[Jupyter Notebook for Beginners: A Tutorial](https://www.kdnuggets.com/2018/05/jupyter-notebook-beginners-tutorial.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[SQL Cheat Sheet](https://www.kdnuggets.com/2018/07/sql-cheat-sheet.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Genetic Algorithm Implementation in Python](https://www.kdnuggets.com/2018/07/genetic-algorithm-implementation-python.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[High Availability SQL Server Docker Containers in Kubernetes](https://www.kdnuggets.com/2022/04/high-availability-sql-server-docker-containers-kubernetes.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[The Essential Guide to SQL’s Execution Order](https://www.kdnuggets.com/the-essential-guide-to-sql-execution-order)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[KDnuggets™ News 22:n01, Jan 5: 3 Tools to Track and Visualize…](https://www.kdnuggets.com/2022/n01.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[3 Tools to Track and Visualize the Execution of Your Python Code](https://www.kdnuggets.com/2021/12/3-tools-track-visualize-execution-python-code.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Remote Work in Data Science: Pros and Cons](https://www.kdnuggets.com/remote-work-in-data-science-pros-and-cons)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[How To Find The Best Data Science Remote Jobs](https://www.kdnuggets.com/2022/12/find-best-data-science-remote-jobs.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
