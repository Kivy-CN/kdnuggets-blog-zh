- en: Jupyter Notebook Best Practices for Data Science
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2016/10/jupyter-notebook-best-practices-data-science.html](https://www.kdnuggets.com/2016/10/jupyter-notebook-best-practices-data-science.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**By Jonathan Whitmore, Silicon Valley Data Science.**'
  prefs: []
  type: TYPE_NORMAL
- en: The [Jupyter Notebook](http://www.jupyter.org/) is a fantastic tool that can
    be used in many different ways. Because of its flexibility, working with the Notebook
    on data science problems in a team setting can be challenging. We present here
    some best-practices that SVDS has implemented after working with the Notebook
    in teams and with our clients—and that might help your data science teams as well.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '![Jupyter](../Images/f79919b082e4195113c37e791c8cd699.png)'
  prefs: []
  type: TYPE_IMG
- en: The need to keep work under version control, and to maintain shared space without
    getting in each other’s way, has been a tricky one to meet. We present here our
    current view into a system that works for us—and that might help your data science
    teams as well.
  prefs: []
  type: TYPE_NORMAL
- en: Overall thought process
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'There are two kinds of notebooks to store in a data science project: the lab
    notebook and the deliverable notebook. First, there is the organizational approach
    to each notebook.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Lab (or dev) notebooks:**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Let a traditional paper laboratory notebook be your guide here:'
  prefs: []
  type: TYPE_NORMAL
- en: Each notebook keeps a historical (and dated) record of the analysis as it’s
    being explored.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The notebook is not meant to be anything other than a place for experimentation
    and development.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Each notebook is controlled by a single author: a data scientist on the team
    (marked with initials).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Notebooks can be split when they get too long (think turn the page).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Notebooks can be split by topic, if it makes sense.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Deliverable (or report) notebooks**'
  prefs: []
  type: TYPE_NORMAL
- en: They are the fully polished versions of the lab notebooks.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: They store the final outputs of analysis.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Notebooks are controlled by the whole data science team, rather than by any
    one individual.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Version control
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Here’s an example of how we use git and GitHub. One beautiful new feature of
    Github is that they now render Jupyter Notebooks automatically in repositories.
  prefs: []
  type: TYPE_NORMAL
- en: When we do our analysis, we do internal reviews of our code and our data science
    output. We do this with a traditional pull-request approach. When issuing pull-requests,
    however, looking at the differences between updated .ipynb files, the updates
    are not rendered in a helpful way. One solution people tend to recommend is to
    commit the conversion to .py instead. This is great for seeing the differences
    in the input code (while jettisoning the output), and is useful for seeing the
    changes. However, when reviewing data science work, it is also incredibly important
    to see the output itself.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, a fellow data scientist might provide feedback on the following
    initial plot, and hope to see an improvement:'
  prefs: []
  type: TYPE_NORMAL
- en: '[![not-great](../Images/00cf9c2843f638280f29a35ea9441241.png)](http://www.svds.com/wp-content/uploads/2015/09/not-great.png)'
  prefs: []
  type: TYPE_NORMAL
- en: '[![better-fit](../Images/4be609a94bc651a8b98b7b2a349c38d7.png)](http://www.svds.com/wp-content/uploads/2015/09/better-fit.png)'
  prefs: []
  type: TYPE_NORMAL
- en: The plot on the top is a rather poor fit to the data, while the plot on the
    bottom is better. Being able to see these plots directly in a pull-request review
    of a team-member’s work is vital.
  prefs: []
  type: TYPE_NORMAL
- en: See the Github commit example [here](https://github.com/jbwhit/OSCON-2015/commit/6750b962606db27f69162b802b5de4f84ac916d5).
  prefs: []
  type: TYPE_NORMAL
- en: Note that there are three ways to see the updated figure (options are along
    the bottom).
  prefs: []
  type: TYPE_NORMAL
- en: '**Post-save hooks**'
  prefs: []
  type: TYPE_NORMAL
- en: We work with many different clients. Some of their version control environments
    lack the nice rendering capabilities. There are options for deploying an instance
    of nbviewer behind the corporate firewall, but sometimes that still is not an
    option. If you find yourself in this situation, and you want to maintain the above
    framework of reviewing code we have a workaround. In these situations, we commit
    the .ipynb, .py, and .html of every notebook in each commit. Creating the .py
    and .html files can be done simply and automatically every time a notebook is
    saved by editing the jupyter config file and adding a post-save hook.
  prefs: []
  type: TYPE_NORMAL
- en: 'The default jupyter config file is found at:'
  prefs: []
  type: TYPE_NORMAL
- en: '`~/.jupyter/jupyter_notebook_config.py`'
  prefs: []
  type: TYPE_NORMAL
- en: 'If you don’t have this file, run:'
  prefs: []
  type: TYPE_NORMAL
- en: '`jupyter notebook --generate-config`'
  prefs: []
  type: TYPE_NORMAL
- en: 'to create this file, and add the following text:'
  prefs: []
  type: TYPE_NORMAL
- en: Run `jupyter notebook` and you’re ready to go!
  prefs: []
  type: TYPE_NORMAL
- en: If you want to have this saving .html and .py files only when using a particular
    “profile,” it’s a bit trickier as Jupyter doesn’t use the notion of profiles anymore.
  prefs: []
  type: TYPE_NORMAL
- en: 'First create a new profile name via a bash command line:'
  prefs: []
  type: TYPE_NORMAL
- en: 'This will create a new directory and file at `~/.jupyter_profile2/jupyter_notebook_config.py`.
    Then run `jupyter notebook` and work as usual. To switch back to your default
    profile you will have to set (either by hand, shell function, or your .bashrc)
    back to:'
  prefs: []
  type: TYPE_NORMAL
- en: '`export JUPYTER_CONFIG_DIR=~/.jupyter`.'
  prefs: []
  type: TYPE_NORMAL
- en: Now every save to a notebook updates identically-named .py and .html files.
    Add these in your commits and pull-requests, and you will gain the benefits from
    each of these file formats.
  prefs: []
  type: TYPE_NORMAL
- en: Putting it all together
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Here’s the directory structure of a project in progress, with some explicit
    rules about naming the files.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example directory structure**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]   - develop # (Lab-notebook style)   + [ISO 8601 date]-[DS-initials]-[2-4
    word description].ipynb   + 2015-06-28-jw-initial-data-clean.html   + 2015-06-28-jw-initial-data-clean.ipynb   +
    2015-06-28-jw-initial-data-clean.py   + 2015-07-02-jw-coal-productivity-factors.html   +
    2015-07-02-jw-coal-productivity-factors.ipynb   + 2015-07-02-jw-coal-productivity-factors.py  -
    deliver # (final analysis, code, presentations, etc)   + Coal-mine-productivity.ipynb   +
    Coal-mine-productivity.html   + Coal-mine-productivity.py  - figures   + 2015-07-16-jw-production-vs-hours-worked.png  -
    src # (modules and scripts)   + init.py   + load_coal_data.py   + figures # (figures
    and plots)   + production-vs-number-employees.png   + production-vs-hours-worked.png  -
    data (backup-separate from version control)   + coal_prod_cleaned.csv [PRE1]`'
  prefs: []
  type: TYPE_NORMAL
- en: '**Benefits**'
  prefs: []
  type: TYPE_NORMAL
- en: 'There are many benefits to this workflow and structure. The first and primary
    one is that they create a historical record of how the analysis progressed. It’s
    also easily searchable:'
  prefs: []
  type: TYPE_NORMAL
- en: by date (`ls 2015-06*.ipynb`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: by author (`ls 2015*-jw-*.ipynb`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: by topic (`ls *-coal-*.ipynb`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Second, during pull-requests, having the .py files lets a person quickly see
    which input text has changed, while having the .html files lets a person quickly
    see which outputs have changed. Having this be a painless post-save-hook makes
    this workflow effortless.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, there are many smaller advantages of this approach that are too numerous
    to list here—please [get in touch](http://www.svds.com/contact/) if you have questions,
    or suggestions for further improvements on the model! For more on this topic,
    check out the [related video](http://shop.oreilly.com/product/0636920044260.do) from
    O’Reilly Media.
  prefs: []
  type: TYPE_NORMAL
- en: '**Bio: [Jonathan Whitmore](https://www.linkedin.com/in/jonathanbwhitmore/)**
    is a data scientist at SVDS. Following a postdoctoral position in astrophysics,
    Jonathan is a sought after speaker on computing and astronomy. He is excited by
    the application of machine learning and statistical techniques to industry problems
    and has developed novel data analysis techniques.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Original](https://www.svds.com/tbt-jupyter-notebook-best-practices-data-science/?utm_source=kdnuggets&utm_medium=referral).
    Reposted with permission.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Related:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[Statistical Data Analysis in Python](/2016/07/statistical-data-analysis-python.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Jupyter+Spark+Mesos: An “Opinionated” Docker Image](/2016/05/ibm-jupyter-spark-mesos-docker.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Getting Started with Data Science – Python](/2016/07/getting-started-data-science-python.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[5 Free Templates for Data Science Projects on Jupyter Notebook](https://www.kdnuggets.com/5-free-templates-for-data-science-projects-on-jupyter-notebook)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[10 Jupyter Notebook Tips and Tricks for Data Scientists](https://www.kdnuggets.com/2023/06/10-jupyter-notebook-tips-tricks-data-scientists.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Python in Finance: Real Time Data Streaming within Jupyter Notebook](https://www.kdnuggets.com/python-in-finance-real-time-data-streaming-within-jupyter-notebook)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[How to Setup Julia on Jupyter Notebook](https://www.kdnuggets.com/2022/11/setup-julia-jupyter-notebook.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Jupyter Notebook Magic Methods Cheat Sheet](https://www.kdnuggets.com/jupyter-notebook-magic-methods-cheat-sheet)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[An Overview of Mercury: Creating Data Science Portfolio and…](https://www.kdnuggets.com/2022/05/overview-mercury-creating-data-science-portfolio-notebook-based-webapps.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
