- en: 'Mining Twitter Data with Python Part 7: Geolocation and Interactive Maps'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2016/07/mining-twitter-data-python-part-7.html](https://www.kdnuggets.com/2016/07/mining-twitter-data-python-part-7.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**By Marco Bonzanini, Independent Data Science Consultant.**'
  prefs: []
  type: TYPE_NORMAL
- en: '[Geolocation](https://en.wikipedia.org/wiki/Geolocation) is the process of
    identifying the geographic location of an object such as a mobile phone or a computer.
    Twitter allows its users to provide their location when they publish a tweet,
    in the form of latitude and longitude coordinates. With this information, we are
    ready to create some nice visualisation for our data, in the form of interactive
    maps.'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: This article briefly introduces the [GeoJSON](http://geojson.org/) format and [Leaflet.js](http://leafletjs.com/),
    a nice Javascript library for interactive maps, and discusses its integration
    with the Twitter data we have collected in the previous parts of this tutorial
    (see [Part 4](https://marcobonzanini.com/2015/03/23/mining-twitter-data-with-python-part-4-rugby-and-term-co-occurrences/) for
    details on the rugby data set).
  prefs: []
  type: TYPE_NORMAL
- en: GeoJSON
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: GeoJSON is a format for encoding geographic data structures. The format supports
    a variety of geometric types that can be used to visualise the desired shapes
    onto a map. For our examples, we just need the simplest structure, a `Point`.
    A point is identified by its coordinates (latitude and longitude).
  prefs: []
  type: TYPE_NORMAL
- en: In GeoJSON, we can also represent objects such as a `Feature` or a`FeatureCollection`.
    The first one is basically a geometry with additional properties, while the second
    one is a list of features.
  prefs: []
  type: TYPE_NORMAL
- en: Our Twitter data set can be represented in GeoJSON as a`FeatureCollection`,
    where each tweet would be an individual `Feature`with its one geometry (the aforementioned `Point`).
  prefs: []
  type: TYPE_NORMAL
- en: 'This is how the JSON structure looks like:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: From Tweets to GeoJSON
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Assuming the data are stored in a single file as described in the first chapter
    of this tutorial, we simply need to iterate all the tweets looking for the *coordinates* field,
    which may or may not be present. Keep in mind that you need to use *coordinates*,
    because the *geo* field is deprecated (see[the API](https://dev.twitter.com/overview/api/tweets)).
  prefs: []
  type: TYPE_NORMAL
- en: 'This code will read the data set, looking for tweets where the coordinates
    are explicitely given. Once the GeoJSON data structure is created (in the form
    of a Python dictionary), then the data are dumped into a file called `geo_data.json`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Interactive Maps with Leaflet.js
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Leaflet.js](http://leafletjs.com/) is an open-source Javascript library for
    interactive maps. You can create maps with tiles of your choice (e.g. from OpenStreetMap
    or MapBox), and overlap interactive components.'
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to prepare a web page that will host a map, you simply need to include
    the library and its CSS, by putting in the head section of your document the following
    lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Moreover, we have all our GeoJSON data in a separate file, so we want to load
    the data dynamically rather than manually put all the points in the map. For this
    purpose, we can easily play with [jQuery](https://jquery.com/), which we also
    need to include:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'The map itself will be placed into a `div` element:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'We’re now ready to create the map with Leaflet:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'A screenshot of the results:'
  prefs: []
  type: TYPE_NORMAL
- en: '[![rugby-map-osm](../Images/74995a7417291a318ded650623b26b71.png)](https://marcobonzanini.files.wordpress.com/2015/06/rugby-map-osm.png)'
  prefs: []
  type: TYPE_NORMAL
- en: The above example uses OpenStreetMap for the tile images, but Leaflet lets you
    choose other services. For example, in the following screenshot the tiles are
    coming from MapBox.
  prefs: []
  type: TYPE_NORMAL
- en: '[![rugby-map-mapbox](../Images/320461a68e73c99fbde1fe78eb3e0d5b.png)](https://marcobonzanini.files.wordpress.com/2015/06/rugby-map-mapbox.png)'
  prefs: []
  type: TYPE_NORMAL
- en: 'You can see the interactive maps in action here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Tiles from OpenStreetMap](http://bonzanini.github.io/mining-twitter/rugby-osm.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Tiles from MapBox](http://bonzanini.github.io/mining-twitter/rugby-mapbox.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In general there are many options for data visualisation in Python, but in terms
    of browser-based interaction, Javascript is also an interesting option, and the
    two languages can play well together. This article has shown that building a simple
    interactive map is a fairly straightforward process.
  prefs: []
  type: TYPE_NORMAL
- en: With a few lines of Python, we’ve been able to transform our data into a common
    format (GeoJSON) that can be passed onto Javascript for visualisation. Leaflet.js
    is a nice Javascript library that, almost out of the box, lets us create some
    nice interactive maps.
  prefs: []
  type: TYPE_NORMAL
- en: '**Bio: [Marco Bonzanini](https://twitter.com/marcobonzanini)** is a Data Scientist
    based in London, UK. Active in the PyData community, he enjoys working in text
    analytics and data mining applications. He''s the author of "[Mastering Social
    Media Mining with Python](https://www.amazon.com/Mastering-Social-Media-Mining-Python-ebook/dp/B01BFD2Z2Q)"
    (Packt Publishing, July 2016).'
  prefs: []
  type: TYPE_NORMAL
- en: '[Original](https://marcobonzanini.com/2015/06/16/mining-twitter-data-with-python-and-js-part-7-geolocation-and-interactive-maps/).
    Reposted with permission.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Related**:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Mining Twitter Data with Python Part 4: Rugby and Term Co-occurrences](/2016/06/mining-twitter-data-python-part-4.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Mining Twitter Data with Python Part 5: Data Visualisation Basics](/2016/06/mining-twitter-data-python-part-5.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Mining Twitter Data with Python Part 6: Sentiment Analysis Basics](/2016/07/mining-twitter-data-python-part-6.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[The Easiest Way to Make Beautiful Interactive Visualizations With Pandas](https://www.kdnuggets.com/2021/12/easiest-way-make-beautiful-interactive-visualizations-pandas.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Machine Learning Is Not Like Your Brain Part 6: The Importance of…](https://www.kdnuggets.com/2022/08/machine-learning-like-brain-part-6-importance-precise-synapse-weights-ability-set-quickly.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[KDnuggets News, April 6: 8 Free MIT Courses to Learn Data Science…](https://www.kdnuggets.com/2022/n14.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[The Complete Collection of Data Science Books - Part 1](https://www.kdnuggets.com/2022/05/complete-collection-data-science-books-part-1.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[The Complete Collection of Data Science Books - Part 2](https://www.kdnuggets.com/2022/05/complete-collection-data-science-books-part-2.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[The Complete Collection of Data Science Interviews – Part 1](https://www.kdnuggets.com/2022/06/complete-collection-data-science-interviews-part-1.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
