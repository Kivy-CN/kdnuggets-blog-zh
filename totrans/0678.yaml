- en: Building Surveillance System Using USB Camera and Wireless-Connected Raspberry
    Pi
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用USB相机和无线连接的Raspberry Pi构建监控系统
- en: 原文：[https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2](https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2](https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2)
- en: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [comments](/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html?page=2#comments)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html?page=2#comments)'
- en: 3\. Capturing Images using PyGame
  id: totrans-3
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3\. 使用PyGame捕获图像
- en: The “**fswebcam**” package is useful for quickly testing whether the camera
    is working well or not. After making sure it is functioning well, we can start
    building a Python script that accesses the camera to capture images continuously
    using the PyGame library. The following code uses PyGame for capturing a single
    image, opens a window for displaying that image, and finally save such image.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: “**fswebcam**”包对于快速测试相机是否正常工作非常有用。在确认相机工作正常后，我们可以开始构建一个Python脚本，使用PyGame库访问相机以连续捕获图像。以下代码使用PyGame捕获单张图像，打开一个窗口显示该图像，并最终保存图像。
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '* * *'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Our Top 3 Course Recommendations
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 我们的前三大课程推荐
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google网络安全证书](https://www.kdnuggets.com/google-cybersecurity)
    - 快速进入网络安全职业生涯。'
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google数据分析专业证书](https://www.kdnuggets.com/google-data-analytics)
    - 提升你的数据分析技能'
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT支持专业证书](https://www.kdnuggets.com/google-itsupport)
    - 支持你的组织的IT需求'
- en: '* * *'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Assume that the above code is saved in a Python file named “**im_cap.py**”.
    To execute such code, we can issue the following command from the terminal:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 假设上述代码保存在名为“**im_cap.py**”的Python文件中。要执行这些代码，我们可以从终端发出以下命令：
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Here is the window displayed after executing such file.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这是执行该文件后显示的窗口。
- en: '![](../Images/70fb7b5dcdf168cdeb19ecf08f6c499f.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/70fb7b5dcdf168cdeb19ecf08f6c499f.png)'
- en: We can modify the previous code to capture more than one image. For example,
    we can use a **for** loop to capture a number of previously specified images.
    We can also use a **while** loop that is not limited to a number of images. Here
    is the modified code that captures 2,000 images using a **for** loop.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以修改之前的代码以捕获多于一张图像。例如，我们可以使用**for**循环捕获指定数量的图像。我们还可以使用不受图像数量限制的**while**循环。以下是使用**for**循环捕获2,000张图像的修改代码。
- en: '[PRE2]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Here are 8 captured images. Note that the camera position is changed a bit.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有8张捕获的图片。注意，相机位置稍有变化。
- en: '![](../Images/e8f73bbe809027e9bf3f5ec9fc74063a.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e8f73bbe809027e9bf3f5ec9fc74063a.png)'
- en: 4\. Building the Background Model
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4\. 构建背景模型
- en: Up to this point, we successfully built a simple surveillance system in which
    a camera captures images which are saved in the SD card of RPi. We can extend
    that to automatically detect changes to the scene. This is done by building a
    background model for the scene. Any change to such a model will indicate a change.
    For example, if someone is passing through the scene will cause a change to the
    background.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们成功地构建了一个简单的监控系统，其中相机捕获的图像保存在RPi的SD卡中。我们可以将其扩展到自动检测场景的变化。这是通过为场景构建背景模型来完成的。对该模型的任何变化都会指示变化。例如，如果有人经过场景，将导致背景发生变化。
- en: The background model can be simply created by averaging multiple captured images
    to the scene background without any object in them. Because we are interested
    in the color information, the images will be converted into binary. Here is the
    Python code used to build the background model.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 背景模型可以通过将多张捕获的图像平均得到，图像中没有任何物体。因为我们对颜色信息感兴趣，图像将被转换为二进制。以下是用于构建背景模型的Python代码。
- en: '[PRE3]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Here is the background model in both gray and binary after averaging 500 images.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这是在平均了 500 张图像后得到的背景模型，包括灰度和二值图像。
- en: '![](../Images/bc07771e6f250b549b1f42728a842909.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bc07771e6f250b549b1f42728a842909.png)'
- en: 5\. Detecting Changes to the Background Model
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5\. 检测背景模型的变化
- en: After building the background model, we can test a new image to check if there
    is a change to the background or not. This is done simply by converting the new
    image into binary. Then the number of white pixels is compared in both images.
    If the number exceeds a given threshold, this indicates a change from the background.
    The threshold changes from scene to scene. Here is the code used for testing a
    new image.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建背景模型后，我们可以测试新的图像，以检查背景是否发生了变化。这可以通过将新图像转换为二值图像来完成。然后，将两幅图像中的白色像素数量进行比较。如果数量超过给定的阈值，这表明背景发生了变化。阈值会根据场景的不同而变化。这里是用于测试新图像的代码。
- en: '[PRE4]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Here is a test image in both color, gray, and binary in which there is a change
    from the background due to the appearance of an object (person) in the scene.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个测试图像，包括彩色、灰度和二值图像，由于场景中出现了一个物体（人），它与背景有变化。
- en: '![](../Images/d86cfb508869bb37d5643695b38cac51.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d86cfb508869bb37d5643695b38cac51.png)'
- en: 6\. Building a Simple Circuit that Lights a Led When a Change Occurs
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6\. 构建一个简单电路，当发生变化时点亮 LED
- en: 'As an indication of a change to the background model, we can build a simple
    circuit in which a led lights when a change occurs. This circuit will be connected
    to the GPIO (General Purpose Input Output) bins of the RPi. The circuit needs
    the following components:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 作为对背景模型变化的指示，我们可以构建一个简单的电路，当发生变化时 LED 会点亮。这个电路将连接到 RPi 的 GPIO（通用输入输出）引脚。电路需要以下组件：
- en: One breadboard.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一块面包板。
- en: One led.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个 LED。
- en: One resistor (more than or equal to 100 ohms). I use a 178.8 ohms resistor.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个电阻（大于或等于 100 欧姆）。我使用的是 178.8 欧姆的电阻。
- en: Two male/male jumper wires.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两根公/公跳线。
- en: Two male/female jumper wires.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两根公/母跳线。
- en: It is recommended to test the circuit before connecting it to the GPIO pins.
    This is because if the resistor value was not selected properly, this might lead
    to not only burning the led but also damaging the GPIO pins. To do the test, we
    need a battery for supplying the breadboard by power. Here is the circuit after
    connecting all components correctly.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 建议在将电路连接到 GPIO 引脚之前先进行测试。这是因为如果电阻的值选择不当，可能不仅会烧坏 LED，还会损坏 GPIO 引脚。为了进行测试，我们需要一个电池来为面包板提供电力。以下是正确连接所有组件后的电路。
- en: '![](../Images/af2906aa9e63f23914c18876149135cb.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/af2906aa9e63f23914c18876149135cb.png)'
- en: After that, we can remove the battery and connect the breadboard the GPIO pins
    of RPi. Based on the breadboard numbering of the GPIO pins, the ground is connected
    to bin number 20 and the high voltage is connected to the output bin number 22\.
    The following figure illustrates the connections between the breadboard and the
    RPi. The RPi is also connected to both the charger and the USB camera.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们可以拆下电池并将面包板连接到 RPi 的 GPIO 引脚。根据 GPIO 引脚的面包板编号，地线连接到引脚 20，高电压连接到输出引脚 22。下图展示了面包板与
    RPi 之间的连接。RPi 还连接到了充电器和 USB 摄像头。
- en: '![](../Images/f917ae6b5def74ff37d2bb3f20c6398f.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f917ae6b5def74ff37d2bb3f20c6398f.png)'
- en: The output GPIO bin is controlled using the Python script given below. Its default
    state is LOW meaning the led is turned off. When there is a change to the background,
    the state will be changed to HIGH meaning the led is turned on. The led remains
    on for 0.1 seconds then its state returns back to off. When another input image
    is different from the background, the led returns back to on for another 0.1 seconds.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 输出 GPIO 引脚由以下 Python 脚本控制。其默认状态为 LOW，表示 LED 处于关闭状态。当背景发生变化时，状态将变为 HIGH，表示 LED
    点亮。LED 保持点亮状态 0.1 秒，然后状态返回为关闭。当另一个输入图像与背景不同，LED 将再次点亮 0.1 秒。
- en: '[PRE5]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The following figure is shown one input image which is different from the background
    image due to the existence of a person. As a result, the led will be turned on
    for 0.1 seconds.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了一个输入图像，由于存在一个人，它与背景图像不同。因此，LED 将点亮 0.1 秒钟。
- en: '![](../Images/3024e1ed52ae5a4c77d2b20f56c94497.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3024e1ed52ae5a4c77d2b20f56c94497.png)'
- en: The following video ([https://youtu.be/WOUG-vjg3A4](https://youtu.be/WOUG-vjg3A4))
    shows the led state for multiple frames captured using the camera. The led is
    turned on when the input image is different from the background model according
    to the used threshold.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 以下视频 ([https://youtu.be/WOUG-vjg3A4](https://youtu.be/WOUG-vjg3A4)) 显示了使用相机捕捉的多个帧中的
    LED 状态。当输入图像与背景模型不同且符合使用的阈值时，LED 会亮起。
- en: '**For More Details**'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '**更多详情**'
- en: Ahmed Fawzy Gad, “Building an Image Classifier Running on Raspberry Pi”, September
    2018, [https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad](https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Ahmed Fawzy Gad，"在 Raspberry Pi 上构建图像分类器"，2018 年 9 月， [https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad](https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad)
- en: '**For Contacting the Author**'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**联系作者**'
- en: E-mail: [ahmed.f.gad@gmail.com](https://mailto:ahmed.f.gad@gmail.com/)
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '电子邮件: [ahmed.f.gad@gmail.com](https://mailto:ahmed.f.gad@gmail.com/)'
- en: LinkedIn: [https://linkedin.com/in/ahmedfgad/](https://linkedin.com/in/ahmedfgad/)
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'LinkedIn: [https://linkedin.com/in/ahmedfgad/](https://linkedin.com/in/ahmedfgad/)'
- en: KDnuggets: [https://www.kdnuggets.com/author/ahmed-gad](https://www.kdnuggets.com/author/ahmed-gad)
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'KDnuggets: [https://www.kdnuggets.com/author/ahmed-gad](https://www.kdnuggets.com/author/ahmed-gad)'
- en: YouTube: [http://youtube.com/AhmedGadFCIT](https://youtube.com/AhmedGadFCIT)
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'YouTube: [http://youtube.com/AhmedGadFCIT](https://youtube.com/AhmedGadFCIT)'
- en: TowardsDataScience: [https://towardsdatascience.com/@ahmedfgad](https://towardsdatascience.com/@ahmedfgad)
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'TowardsDataScience: [https://towardsdatascience.com/@ahmedfgad](https://towardsdatascience.com/@ahmedfgad)'
- en: '**Bio: [Ahmed Gad](https://www.linkedin.com/in/ahmedfgad/)** received his B.Sc.
    degree with excellent with honors in information technology from the Faculty of
    Computers and Information (FCI), Menoufia University, Egypt, in July 2015\. For
    being ranked first in his faculty, he was recommended to work as a teaching assistant
    in one of the Egyptian institutes in 2015 and then in 2016 to work as a teaching
    assistant and a researcher in his faculty. His current research interests include
    deep learning, machine learning, artificial intelligence, digital signal processing,
    and computer vision.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**个人简介: [Ahmed Gad](https://www.linkedin.com/in/ahmedfgad/)** 获得了埃及梅努菲亚大学计算机与信息学院（FCI）信息技术学士学位，成绩优异，荣誉学位，于
    2015 年 7 月毕业。由于在学院中排名第一，他被推荐在 2015 年担任埃及某研究所的助教，随后在 2016 年担任助教和研究员。他目前的研究兴趣包括深度学习、机器学习、人工智能、数字信号处理和计算机视觉。'
- en: '[Original](https://www.linkedin.com/pulse/building-surveillance-system-using-usb-camera-raspberry-ahmed-gad/).
    Reposted with permission.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '[原始文章](https://www.linkedin.com/pulse/building-surveillance-system-using-usb-camera-raspberry-ahmed-gad/)。经授权转载。'
- en: '**Related:**'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关内容：**'
- en: '[Intuitive Ensemble Learning Guide with Gradient Boosting](/2018/07/intuitive-ensemble-learning-guide-gradient-boosting.html)'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[直观的集成学习指南与梯度提升](/2018/07/intuitive-ensemble-learning-guide-gradient-boosting.html)'
- en: '[Building an Image Classifier Running on Raspberry Pi](/2018/10/building-image-classifier-running-raspberry-pi.html)'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[在 Raspberry Pi 上构建图像分类器](/2018/10/building-image-classifier-running-raspberry-pi.html)'
- en: '[Genetic Algorithm Implementation in Python](/2018/07/genetic-algorithm-implementation-python.html)'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Python 中的遗传算法实现](/2018/07/genetic-algorithm-implementation-python.html)'
- en: More On This Topic
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 进一步了解此主题
- en: '[Building a Recommender System for Amazon Products with Python](https://www.kdnuggets.com/2023/02/building-recommender-system-amazon-products-python.html)'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用 Python 为亚马逊产品构建推荐系统](https://www.kdnuggets.com/2023/02/building-recommender-system-amazon-products-python.html)'
- en: '[Building a Recommendation System with Hugging Face Transformers](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用 Hugging Face Transformers 构建推荐系统](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)'
- en: '[How a Level System can Help Forecast AI Costs](https://www.kdnuggets.com/2022/03/level-system-help-forecast-ai-costs.html)'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[如何通过等级系统预测 AI 成本](https://www.kdnuggets.com/2022/03/level-system-help-forecast-ai-costs.html)'
- en: '[Learning System Design: Top 5 Essential Reads](https://www.kdnuggets.com/learning-system-design-top-5-essential-reads)'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[学习系统设计：前五名必读书单](https://www.kdnuggets.com/learning-system-design-top-5-essential-reads)'
- en: '[Monitor Your File System With Python’s Watchdog](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用 Python 的 Watchdog 监控你的文件系统](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)'
- en: '[Building Microservice for Multi-Chat Backends Using Llama and ChatGPT](https://www.kdnuggets.com/building-microservice-for-multichat-backends-using-llama-and-chatgpt)'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用 Llama 和 ChatGPT 构建多聊天后端的微服务](https://www.kdnuggets.com/building-microservice-for-multichat-backends-using-llama-and-chatgpt)'
