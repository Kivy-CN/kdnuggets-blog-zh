- en: Natural Language Interface to DataTable
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2019/06/natural-language-interface-datatable.html](https://www.kdnuggets.com/2019/06/natural-language-interface-datatable.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [comments](#comments)'
  prefs: []
  type: TYPE_IMG
- en: '**By [Yogesh Kulkarni](https://www.linkedin.com/in/yogeshkulkarni), Yati.io**'
  prefs: []
  type: TYPE_NORMAL
- en: A good amount of structured data is stored in the form of relational databases
    as tables. Considering just one table as a simplified case, even to access the
    values in various cells, one needs to either program the logic or open it in a
    spreadsheet software and find them manually. Won’t it be better if one can just
    query the fields using a natural language, like English.
  prefs: []
  type: TYPE_NORMAL
- en: For example, if you have table like in **Figure 1**, and it would be nicer to
    just send a query “Which City held Olympics in 2008?” in a chatbot and you would
    get the answer as, “Beijing”. This is far more user-friendly than writing a program
    or manually searching a huge table.
  prefs: []
  type: TYPE_NORMAL
- en: '![olympics](../Images/fbe88c33f89149d6d59bfafe75a81dca.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 1: Wiki Table Questions (Source: Stanford NLP Group Research Blog)'
  prefs: []
  type: TYPE_NORMAL
- en: The example given above is surely a very simplistic version of the enormous
    possibilities one can imagine for providing natural language interface to the
    datasets or databases. Natural Language Understanding (NLU) is the key technology
    here, which would parse the query in the natural language like English, ‘understand’
    it, and then fire data-format-specific query to fetch the desired answer.  This
    article demonstrates how this can be achieved using Rasa NLU framework.
  prefs: []
  type: TYPE_NORMAL
- en: '[Rasa](https://rasa.com/) is an open source chatbot framework. It has two parts,
    ‘NLU’ for understanding intents and entities from the user-text whereas ‘Core’
    is for dialog management. One of the salient points of Rasa framework is that
    its functionalities are machine/deep learning based and are trained locally. There
    is no need to send your data (ie user text) over the net to some hosted service
    for NLU or dialog management.'
  prefs: []
  type: TYPE_NORMAL
- en: Example Chatbot
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Say, you wish to build a General Knowledge chatbot for querying information
    of various countries in the world. Queries like “What’s the population of China?”,
    “What is the area of India?”, etc.
  prefs: []
  type: TYPE_NORMAL
- en: The [World FactBook](https://www.cia.gov/library/publications/the-world-factbook/) 
    is a wonderful source of such data about the countries. Information is arranged
    in the form of country-wise-webpages, having sections like “Geography”, “Economy”,
    etc.  To find the population of China, one needs to first scroll to China in the
    drop-down list, find “People and Society” section and then you get to see that
    the population of China, which is “1,384,688,986 (July 2018 est.)”. A chatbot
    would be far more effective in such cases.
  prefs: []
  type: TYPE_NORMAL
- en: Data Collection
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: First important step is to get the data, which is spread across various webpages,
    into a single table. This [KDNuggets Article](/2018/03/web-scraping-python-cia-world-factbook.html)
    explains the process of web scraping, nicely. The output is a table with rows
    as countries and various fields as columns.
  prefs: []
  type: TYPE_NORMAL
- en: Now we need to build a natural language interface to fields or cells of this
    table. For query like “What’s the population of China?”, we need to fetch value
    in the cell which is at intersection of a row for “Country==China” and a column
    named “Population”. To put simply, from the natural language query, we need to
    extract two entities, “Population as Column” and “China as Row” (in the column
    “Country”). Rasa NLU is being used for the entity extraction here.
  prefs: []
  type: TYPE_NORMAL
- en: Entity Extraction
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Entity extraction is a process of finding words/tokens in the sentence mapping
    to pre-defined entity types. Named Entity Recognition (NER) is the supervised
    method to extract the entities, using algorithms such as Conditional Random Fields
    (CRF), etc.
  prefs: []
  type: TYPE_NORMAL
- en: To train RASA NLU’s NER, we need to provide training data which has sample sentences
    with entities annotated.  Sample training file is shown in **Figure 2**.
  prefs: []
  type: TYPE_NORMAL
- en: '![RASA NLU](../Images/8c43ea0be0a268b33fffbf3a3566b153.png)'
  prefs: []
  type: TYPE_IMG
- en: Here “savings” and “yen” are the actual values of the entity types “source account”
    and “currency” respectively.
  prefs: []
  type: TYPE_NORMAL
- en: Building such training data for the given table, would again be a manual and
    thus a tedious process. The annotation process can be automated by iterating over
    rows and columns of the table . There is no need to provide examples of all the
    columns or rows, as the abstract pattern is learnt and not the hardcoded actual
    values in the cells.
  prefs: []
  type: TYPE_NORMAL
- en: 'Code sample for generation of training file can be seen below:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Although only two sentence formats are shown above, one can add more variations.
    The automatically generated NLU training file looks like:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Using the training data, NER model is trained. When a user query comes, the
    model is then able to extract “row” and “column” names. With both, one can locate
    the value in the given table. The value is returned to the user.
  prefs: []
  type: TYPE_NORMAL
- en: 'Sample conversation workflow is shown below:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Chatbot conversation](../Images/352c7696999f11ca4d0b8612156fe833.png)Source
    code of the chatbot can be found at "[DataFrame Chatbot](https://github.com/yogeshhk/DataFrameChatbot)".'
  prefs: []
  type: TYPE_NORMAL
- en: Limitations and Future Scope
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The chatbot example shown is very simplistic. It can be enhanced further with
    following capabilities:'
  prefs: []
  type: TYPE_NORMAL
- en: Queries across multiple tables.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Queries with aggregations and relations, like “Which countries have more than
    100 Million population and GDP per capita less than $1000?”.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Partial/Full SQL support ie to convert natural language query into an equivalent
    SQL query.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: This article demonstrates building of a chatbot to interface with a datatable
    in a user-friendly manner. It has varied applications for the domains where such
    tabular data is available.
  prefs: []
  type: TYPE_NORMAL
- en: '**Bio: [Yogesh Kulkarni](https://www.linkedin.com/in/yogeshkulkarni)** is a
    Data Science Instructor-Researcher at Yati.io.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Related:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[Build Your First Chatbot Using Python & NLTK](/2019/05/build-chatbot-python-nltk.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[TNLP –  Building a Question Answering Model](/2018/04/nlp-question-answering-model.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Using Deep Learning To Extract Knowledge From Job Descriptions](/2017/05/deep-learning-extract-knowledge-job-descriptions.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[ChatGPT CLI: Transform Your Command-Line Interface Into ChatGPT](https://www.kdnuggets.com/2023/07/chatgpt-cli-transform-commandline-interface-chatgpt.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Introducing DataCamps AI-Powered Chat Interface: DataLab](https://www.kdnuggets.com/introducing-datacamps-ai-powered-chat-interface-datalab)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[N-gram Language Modeling in Natural Language Processing](https://www.kdnuggets.com/2022/06/ngram-language-modeling-natural-language-processing.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Natural Language Processing Key Terms, Explained](https://www.kdnuggets.com/2017/02/natural-language-processing-key-terms-explained.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Data Representation for Natural Language Processing Tasks](https://www.kdnuggets.com/2018/11/data-representation-natural-language-processing.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Transfer Learning for Image Recognition and Natural Language Processing](https://www.kdnuggets.com/2022/01/transfer-learning-image-recognition-natural-language-processing.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
