# 机器学习模型监控清单：7个跟踪点

> 原文：[https://www.kdnuggets.com/2021/03/machine-learning-model-monitoring-checklist.html](https://www.kdnuggets.com/2021/03/machine-learning-model-monitoring-checklist.html)

[评论](#comments)

**由 [Emeli Dral](https://twitter.com/EmeliDral)，Evidently AI首席技术官及联合创始人 & [Elena Samuylova](https://twitter.com/elenasamuylova/)，Evidently AI首席执行官及联合创始人**

构建机器学习模型并不容易。将服务部署到生产环境中更难。但即使你成功地将所有管道结合起来，事情也不会止步于此。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织IT

* * *

一旦模型投入使用，我们立即需要考虑如何平稳运行。毕竟，它现在正在创造商业价值！任何对模型性能的干扰都会直接转化为实际的商业损失。

我们需要确保模型能够交付。不仅仅是作为一个返回API响应的软件，而是作为一个我们可以信赖的机器学习系统来做出决策。

这意味着我们需要监控我们的模型。还有更多需要关注的事项！

![Image](../Images/b29caf6d23d8985bee785a88032cd741.png)

如果机器学习在生产中让你措手不及，这里有一个检查清单，帮助你留意重要事项。

**1\. 服务健康**

机器学习服务仍然是一项服务。你的公司可能有一些既定的软件监控流程可以重复使用。如果模型实时运行，它需要适当的警报系统和负责的人值班。

即使你只处理批处理模型，也不要例外！我们仍需跟踪标准健康指标，如内存使用情况、CPU负载等。

*我们的目标是确保服务的正常运作，并遵守必要的约束条件，比如响应速度。*

一个开源工具检查：[*Grafana*](https://github.com/grafana/grafana)*.*

**2\. 数据质量与完整性**

机器学习模型有什么问题吗？在绝大多数情况下，[数据是罪魁祸首](https://evidentlyai.com/blog/machine-learning-monitoring-what-can-go-wrong-with-your-data)。

上游管道和模型出现故障。用户进行未通知的模式更改。数据可能在源头消失，物理传感器失败。问题不胜枚举。

因此，验证输入数据是否符合我们的期望至关重要。检查可能包括范围符合性、数据分布、特征统计、相关性或我们认为对数据集“正常”的任何行为。

*我们的目标是确认我们输入的数据是模型可以处理的。在模型返回不可靠的响应之前。*

一个开源工具可以检查：[*Great Expectations*](https://github.com/great-expectations/great_expectations)。

**3. 数据与目标漂移**

事物会发生变化。即使我们处理的是非常稳定的过程。几乎所有机器学习模型都有这个不便的特性：随着时间的推移，它会退化。

当模型接收到训练中未见过的数据时，我们可能会经历[数据漂移](https://evidentlyai.com/blog/machine-learning-monitoring-data-and-concept-drift)。想象一下用户来自不同的年龄组、营销渠道或地理区域。

如果现实世界的模式发生变化，则会触发概念漂移。考虑一些常见的情况，例如全球大流行影响所有客户行为。或者市场上出现了一个提供慷慨免费层的新竞争产品。这改变了用户对你营销活动的反应。

两种漂移的终极衡量标准是模型质量的退化。但有时，实际值尚未确定，我们无法直接计算。在这种情况下，可以跟踪领先指标。我们可以监测输入数据或目标函数的属性是否发生变化。

![图片](../Images/6efeba1798617c476e8b559d61ecbcb6.png)

例如，你可以跟踪关键模型特征和模型预测的分布。如果它们与过去的时间段有显著差异，则触发警报。

*我们的目标是获取早期信号，表明世界或数据发生了变化，应该更新我们的模型。*

一个开源工具可以检查：[*Evidently*](https://github.com/evidentlyai/evidently)。

**4. 模型性能**

了解模型是否有效的最直接方法是将你的预测与实际值进行对比。你可以使用模型训练阶段的相同指标，无论是分类的精确度/召回率，还是回归的均方根误差等。如果数据质量或现实世界模式发生了变化，我们将看到指标逐渐下降。

这里有几个注意事项。

**首先，真实标签或实际标签通常会有延迟。** 例如，如果你对长期进行预测或数据交付存在延迟。有时你需要额外的努力来标记新数据，以检查你的预测是否正确。在这种情况下，首先跟踪数据和目标漂移作为早期警告是有意义的。

**其次，需要跟踪的不仅仅是模型质量，还要跟踪相关的业务KPI。** ROC AUC的下降并不会直接说明它对例如营销转化的影响程度。将模型质量与业务指标关联起来，或找到一些可解释的代理指标是至关重要的。

**第三，你的质量指标应该适应用例。** 例如，如果你有不平衡的类别，准确率指标远非理想。在回归问题中，你可能会关注误差的符号。因此，你不仅要跟踪绝对值，还要跟踪误差分布。区分偶发的异常值和真正的衰退也至关重要。

所以，明智地选择你的指标！

![图片](../Images/8439a2a6935b22fb1dd1563563b1cb95.png)

*我们的目标是跟踪模型服务的效果以及在出现问题时如何调试。*

一个开源工具可以检查：[*Evidently*](https://github.com/evidentlyai/evidently)。

**5\. 按段性能**

对于许多模型来说，上述监控设置已经足够。但如果你处理的是更关键的用例，还有更多项目需要检查。

例如，模型在哪些地方犯错更多，在哪些地方表现最好？

你可能已经知道一些需要跟踪的特定段落：例如，高端客户与整体客户基础的模型准确性。这将需要为你定义的段落内的对象计算的定制质量指标。

在其他情况下，主动寻找低性能的段落可能更有意义。想象一下，你的房地产定价模型在特定地理区域中一贯建议高于实际的报价。这是你需要注意的！

根据用例，我们可以通过在模型输出上添加后处理或业务逻辑来解决。或者通过重建模型以考虑低性能段落。

![图片](../Images/66ca85daea3a3aed3b32bb11d84053f1.png)

*我们的目标是超越整体性能，理解模型在特定数据切片上的质量。*

**6\. 偏差/公平性**

当涉及到金融、医疗、教育以及其他模型决策可能产生严重影响的领域时，我们需要更加仔细审查我们的模型。

例如，模型性能可能会因不同的群体在训练数据中的表现而有所不同。模型创建者需要意识到这种影响，并与监管者和利益相关者一起拥有减轻不公平的工具。

为此，我们需要跟踪适当的指标，例如准确率的平衡。这适用于模型验证和持续的生产监控。所以，仪表板上再增加一些指标吧！

*我们的目标是确保所有子群体的公平对待并跟踪合规性。*

一个开源工具可以检查：[*Fairlearn*](https://github.com/fairlearn/fairlearn)。

**7\. 异常值**

我们知道模型会犯错。在一些用例中，比如广告定向，我们可能不在意个别输入是否看起来奇怪或正常。只要它们没有构成模型失败的有意义的段落就可以！

在其他应用中，我们可能希望了解每个这样的案例。为了最小化错误，我们可以设计一套规则来处理异常值。例如，将它们送去人工审查，而不是做自动决策。在这种情况下，我们需要一种检测和标记这些异常值的方法。

*我们的目标是标记模型预测可能不可靠的异常数据输入。*

一个开源工具检查：[*Seldon Alibi-Detect*](https://github.com/SeldonIO/alibi-detect)

![Image](../Images/0bcc5f81d4c8b8260764e402db3ec31d.png)

监控可能听起来很无聊。但它对于让机器学习在现实世界中发挥作用是至关重要的。不要等到模型失败才创建你的第一个仪表板！

[**艾梅莉·德拉尔**](https://twitter.com/EmeliDral)是Evidently AI的联合创始人兼首席技术官，她在这里创建分析和监控机器学习模型的工具。此前，她共同创办了一家工业AI初创公司，并担任Yandex Data Factory的首席数据科学家。她还是Coursera机器学习和数据分析课程的联合作者，拥有超过100,000名学生。

[**埃琳娜·萨穆伊洛娃**](https://twitter.com/elenasamuylova/)是Evidently AI的联合创始人兼首席执行官。此前，她共同创办了一家工业AI初创公司，并在Yandex Data Factory领导业务发展。自2014年以来，她与从制造业到零售业的公司合作，提供基于机器学习的解决方案。在2018年，埃琳娜被Product Management Festival评选为欧洲50位女性产品经理之一。

**相关：**

+   [机器学习系统设计：斯坦福免费课程](/2021/02/machine-learning-systems-design-free-stanford-course.html)

+   [MLOps: 模型监控101](/2021/01/mlops-model-monitoring-101.html)

+   [如何使用MLOps制定有效的AI战略](/2021/01/mlops-effective-ai-strategy.html)

### 更多相关话题

+   [成为优秀数据科学家所需的5项关键技能](https://www.kdnuggets.com/2021/12/5-key-skills-needed-become-great-data-scientist.html)

+   [每个初学者数据科学家都应该掌握的6个预测模型](https://www.kdnuggets.com/2021/12/6-predictive-models-every-beginner-data-scientist-master.html)

+   [2021年最佳ETL工具](https://www.kdnuggets.com/2021/12/mozart-best-etl-tools-2021.html)

+   [停止学习数据科学以寻找目标，并以寻找目标来……](https://www.kdnuggets.com/2021/12/stop-learning-data-science-find-purpose.html)

+   [数据科学学习统计的顶级资源](https://www.kdnuggets.com/2021/12/springboard-top-resources-learn-data-science-statistics.html)

+   [成功数据科学家的5个特征](https://www.kdnuggets.com/2021/12/5-characteristics-successful-data-scientist.html)
