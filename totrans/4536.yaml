- en: 'Market Basket Analysis: A Tutorial'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2019/12/market-basket-analysis.html](https://www.kdnuggets.com/2019/12/market-basket-analysis.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[comments](#comments)![Figure](../Images/d8cffe73aa22d352dfae295b5fd4ae89.png)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Source: [oracle.com](https://blogs.oracle.com/datascience/overview-of-traditional-machine-learning-techniques)'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: The lifeblood of retail businesses has always been sales. A retailer can never
    assume that his customers know all of his offerings. But rather, he must make
    the effort to present all applicable options in way which increases customer engagement
    and increase sales.
  prefs: []
  type: TYPE_NORMAL
- en: '**Association Rule Mining**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Association Rule Mining is used when you want to find an association between
    different objects in a set, find frequent patterns in a transaction database,
    relational databases or any other information repository. The applications of
    Association Rule Mining are found in Marketing, Basket Data Analysis (or Market
    Basket Analysis) in retailing, clustering and classification.
  prefs: []
  type: TYPE_NORMAL
- en: 'The most common approach to find these patterns is Market Basket Analysis,
    which is a key technique used by large retailers like Amazon, Flipkart, etc to
    analyze customer buying habits by finding associations between the different items
    that customers place in their “shopping baskets”. The discovery of these associations
    can help retailers develop marketing strategies by gaining insight into which
    items are frequently purchased together by customers. The strategies may include:'
  prefs: []
  type: TYPE_NORMAL
- en: Changing the store layout according to trends
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customer behavior analysis
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Catalog design
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cross marketing on online stores
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What are the trending items customers buy
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customized emails with add-on sales etc..
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Online retailers and publishers can use this type of analysis to:'
  prefs: []
  type: TYPE_NORMAL
- en: Inform the placement of content items on their media sites, or products in their
    catalog
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Deliver targeted marketing (e.g. emailing customers who bought products specific
    products with other products and offers on those products that are likely to be
    interesting to them.)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Difference between Association and Recommendation**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Association rules do not extract an individual's preference, rather find relationships
    between sets of elements of every distinct transaction. This is what makes them
    different than Collaborative filtering which is used in recommendation systems.
  prefs: []
  type: TYPE_NORMAL
- en: To understand it better take a look at below snapshot from amazon.com and you
    notice 2 headings “Frequently Bought Together” and the “Customers who bought this
    item also bought” on each product’s info page.
  prefs: []
  type: TYPE_NORMAL
- en: '**“Frequently Bought Together” → Association**'
  prefs: []
  type: TYPE_NORMAL
- en: '**“Customers who bought this item also bought” → Recommendation**'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/fcabe1df97ca31906d326ecaa0e18354.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now to be very frank Market Basket Analysis is *stupid* simple. It really is:
    you’re effectively just looking at the likelihood of different elements occurring
    together. There’s more to it than that, but that’s the basis of this technique.
    We’re really just interested in learning how often things go together and how
    to predict *when* things will go together.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Apriori Algorithm**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Apriori algorithm assumes that any subset of a frequent itemset must be frequent.
    Its the algorithm behind Market Basket Analysis.
  prefs: []
  type: TYPE_NORMAL
- en: Say, a transaction containing {Grapes, Apple, Mango} also contains {Grapes,
    Mango}. So, according to the principle of Apriori, if {Grapes, Apple, Mango} is
    frequent, then {Grapes, Mango} must also be frequent.
  prefs: []
  type: TYPE_NORMAL
- en: Here is a dataset consisting of six transactions. Each transaction is a combination
    of 0s and 1s, where 0 represents the absence of an item and 1 represents the presence
    of it.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure](../Images/771ebaf19183ec20aea0645451eb5484.png)'
  prefs: []
  type: TYPE_IMG
- en: Dataset
  prefs: []
  type: TYPE_NORMAL
- en: 'In order to find out interesting rules out of multiple possible rules from
    this small business scenario, we will be using the following matrices:'
  prefs: []
  type: TYPE_NORMAL
- en: '**1\. Support:** Its the default popularity of an item. In mathematical terms,
    the support of item **A** is nothing but the ratio of transactions involving **A** to
    the total number of transactions.'
  prefs: []
  type: TYPE_NORMAL
- en: Support(Grapes) = (Transactions involving Grapes)/(Total transaction)
  prefs: []
  type: TYPE_NORMAL
- en: Support(Grapes) = 0.666
  prefs: []
  type: TYPE_NORMAL
- en: '**2\. Confidence: **Likelihood that customer who bought both **A **and** B**.
    Its divides the number of transactions involving both **A** and **B** by the number
    of transactions involving **B**.'
  prefs: []
  type: TYPE_NORMAL
- en: Confidence(A => B) = (Transactions involving both A and B)/(Transactions involving
    only A)
  prefs: []
  type: TYPE_NORMAL
- en: Confidence({Grapes, Apple} => {Mango}) = Support(Grapes, Apple, Mango)/Support(Grapes,
    Apple)
  prefs: []
  type: TYPE_NORMAL
- en: = 2/6 / 3/6
  prefs: []
  type: TYPE_NORMAL
- en: = 0.667
  prefs: []
  type: TYPE_NORMAL
- en: '**3\. Lift : **Increase in the sale of **A** when you sell **B**.'
  prefs: []
  type: TYPE_NORMAL
- en: Lift(A => B) = Confidence(A, B) / Support(B)
  prefs: []
  type: TYPE_NORMAL
- en: Lift ({Grapes, Apple} => {Mango}) = 1
  prefs: []
  type: TYPE_NORMAL
- en: So, likelihood of a customer buying both **A** and **B** together is ‘lift-value’
    times more than the chance if purchasing alone.
  prefs: []
  type: TYPE_NORMAL
- en: '**Lift (A=> B)** = 1 means that there is no correlation within the itemset.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Lift (A => B)** > 1 means that there is a positive correlation within the
    itemset, i.e., products in the itemset, **A***, *and **B**, are more likely to
    be bought together.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Lift (A => B)** < 1 means that there is a negative correlation within the
    itemset, i.e., products in itemset, **A***, *and **B**, are unlikely to be bought
    together.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Association Rule-based algorithms are viewed as a two-step approach:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Frequent Itemset Generation:** Find all frequent item-sets with support >=
    pre-determined min_support count'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Rule Generation:** List all Association Rules from frequent item-sets. Calculate
    Support and Confidence for all rules. Prune rules that fail min_support and min_confidence
    thresholds.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Limitation of Apriori algorithm**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Frequent Itemset Generation is the most computationally expensive step because
    the algorithm scans the database too many times, which reduces the overall performance.
    Due to this, the algorithm assumes that the database is Permanent in the memory.
  prefs: []
  type: TYPE_NORMAL
- en: 'Also, both the time and space complexity of this algorithm are very high: O(2^{|D|}),
    thus exponential, where |D| is the horizontal width (the total number of items)
    present in the database.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Optimizing Apriori algorithm**'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '![](../Images/285907865fc0ec4bc11f1749fc198a05.png)'
  prefs: []
  type: TYPE_IMG
- en: '**Transaction reduction**'
  prefs: []
  type: TYPE_NORMAL
- en: 'We can optimize the existing apriori algorithm by which it will take less time
    and also works with less memory using these methods:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Hash-based itemset counting:** A k-itemset whose corresponding hashing bucket
    count is below the threshold cannot be frequent.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Transaction reduction:** A transaction that does not contain any frequent
    k-itemsets useless in subsequent scans.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Partitioning: **An itemset that is potentially frequent in DB must be frequent
    in at least one of the partitions of DB.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Sampling:** Mining on a subset of given data, lower support threshold + a
    method to determine the completeness.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Dynamic itemset counting: **add new candidate itemsets only when all of their
    subsets are estimated to be frequent.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implementation of Apriori algorithm — Market basket analysis using python
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The Retailer of a retail store is trying to find out an association rule between
    20 items, to figure out which items are more often bought together so that he
    can keep the items together in order to increase sales.
  prefs: []
  type: TYPE_NORMAL
- en: You can download the dataset from [here](https://drive.google.com/open?id=1kP8SLP1dRKDWXVRInRwHRcW91LxowtTq).
  prefs: []
  type: TYPE_NORMAL
- en: '**Environment setup:** Python 3.x'
  prefs: []
  type: TYPE_NORMAL
- en: pip install apyori
  prefs: []
  type: TYPE_NORMAL
- en: Load all the required libraries and the dataset.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '![Figure](../Images/7f54db435bc6c6402be40db98c3ce322.png)'
  prefs: []
  type: TYPE_IMG
- en: Dataset
  prefs: []
  type: TYPE_NORMAL
- en: Now, Convert Pandas DataFrame into a list of lists.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Build the Apriori model.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Print rules:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Let us take a look at one rule:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: The support value for the first rule is 0.003\. This number is calculated by
    dividing the number of transactions containing ‘avocado,’ ‘spaghetti,’ and ‘milk’
    by the total number of transactions.
  prefs: []
  type: TYPE_NORMAL
- en: The confidence level for the rule is 0.416, which shows that out of all the
    transactions that contain both ‘avocado’ and ‘spaghetti’, 41.6 percent contain
    ‘milk’ too.
  prefs: []
  type: TYPE_NORMAL
- en: The lift of 1.241 tells us that ‘milk’ is 1.241 times more likely to be bought
    by the customers who buy both ‘avocado’ and ‘spaghetti’ compared to the default
    likelihood sale of ‘milk.’
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In addition its popularity as a retailer’s technique, Market Basket Analysis
    is applicable in many other areas:'
  prefs: []
  type: TYPE_NORMAL
- en: In the manufacturing industry for predictive analysis of equipment failure.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In Pharmaceutical/Bioinformatics for the discovery of co-occurrence relationships
    among diagnosis and pharmaceutical active ingredients prescribed to different
    patient groups.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In Banking/Criminology for fraud detection based on credit card usage data.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For analyzing customer behavior by associating purchases with demographic and
    socio-economic data.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: More and more organizations are discovering ways of using market basket analysis
    to gain useful insights into associations and hidden relationships. As industry
    leaders continue to explore the technique’s value, a predictive version of market
    basket analysis is making in-roads across many sectors in an effort to identify
    sequential purchases.
  prefs: []
  type: TYPE_NORMAL
- en: Congratulations! You have learned the Apriori algorithm, one of the most frequently
    used algorithms in data mining. You have learned all about Association Rule Mining,
    its applications, and its applications in retailing called **Market Basket Analysis**.
  prefs: []
  type: TYPE_NORMAL
- en: Well, that is all for this article. I hope you guys have enjoyed reading it,
    please share your suggestions/views/questions in the comment section.
  prefs: []
  type: TYPE_NORMAL
- en: Thanks for reading !!!
  prefs: []
  type: TYPE_NORMAL
- en: '**Bio: [Nagesh Singh Chauhan](https://www.linkedin.com/in/nagesh-singh-chauhan-6936bb13b/)**
    is a Data Science enthusiast. Interested in Big Data, Python, Machine Learning.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Original](https://towardsdatascience.com/market-basket-analysis-978ac064d8c6).
    Reposted with permission.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Related:**'
  prefs: []
  type: TYPE_NORMAL
- en: '[Frequent Pattern Mining and the Apriori Algorithm: A Concise Technical Overview](/2016/10/association-rule-learning-concise-technical-overview.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Top 10 Machine Learning Algorithms for Beginners](/2017/10/top-10-machine-learning-algorithms-beginners.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[A Friendly Introduction to Support Vector Machines](/2019/09/friendly-introduction-support-vector-machines.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Market Data and News: A Time Series Analysis](https://www.kdnuggets.com/2022/06/market-data-news-time-series-analysis.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[KDnuggets News, June 29: 20 Basic Linux Commands for Data Science…](https://www.kdnuggets.com/2022/n26.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Unlock DataOps Success with DataOps.live - Featured in Gartner…](https://www.kdnuggets.com/2023/07/dataopslive-unlock-dataops-success-featured-gartner-market-guide.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Unlock DataOps Success with DataOps.live: Featured in Gartner Market Guide!](https://www.kdnuggets.com/2023/07/dataopslive-unlock-dataops-success-featured-gartner-market-guide-2.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Data Labeling for Machine Learning: Market Overview, Approaches, and Tools](https://www.kdnuggets.com/2021/12/data-labeling-ml-overview-and-tools.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[4 Career Lessons That Helped Me Navigate the Difficult Job Market](https://www.kdnuggets.com/2023/05/4-lessons-made-difference-navigating-current-job-market.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
