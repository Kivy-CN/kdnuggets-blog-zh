# 树莓派物联网项目：乐趣与利润

> 原文：[https://www.kdnuggets.com/2018/09/raspberry-pi-iot-projects-fun-profit.html](https://www.kdnuggets.com/2018/09/raspberry-pi-iot-projects-fun-profit.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/09/raspberry-pi-iot-projects-fun-profit.html?page=2#comments)

**由[鲁本斯·津布雷斯](Data Scientist)，数据科学家**

软件与硬件之间的前沿领域令人着迷。我们，数据科学家，习惯于开发用于商业目的的机器学习算法，这些模型的输出通常以利润、成本节约甚至无形的结果（如客户满意度）来衡量。当然，我们可以使用如Power BI、Tableau或Kibana、Quick Sight、Tago等仪表板可视化我们的模型输出。但看到我们模型在现实世界中的结果，超越屏幕的视觉感受，确实很有成就感。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升您的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持您的组织的IT工作

* * *

我一直在金融和电信领域从事物联网工作。可以轻松地在仪表板中生成关于系统故障的警报，比如基站（BTS）的饱和，这些是电信信号传递的节点。现在想象一下，除了仪表板中的警报外，我们还自动将电信数据流量重定向到不同的路径，以便销售点（POS）始终保持连接。这将提升收单商的利润和商家的满意度。我们甚至可以在现实世界中调整机器的设置。

在物联网项目中，我们与硬件紧密合作。设备如销售点、功率和水表、甘蔗磨碎机、Libelium套件（用于农业）、电梯、健康设备发送的遥测数据可以被分析，以开发预测性维护模型，从而帮助企业降低成本、提高效率，同时优化物流。在这些情况下，连接可以通过SIM卡、Wi-Fi、蓝牙或无线电信号（LoRa）实现。

IoT解决方案的一部分是网关。它在设备（温度、湿度传感器）和云之间进行通信中介。在我之前的帖子中，我解释了如何将笔记本电脑转变为IoT设备，提供了如何将数据从设备发送到AWS，从设备到仪表盘的端到端解决方案的细节 ([kdnuggets.com/2018/06/zimbres-iot-aws-machine-learning-dashboard.html](/2018/06/zimbres-iot-aws-machine-learning-dashboard.html))。

在这篇文章中，我将解释如何在命令行中运行IoT项目，而不使用图形界面，使用Ubuntu Core在Raspberry Pi 3上。更简单的方法是使用Raspbian，它为你的项目提供了图形界面。Raspbian是一个基于Debian的计算机操作系统。然而，我决定尝试Ubuntu Core，因为在IoT中，安全性应当是主要关注点。Ubuntu Core可以用于数字标牌、机器人、无人机和边缘网关。一个更具挑战性和安全性的决定。

下图展示了常规Linux系统和Ubuntu Core之间的差异：

![Image](../Images/a5e7f3adc3484ae89e68266b09368abe.png)

Ubuntu Core是一个轻量级系统，其核心在于“安全”。它由snap组成，“自包含、隔离和保护的代码片段”。即使使用ESC :w !sudo tee %在vim命令中，也很难修改系统中的只读文件。

由于这是一个ARM系统，安装机器学习库时会有些不同，因为这种系统有一些特定的软件包，许多依赖项没有包含，连“wget”也没有。所以我们开始吧。当你购买Raspberry时，它没有电源（右上方）和SD卡（右侧突出）。Model 3 B配有4个USB接口和一个以太网接口。它还包含HDMI、音频和摄像头接口。在这个项目中，我们将不使用鼠标，监视器、以太网电缆和键盘仅在系统首次运行时用于设置互联网连接。

![Image](../Images/f27e7c1f698f424d0ea244fcd8ec074f.png)

首先需要在SD卡（micro）上安装操作系统。因此，从他们的网站下载Ubuntu Core镜像：[http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-pi3.img.xz](http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-pi3.img.xz)

然后，下载Etcher，以便将镜像烧录到卡上：[https://etcher.io/](https://etcher.io/)

现在，你需要生成私钥和公钥，这些将被上传到你的Ubuntu One账户（https://login.ubuntu.com/）。

```py

mkdir ~/.ssh
chmod 700 ~/.ssh
ssh-keygen -t rsa -b 4096

```

然后，复制密钥代码并粘贴到你的Ubuntu One账户中：

```py

ssh-rsa ABCDEF1234512345 user@Dell

```

将卡插入Raspberry并打开电源开关。瞧，系统将启动：

![Image](../Images/ffa8de6308b05378de320279508b99ee.png)

这将在第一次运行时需要几秒钟，并且你将被引导到网络配置。配置DHCP以及你的Wi-Fi用户名和密码。然后，Ubuntu Core将提供你应该ssh的地址。

以防万一，确保端口22（用于ssh）是开放的：

```py

sudo ufw allow 22

```

现在，我们将把密钥复制到客户端计算机的新目录中，.ssh：

```py

ssh-keygen -R 192.168.15.XXX
mkdir .ssh
cp id_rsa ~/.ssh/id_rsa
cp id_rsa.pub ~/.ssh/id_rsa.pub
cd .ssh

```

我们准备通过ssh连接到树莓派。运行：

```py

ssh -vvv user@192.168.15.XXX 
Or
ssh -vvv 192.168.15.XXX -l user

```

-vvv命令将提供有关ssh连接的详细信息。连接时，会弹出一个窗口要求你输入密码。你已连接，登录将发生变化：

`user@localhost:~$`

此时，你可以断开显示器、键盘和以太网电缆，因为通信将通过Wi-Fi完成，整个项目将通过命令行进行。现在，让我们安装snap classic，一个容器，我们将在其中安装机器学习库：

```py

sudo snap install classic --edge --devmode
sudo classic

Creating classic environment
Parallel unsquashfs: Using 4 processors
11111 inodes (11975 blocks) to write
[===========================================================/] 11975/11975 100%

(classic)user@localhost:~$ sudo apt update
(classic)user@localhost:~$ sudo apt install snapcraft build-essential git

```

此时，你可以返回到我之前的文章，其中测量了CPU温度并发送到Amazon AWS（kdnuggets.com/2018/06/zimbres-iot-aws-machine-learning-dashboard.html），或者我们可以继续：

```py

export LC_ALL=C
source .bashrc
pip install setuptools
pip install AWSIoTPythonSDK

```

![图片](../Images/a08a59dea7e2e98d470f4cf1e7105b59.png)

在Ubuntu Core中，生成和编辑笔记本并不简单。你不能打开Jupyter、Spyder或甚至记事本来创建新文件，因为没有图形界面。你必须使用“touch”命令来创建文件：

```py

touch AWS_Send_0.py

```

创建新文件后，你可以使用“vim”命令打开并编辑文件，并粘贴代码：

```py

vi AWS_Send_0.py

```

输入“i”然后CTRL+SHIFT+V，将代码粘贴到： https://github.com/RubensZimbres/Repo-2018/blob/master/CPU%20Temperature%20-%20IoT%20Project/AWS_Send_test.py

之后，输入：

```py

ESC :wq ENTER

```

![图片](../Images/d61fc85b7395624fe3013c0417487225.png)

这将保存文件。记得将rootCA.pem + *.crt + *private.pem.key + *.public.pem.key复制到你的树莓派上，以正确访问AWS IoT Core。

运行以下命令将树莓派CPU温度发送到AWS：

```py

python AWS_Send_0.py -e a23312345.iot.us-east-1.amazonaws.com -r rootCA.pem -c 123412345-certificate.pem.crt -k 12345-private.pem.key -id arn:aws:iot:us-east-1:1123112345:thing/CPUDevice -t 'Topic'

```

你将通过IoT Core仪表板检查你的连接：

![图片](../Images/3315e307f68baac8f4eaef3f30b8d64c.png)

重要的是要注意你在Ubuntu经典环境下的chroot中运行Python。因此，需要运行“sudo python”以访问树莓派上的GPIO（通用输入/输出）。

### 更多相关主题

+   [使用tqdm在Python中创建进度条，乐趣与利润并存](https://www.kdnuggets.com/2022/09/progress-bars-python-tqdm-fun-profit.html)

+   [适合初学者的有趣Python项目！](https://www.kdnuggets.com/2022/10/beginner-friendly-python-projects-fun.html)

+   [短小有趣的课程，让你迅速了解生成性AI](https://www.kdnuggets.com/short-and-fun-courses-to-get-you-up-to-speed-about-generative-ai)

+   [AIoT革命：AI和IoT如何改变我们的世界](https://www.kdnuggets.com/2022/07/aiot-revolution-ai-iot-transforming-world.html)

+   [KDnuggets新闻，7月27日：AIoT革命：AI和IoT如何…](https://www.kdnuggets.com/2022/n30.html)

+   [机器学习项目的简单快速数据流](https://www.kdnuggets.com/2022/11/simple-fast-data-streaming-machine-learning-projects.html)
