# 为有效的 Tableau 和 Power BI 仪表板准备数据

> 原文：[https://www.kdnuggets.com/2022/06/prepare-data-effective-tableau-power-bi-dashboards.html](https://www.kdnuggets.com/2022/06/prepare-data-effective-tableau-power-bi-dashboards.html)

商业智能（BI）技术如 Power BI 和 Tableau 用于收集、集成、分析和展示商业信息。这些工具可以帮助你分析商业数据并可视化信息，以获得有价值的见解。

创建一个提供见解的仪表板可以是一个快速的过程（特别是当你对所选择的 BI 工具有一定的专业知识后）。你可能已经是专家，但仍会发现当你尝试做以下一项（或多项）时，事情会变得非常棘手和耗时：

+   连接多个数据源

+   玩转数据类型和数据分类

+   创建将数据源混合在一起的数据模型

+   创建一个涉及多个聚合层级的可视化

+   自动化你的仪表板刷新

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌 IT 支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你所在组织的 IT

* * *

BI 工具可以在展示数据、创建用户视图，甚至有时执行行级安全方面表现出色。现在，PowerBI 和 Tableau 都提供了针对上述复杂用例的功能。这些功能可以帮助构建一次性的快速分析，但在构建有效、可扩展和稳定的可视化时，面对广泛且要求高的受众就显得不足够。大多数情况下，在完成一个临时分析后，数据分析师需要将其转化为稳定的报告，这就面临着以智能方式自动化工作的挑战。

**诀窍？**

**将数据准备工作与分析工作解耦，并坚持使用 BI 工具进行可视化和格式化。** 通过将过程简化为输入和输出，你将为自己未来的心理健康和客户满意度进行投资。解耦意味着每一步都在最合适的工具中完成，然后自动化，最终这些拼图的部分是简单且彼此独立的。

**很好，但是怎么做？**

我已经列出了分离数据旅程阶段所需的步骤，并使每个步骤在之后简单自动化。**请注意，无论你的技术背景如何，你都应该能够遵循这些步骤**（从基本的 Excel 文件到复杂的 Python 流程）。你可以随时调整你的方法，以拆解你的过程，并使你未来的自己（或你的备份/替代人员）能够重复/更新/更改它。没有人应该在每次想做小修改时都需要剖析一个变成黑箱的文件！

# 了解最终的仪表板需求

从仔细倾听开始。客户和最终用户（或产品负责人）会带来他们的愿望清单和必需品。他们会关注他们想看到的最终效果和格式。作为报告的负责人，你需要记住的是，报告的目的是：

+   分析数据

+   得出结论

+   做出更好的决策

因此，当他们说“我需要 A，并且应该显示 B”时，你的下一个问题不应该是：

+   什么颜色？

+   什么大小？

+   什么类型的图表？

相反，最好找出你的产品负责人为什么想要看到那个指标。问问自己：他们想要达成什么目标？当你了解他们的优先级时，你可以在开始分析他们的数据之前回答一些重要问题，例如：

+   这是一次临时分析吗？

+   我想回答什么问题？

+   我的受众是谁？

+   他们习惯于什么细节级别？

+   这个报告是否有助于促进定期讨论？

+   那次讨论的格式是什么？

+   我如何确保这些讨论围绕解决问题展开？

（而不是关注数字的来源或它们对每个参与者的意义？）

这是信任发挥作用的地方。如果你的客户知道你理解他们的需求并花时间清理和优化他们的数据，他们会相信这些数据反映了他们的现实。最终，这就是每个客户想要的。可以信任的数据。

在这个过程的这个阶段，在经过几次对话后，你应该对所需的工作范围、仪表板的目的以及他们计划如何使用它有了更清晰的了解。这样你就可以开始工作，并且要尽快完成（你可以确定，花在这个阶段的时间越多，愿望清单上会增加更多的附加需求）

# 访问数据

这是你多任务处理技能受到考验的阶段。确保你提出一个类似这样的清单：

| **数据源** | **所需频率** | **目的** | **访问者** | **状态** | **临时解决方案** |
| --- | --- | --- | --- | --- | --- |
| 数据源 A | 每日更新 | 需要用于主页 KPI：- A - B - C | 团队/人员 | 已请求/票证开放/等待批准/已批准/… | 使用提取数据 |
| 数据源 B | 每周更新 | 需要用于安全层（用户和角色） | 团队/人员 |  | 使用测试环境/虚拟数据 |
| 源 C | 每月更新 | 实现实际与目标对比功能所需 | 团队/人员 |  | 不可用 |

这将大大有助于跟踪你想要什么和不想要什么，同时保护你免受瓶颈困扰。商业中最不愿听到的就是借口，所以提供事实吧。这是我拥有的和我没有的，以及在等待它时我正在使用的。你的产品负责人将会知道如何准确帮助你，因为他们希望你迅速推进到一个完成的解决方案。他们还会知道哪些数据已被提供给你作为替代方案（提取数据、测试/虚拟数据等……），以便你能在没有最终数据的情况下继续工作。

最重要的是，这展示了资源的机智（在最终访问待定时仍能工作）和透明度（他们准确知道为什么某个部分的解决方案尚未构建或在处理非生产数据）。保持合作伙伴的参与和建立信任要求你具备机智和透明度。这将为你在未来阶段节省许多麻烦。

# 数据摄取（获取）

从快速胜利开始，确保在流程早期有一个简单的演示，并专注于拥有一些数据。获取最原始的数据，而不是那些无人负责的处理过的数据。如果原始数据过大，那么就使用它的一个子集。一个典型的错误是过早地将数据聚合，直到太晚时才意识到需要更多。在演示时，摄取每个数据源的原始子集。

在这一点上（而不是更晚的时候！），记录和文档你所获取的内容，并始终告知客户你已获得足够的数据来构建第一个演示。有些仪表板可能需要二十多个不同的数据源，结合多种方式，这些方式难以记住。在这里，摄取后，你开始建立你的ERD ([如何构建实体关系图](https://www.smartdraw.com/entity-relationship-diagram/))，或针对更简单的用例，[构建你的数据库图](https://www.smartdraw.com/entity-relationship-diagram/#ERDAutomated)以简单记录你拥有的（或计划拥有的）数据。无需花哨，你可以使用笔和纸、白板、数字白板工具（如Excalidraw、Microsoft Whiteboard、Visio、Google Draw……）或markdown ([mermaid ERD](https://mermaid-js.github.io/mermaid/#/./entityRelationshipDiagram))，只要你理解你拥有的数据以及它们如何合并成最终的平面表格即可。

# 数据合并

这是你创造最大价值的地方。通过在数据之间建立强有力的关系，你构建了干净且完整的操作数据集，使最终用户的工作更加轻松。理想情况下，他们可以在几秒钟内连接到产品（使用 SQL、Python、Tableau、PowerBI 等），并直接开始分析。这不是一项容易的任务，它取决于你在第一步（*理解最终需求*）做得有多好。像处理任何棘手任务一样，先将其拆解为步骤，并使用一个 [可视化示例：](https://wcs.smartdraw.com/entity-relationship-diagram/img/basic-database-erd-diagram.png?bn=15100111822)

![在当前示例中，我们有五个数据集（UserAgent、Session、Event、EventType、EventData）](../Images/67a10cb1a9f414f7ba14ec03668c02fb.png)

在当前示例中，我们有五个数据集（UserAgent、Session、Event、EventType、EventData）

使用你的可视化工具（基于前一步骤构建）并确保每个原始数据集都有一个唯一的键，可以用来与其他数据集建立连接（这些可以是来自数据源的自定义 ID，或自动生成的键）。你可能需要清理（注意数据类型！）某些字段，并生成你的键（例如，添加一个连接列）以确保连接正常工作。

请注意，在此示例中，每个 UserAgent 都有一个 ID，每个会话都有自己的 ID，并且还有它关联的 UserAgentID。在会话期间，会发生一个事件（新的 ID）。花一点时间识别出哪些是你的核心数据集，即那些处于你将要报告的同一级别的数据集？这将帮助你建立所有的连接并在需要时进行联接。请参见以下一些场景：

+   UserAgent 层级分析：最终用户希望拥有一个仪表盘，允许他们了解出现了多少个 UserAgent 以及它们的参与情况（每个会话的会话数和事件数……）。你需要以“UserAgent”数据集作为核心，然后将 Sessions 和 Events 作为补充信息，以帮助你回答有关用户的问题。

+   会话分析：最终用户希望拥有一个仪表盘，允许他们了解发生了多少个会话，也许还有一些用户或与这些会话相关的事件的特征。在这里，你的核心数据集将是“Session”，并与“Event”、“EventType”、“EventData”进行联接……

+   事件分析：最终用户希望拥有一个仪表盘，允许他们了解用户会话期间发生的最常见事件。在这里，核心数据集将是“Event”，并与“Event Type”、“Sessions”、“EventData”进行联接……

记住**，**你的仪表板可能需要以上所有内容。你可能需要关注不同的数据集，因此如果你正确完成了第一步，你会知道你需要多个操作表作为产品的一部分。执行你的连接（使用 SQL、Python、数据处理工具或甚至在最初阶段使用 Excel），并定期检查记录数，以防止在连接表时生成虚假行，并创建最简单的操作表版本。

将所有终端用户要求的计算直接添加到模型中（而不是你的可视化工具上）。每次用户需要使用这些计算数据时，他们将直接从数据集中获取，而不是从仪表板导出。这也更具扩展性，并避免了由多个用户构建的不同仪表板之间的数据差异。

现在你有了初步操作数据，回到多任务处理。你可以构建一个快速演示来让终端用户使用，以便给你提供数据准确性的反馈，同时你并行处理下一步。

# 清理和格式化数据。

首先，快速浏览数据，以了解你使用了什么数据。然后查看（例如，前10行和最后10行），注意细节。这包括：

+   数据类型（数值、文本、日期、布尔值、数组）。

+   数据格式（小数、整数）。

+   相同数据类型的所有列原始数据格式是否一致（例如，所有日期列是否有相同的日期格式）。

+   是否是数值（定量）和类别（定性）数据。

+   如果是文本数据 -> 它是什么？城市名称？产品代码？

这些都有助于理解数据之间的关系，确定数据需要什么样的准备/处理，并调整可视化技术。记得查找空值、数字/文本、语言之间的不同格式（对于自由文本）和HTML标签清理。

通过过滤或快速摘要完成这项工作。所有这些都会避免在可视化过程中繁琐的步骤，如果数据清晰且格式正确，准备可视化只需几次点击。

其次，深入了解细节。根据数据类型，数据清理的方法不同，可能存在不同种类的“异常值”。对特定数据类型要查看的内容总结：

**日期**

+   检查数据存储的数据类型。如果数据与日期无关，存在例如日期被处理为数值的风险，那么开头的零可能会被删除。

+   保持一致的格式（例如，'YYYY-MM-DD'）。

+   日期只应在有意义的情况下使用（例如，出生日期不应是未来的）。

**文本**

+   如果文本很长（例如推文），使用分词方法。

+   确保名称的一致性（例如，数据可能包含 'USA'、'United States of America' 和 'U.S.A.'，这些都是指同一事物）。

**数值**

+   保持格式一致（例如，保留两位小数，整数应表现为整数，而非小数等）

+   检测异常值（例如通过可视化、Z-score 方法、IQR 方法，异常值可能对指标有显著影响，这就是为什么重要的是要思考它们为何出现以及是否需要删除/修正它们，或者它们是否包含重要且真实的信息，这可能对业务（例如欺诈）至关重要）-> 异常值是一个庞大的话题

+   逗号或句号 -> 保持一致

同样，如果你有分类数据，确保类别有意义，并且没有两个类别适用于同一事物。记得记录你创建/调整的类别，以便数据用户能准确了解其含义

**第三，提供列名。**

+   在处理/建模时记得使用简单、描述性的列名，避免词间的空格和特殊符号，以免给自己带来不必要的麻烦

+   对于业务使用的最终模型，使用他们所需的列名

+   尽量遵循 [命名规范](https://www.sqlshack.com/learn-sql-naming-conventions/)（或按照指南创建自己的规范），记录下来并让你的数据用户熟悉它。在数据集之间保持一致，你将逐渐在你的组织中建立起清晰数据的文化，大家都能理解

如果你理解你的产品负责人的优先事项，像 Power BI 和 Tableau 这样的商业智能技术可以优化和准备数据用于 Tableau 和 PBI 仪表板。一旦你获得数据，你可以进行摄取、组合、清理和格式化。

此时，你可能已经准备好跳到你的 BI 工具（PowerBI、Tableau……）中，将所有这些步骤整合到一个文件中，连接到数百万个原始提取数据。**抵制这个冲动**，**相信解耦的过程**！记住，简单是这里的关键词

+   听，听，听。

+   制作作为参考的列表

+   将事情分解成更小的步骤（数据摄取、数据验证、数据清理……）

+   对于数据处理，使用为自动化数据建模而设计的工具

    （Python、SQL、可视化 SQL，甚至 Excel，如果这是你熟悉的）

+   最终仪表板要坚持使用可视化工具

别忘了记录你的进展！你将转到下一个有趣的项目，很可能会忘记所有细节。虽然这篇文章没有覆盖这个内容，但可以看看 [如何构建自解释的流程](https://vertabelo.com/blog/data-modeling-documentation/) 并在截止日期临近时节省时间。

> *“你的未来自我会感谢你！”*

**[Valeria Perluzzo](https://www.linkedin.com/in/valeriaperluzzo/)** 是 [dyvenia](http://dyvenia.com/) 的分析主管。

### 更多相关话题

+   [SQL 数据可视化：如何为图表和图形准备数据](https://www.kdnuggets.com/sql-for-data-visualization-how-to-prepare-data-for-charts-and-graphs)

+   [SQL 中的数据清理：如何为分析准备杂乱的数据](https://www.kdnuggets.com/data-cleaning-in-sql-how-to-prepare-messy-data-for-analysis)

+   [使用 AI 和分析引擎更快地准备时间序列数据](https://www.kdnuggets.com/2021/12/piexchange-faster-way-prepare-timeseries-data-ai-analytics-engine.html)

+   [如何为数据科学面试做好准备](https://www.kdnuggets.com/2022/12/prepare-data-science-interview.html)

+   [使用 Tableau 创建高效的综合数据源](https://www.kdnuggets.com/2022/05/create-efficient-combined-data-sources-tableau.html)

+   [10 个最常用的 Tableau 函数](https://www.kdnuggets.com/2022/08/10-used-tableau-functions.html)
