- en: Ten Key Lessons of Implementing Recommendation Systems in Business
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实施推荐系统的十个关键经验
- en: 原文：[https://www.kdnuggets.com/2022/07/ten-key-lessons-implementing-recommendation-systems-business.html](https://www.kdnuggets.com/2022/07/ten-key-lessons-implementing-recommendation-systems-business.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://www.kdnuggets.com/2022/07/ten-key-lessons-implementing-recommendation-systems-business.html](https://www.kdnuggets.com/2022/07/ten-key-lessons-implementing-recommendation-systems-business.html)
- en: 1\. Define a Goal that Really Contributes to the Business Tasks
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1\. 定义真正有助于业务任务的目标
- en: '* * *'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Our Top 3 Course Recommendations
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 我们的三大课程推荐
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity)
    - 快速进入网络安全职业生涯。'
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics)
    - 提升你的数据分析技能'
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport)
    - 支持你组织的IT'
- en: '* * *'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: The global task of the recommendation system is to select a shortlist of content
    from a large catalog that is most suitable for a particular user. The content
    itself can be different — from products in the online store and articles to banking
    services. FunCorp product team works with the most interesting kind of content
    — we recommend memes.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐系统的全球任务是从一个大型目录中挑选出最适合特定用户的内容。这些内容可以各不相同——从在线商店的产品和文章到银行服务。FunCorp 产品团队处理的是最有趣的内容——我们推荐的是表情包。
- en: To do this, we rely on the history of the user's interaction with the service.
    But “good recommendations” from a user perspective and from a business perspective
    are not always the same thing. For example, we found that increasing the number
    of likes that a user clicks thanks to more accurate recommendations does not affect
    retention, a metric that is important for our business. So we started focusing
    on models that optimize time spent in the app instead of likes.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了做到这一点，我们依赖于用户与服务互动的历史记录。但从用户和业务的角度来看，“好的推荐”并不总是相同的。例如，我们发现，通过更准确的推荐增加用户点击的点赞数并不会影响留存率，这是对我们业务很重要的指标。所以我们开始专注于优化在应用中的停留时间的模型，而不是点赞。
- en: 'That''s why it''s so important to focus on the most important goal for your
    business. Goals can be different, for example:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是为什么专注于你业务中最重要的目标如此重要。目标可以有所不同，例如：
- en: user retention,
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户留存，
- en: increased revenue,
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收入增加，
- en: cost reduction,
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 成本降低，
- en: and so on.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以此类推。
- en: The recommendation system will surely allow you to improve the user experience,
    and the user will take the targeted action faster and/or more often. What remains
    to be done is to make sure that you reach your business goals at the same time.
    Win-win! In our case, we saw a 25% increase in the relative number of smiles (likes)
    and an almost 40% increase in the viewing depth as a result of implementing a
    [recommendation system in our feed](https://medium.com/@FunCorp/putting-a-two-layered-recommendation-system-into-production-b8caaf61393d).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐系统肯定能让你改善用户体验，用户将更快和/或更频繁地采取目标行动。剩下的就是确保你同时实现你的业务目标。双赢！在我们的案例中，实施[我们资讯中的推荐系统](https://medium.com/@FunCorp/putting-a-two-layered-recommendation-system-into-production-b8caaf61393d)后，我们看到点赞数相对增加了25%，观看深度几乎增加了40%。
- en: Main goal in iFunny is to increase retention and you can see that sometimes
    we run experiments with a very destructive influence on retention.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: iFunny的主要目标是增加留存率，你会看到我们有时会进行一些对留存率有很大负面影响的实验。
- en: '![Define a Goal that Really Contributes to the Business Tasks](../Images/a4e2f2ba9e9af2f7e775a7aba567c00b.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![定义真正有助于业务任务的目标](../Images/a4e2f2ba9e9af2f7e775a7aba567c00b.png)'
- en: 2\. Find the Optimal User Touchpoint in the Product
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2\. 找到产品中最佳的用户接触点
- en: 'When you''ve decided on the global goal, you need to figure out what is the
    best way to display recommendations:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 当你确定了全球目标后，你需要弄清楚展示推荐的最佳方式是什么：
- en: in the feed — this is relevant for news sites or entertainment apps like our
    iFunny,
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在信息流中——这对新闻网站或像我们的iFunny这样的娱乐应用程序是相关的，
- en: push notifications,
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 推送通知，
- en: email newsletter,
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子邮件通讯，
- en: the section with personalized offers in a personal account,
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 个人账户中的个性化推荐部分。
- en: or other sections on the site/application.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或网站/应用程序上的其他部分。
- en: Many factors influence the choice of touchpoint — for example, the share of
    DAU in this point (for some users, push notifications may be disabled) or the
    complexity of integration with ML microservice.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 影响接触点选择的因素有很多——例如，此点的日活跃用户比例（对于某些用户，推送通知可能已被禁用）或与机器学习微服务的集成复杂性。
- en: In our case, an ineffective choice might look like this. The iFunny app has
    an Explore section where we collect a selection of the best memes of the week.
    One can collect such selections with ML, but only small amount of DAUs go to this
    section.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的例子中，无效的选择可能是这样的。iFunny 应用有一个探索部分，我们在其中收集每周最佳的表情包。可以用机器学习来收集这样的选择，但只有少量的日活跃用户会访问这个部分。
- en: '![Find the Optimal User Touchpoint in the Product](../Images/34e297fbe64ff67629b90dc4b542e9a4.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![在产品中找到最佳用户接触点](../Images/34e297fbe64ff67629b90dc4b542e9a4.png)'
- en: Using ML at this point is impractical.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 此时使用机器学习是不切实际的。
- en: The main rule here is to integrate ML where it will make the biggest increase
    in business metrics. Therefore, in the case of FunCorp we, first of all, decided
    to implement ML in the feed, because it is seen by the maximum number of users.
    And secondly, we started to create the recommendation system for the push notifications
    — because there is a noticeable, but still a smaller volume of the audience interacting
    with them.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的主要规则是将机器学习集成到能够带来最大业务指标提升的地方。因此，在 FunCorp 的情况下，我们首先决定在信息流中实施机器学习，因为它被最多的用户看到。其次，我们开始为推送通知创建推荐系统——因为有一个明显但较小的受众群体在与之互动。
- en: 3\. Collect As Much Diverse Feedback From Users As Possible
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3\. 尽可能多地收集用户的多样化反馈
- en: 'In our case, feedback is the actions a user can take to demonstrate how they
    feel about the content in the app. To build a recommendation system, you need
    to learn how to collect different types of feedback:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的案例中，反馈是用户可以采取的行动，以展示他们对应用内容的感受。为了构建推荐系统，您需要学会收集不同类型的反馈：
- en: '**Explicit** — this can be a rating by any scale or a like/dislike.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显式**——这可以是任何尺度的评分或点赞/点踩。'
- en: 'And **implicit**:'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 并且**隐式**：
- en: the amount of time a user spends on the content,
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户在内容上的停留时间，
- en: the number of visits to the content page,
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问内容页面的次数，
- en: the number of times one shares the content on social networks or sends it to
    friends.
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户在社交网络上分享内容的次数或将其发送给朋友的次数。
- en: Feedback should correlate with the business goals of the recommendation system.
    For example, if the goal is to reduce churn, it is reasonable to add a feedback
    form and show it to users who unsubscribe from the service.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈应该与推荐系统的业务目标相关。例如，如果目标是减少流失率，那么添加反馈表单并向从服务中退订的用户显示它是合理的。
- en: '**Here are some important technical points you need to consider:**'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**以下是一些重要的技术要点：**'
- en: Make it possible to expand user feedback channels. For example, in addition
    to the time spent on the page, you can start collecting user comments and determining
    their tone. Positive comments will tell you that you need more of this kind of
    content. And vice versa.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用户反馈渠道能够扩展。例如，除了页面上的停留时间外，您还可以开始收集用户评论并确定其语气。积极的评论会告诉您需要更多此类内容。反之亦然。
- en: Keep a history of user feedback for a long time — at least several months. This
    is necessary for two purposes. First, the more data you have when training the
    recommendation system model, the better the model will be — you will be able to
    identify insights in long-term users' behavior. Second, a large amount of historical
    data will allow us to compare models without running AB tests, in an offline format.
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 长时间保留用户反馈历史——至少几个月。这是为了两个目的。首先，您在训练推荐系统模型时拥有的数据越多，模型就会越好——您将能够发现长期用户行为中的见解。其次，大量的历史数据将使我们能够在离线格式下比较模型，而无需进行AB测试。
- en: 'You need a data quality control system. Real case: when we started collecting
    statistics on the time of viewing content and training the model using this data,
    we found out in the process that the data was collected from the iOS platform
    only. On Android, the feature had not been implemented. That is, we expected personalization
    to improve, but didn''t have data for the whole platform.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要一个数据质量控制系统。实际案例：当我们开始收集内容观看时间的统计数据并使用这些数据训练模型时，我们发现数据仅来自 iOS 平台。Android 平台上未实现该功能。也就是说，我们期望个性化有所改进，但没有整个平台的数据。
- en: Don't forget about the limitations of channels. For example, only 30–40% of
    users give feedback using likes. And if you build the recommendation system only
    on likes, then 60–70% of the audience will receive non-personalized dropout. So
    the more different channels of user feedback you have, the better.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 不要忘记渠道的限制。例如，只有 30-40% 的用户通过点赞提供反馈。如果你仅仅基于点赞来构建推荐系统，那么 60-70% 的观众将会收到非个性化的推荐。因此，你拥有的用户反馈渠道越多越好。
- en: In iFunny we have only 50% of users with explicit feedback, so we need to develop
    models with implicit feedback to improve our metrics
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在 iFunny，我们只有 50% 的用户提供了明确的反馈，因此我们需要开发基于隐性反馈的模型来改进我们的指标。
- en: '![Collect as much diverse feedback from users as possible](../Images/7d241d153d0636aa21eceaca21e36dfa.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![尽可能多地收集用户的多样化反馈](../Images/7d241d153d0636aa21eceaca21e36dfa.png)'
- en: 4\. Define Business Metrics
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4. 确定业务指标
- en: 'Machine learning experts got used to working with the metrics of ML algorithms:
    precision, recall, NDCG... But in fact, businesses are not interested in these
    metrics, other indicators play a role:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习专家习惯于处理 ML 算法的指标：精度、召回率、NDCG……但实际上，企业对这些指标并不感兴趣，其他指标发挥作用：
- en: session depth,
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 会话深度，
- en: conversion to purchase/view,
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转化为购买/查看，
- en: retention,
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 留存，
- en: average check per user.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每用户平均消费。
- en: 'So you need to choose the metrics that best fit your key business goals. Here''s
    what you can do:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 所以你需要选择最适合你关键业务目标的指标。你可以这样做：
- en: Count the various metrics.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算各种指标。
- en: 'On offline data, find correlations between business metrics and long-term metrics:
    user retention, revenue growth, etc.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在离线数据上，找到业务指标和长期指标之间的相关性：用户留存、收入增长等。
- en: As a result, you get a set of business metrics to grow in AB tests.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是，你会得到一组在 AB 测试中需要提升的业务指标。
- en: 5\. Segment Your Users
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 5. 对你的用户进行分段
- en: 'From a business perspective, the audience of the site can be very heterogeneous
    in various ways (such indicators are sometimes called slices):'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 从商业角度来看，网站的观众可能在多种方式上非常异质（这些指标有时称为切片）：
- en: socio-demographic characteristics,
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社会人口特征，
- en: activity on the service (number of feedback, frequency of visits),
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务上的活动（反馈数量，访问频率），
- en: geopositions,
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地理位置，
- en: etc.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 等等。
- en: Very often your models will have different effects on different audience segments
    — for example, showing metrics growth on new users and no growth on older users.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 很多时候，你的模型对不同的观众群体会产生不同的效果——例如，针对新用户显示指标增长，而对老用户则没有增长。
- en: The reporting system should provide the ability to calculate metrics in different
    user sections, to notice the improvement (or deterioration) of metrics in each
    particular segment.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 报告系统应该能够计算不同用户部分的指标，以便注意到每个特定群体中的指标改善（或恶化）。
- en: 'For example, iFunny has two large segments:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，iFunny 有两个大群体：
- en: “high activity" — users visit the app frequently and watch a lot of content,
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “高活动”——用户频繁访问应用程序并观看大量内容，
- en: “low activity” — users visit the app rarely.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “低活动”——用户很少访问应用程序。
- en: We used to count metrics overall, but when we separated these users in reports,
    we saw that model changes affect them differently. Sometimes there is growth only
    in the high activity segment — and when you count metrics without segmentation,
    you might not notice it.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 我们过去习惯于整体计算指标，但当我们在报告中将这些用户分开时，我们发现模型变化对他们的影响不同。有时只有在高活动群体中会有增长——而当你没有进行分段计算指标时，可能不会注意到。
- en: '![Segment Your Users](../Images/9c1a3f677784ae892e228795dedeaa4e.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![对你的用户进行分段](../Images/9c1a3f677784ae892e228795dedeaa4e.png)'
- en: 6\. Determine the Right Offline Metrics
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 6. 确定正确的离线指标
- en: 'When the feedback data is collected and the business metrics are selected,
    there is a choice of offline metrics, which will optimize our model, for example:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 当反馈数据收集完成且业务指标已选择时，就需要选择离线指标来优化我们的模型，例如：
- en: precision@k,
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: precision@k，
- en: recall@k,
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: recall@k，
- en: NDCG,
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NDCG，
- en: MAP.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MAP。
- en: 'There are quite a few metrics for recommendation systems. So how do you choose
    the right one? The answer is simple: choose offline metrics that correlate with
    business metrics. You can do this by calculating the correlation between offline
    and online metrics. For example, for a while at FunCorp, we thought that the number
    of smiles per user correlated with such business metrics as retention, but our
    experiments showed that this was not the case. And we began to optimize other
    business metrics, such as time spent.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐系统有很多指标。那么如何选择合适的指标呢？答案很简单：选择与业务指标相关的离线指标。你可以通过计算离线指标与在线指标之间的相关性来实现这一点。例如，在FunCorp，我们曾经认为每用户的笑容数量与留存等业务指标相关，但我们的实验显示情况并非如此。于是我们开始优化其他业务指标，例如花费的时间。
- en: Analyze, and in this case, you will learn how to avoid mistakes when a model
    with good offline metrics worsens business metrics.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 分析，在这种情况下，你将学习如何避免当离线指标良好的模型导致业务指标恶化时的错误。
- en: 7\. Create a Baseline Model
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 7\. 创建基线模型
- en: Don't try to use the most complex models to solve the problem right away — start
    with simpler approaches. For example, with product recommendations by popularity
    instead of neural networks. This simple model is called a baseline.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 不要试图立即使用最复杂的模型来解决问题——从简单的方法开始。例如，使用基于流行度的产品推荐，而不是神经网络。这个简单的模型被称为基线模型。
- en: In this case, you will immediately see the growth of product metrics, while
    avoiding large infrastructure and development costs. In the future, all your more
    complex models will be compared with the baseline.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，你将立即看到产品指标的增长，同时避免了大量的基础设施和开发成本。在未来，你所有更复杂的模型将与基线模型进行比较。
- en: For example, at FunCorp, we first used a simple approach based on the K Nearest
    Neighborhoods algorithm to create a service for recommending content in push notifications,
    and only in the second iteration, we moved to a more complex boosting model. The
    boosting model requires more computational resources for training, so we first
    made sure that ML has a small positive effect — and to enhance it, it makes sense
    to spend time on developing a more complex model.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在FunCorp，我们首先使用基于K最近邻算法的简单方法创建了一个用于推送通知的内容推荐服务，只有在第二次迭代中，我们才转向更复杂的提升模型。提升模型需要更多的计算资源进行训练，因此我们首先确保机器学习具有小幅的积极效果——为了增强这一效果，花时间开发更复杂的模型是有意义的。
- en: 8\. Choose the ML Algorithm and Discard the Worst Models
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8\. 选择机器学习算法并淘汰最差的模型
- en: 'The next step is to train more complex models. Recommendation systems usually
    use both neural networks and classical ML algorithms:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是训练更复杂的模型。推荐系统通常使用神经网络和经典机器学习算法：
- en: Matrix factorization,
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矩阵分解，
- en: LogisticRegression,
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LogisticRegression，
- en: KNN (user-based, item-based),
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: KNN（基于用户，基于项目），
- en: boosting.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: boosting。
- en: At this stage, we count offline metrics and, thanks to the data already accumulated
    in the feedback system, we choose the best model to run in the test.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个阶段，我们会计算离线指标，并且凭借反馈系统中已经积累的数据，我们选择最佳模型进行测试。
- en: This approach has a noticeable disadvantage. Offline data are the result of
    the model that was working in production at the time of collecting this data,
    so offline experiments will be won by the model that most accurately “repeats”
    the current one.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法有一个明显的缺点。离线数据是当时生产环境中正在运行的模型的结果，因此离线实验将被当前模型最准确地“重复”所获胜。
- en: So with offline data, we only distinguish very bad models from “not quite bad
    ones” in order to run the “not quite bad model” in the test. Alternatively, we
    can run the experiment without offline tests — using, for example, the multi-armed
    bandits mechanism. In case of bad metrics, the bandit automatically stops directing
    traffic to the “bad” model. But this approach of testing new models greatly complicates
    the architecture, so we test models on offline data.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，使用离线数据，我们只能区分非常糟糕的模型和“不是很糟糕的模型”，以便将“不是很糟糕的模型”投入测试。或者，我们可以在没有离线测试的情况下进行实验——例如，使用多臂老虎机机制。如果指标很差，老虎机会自动停止将流量导向“糟糕”的模型。但这种测试新模型的方法大大复杂化了架构，因此我们在离线数据上测试模型。
- en: 9\. Run Everything Through the AB Testing System
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9\. 通过AB测试系统运行所有内容
- en: Any changes in the recommendation algorithm, such as switching from a baseline
    to an advanced model, must go through a system of AB tests.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 任何对推荐算法的更改，例如从基线模型切换到高级模型，必须经过AB测试系统。
- en: Without good analytics, you either can't see the effect of a recommendation
    system, or you misinterpret the data, which can cause business metrics to deteriorate.
    For example, if you start recommending more NSFW content, the metric “number of
    likes per user” will increase in the moment. But in the long run, such content
    can lead to an increase in unsubscribes from the service.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有良好的分析，你可能无法看到推荐系统的效果，或者误解数据，这可能导致业务指标恶化。例如，如果你开始推荐更多 NSFW 内容，那么“每个用户的点赞数”会暂时增加。但从长远来看，这种内容可能会导致服务的退订增加。
- en: '*This is why AB tests need to measure both short-term and long-term effects.*'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '*这就是为什么 AB 测试需要测量短期和长期效果的原因。*'
- en: When conducting AB tests, you need to ensure that the samples in the test and
    control groups are representative. At FunCorp, we calculate the sample size depending
    on what metric growth we expect to see.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行 AB 测试时，你需要确保测试组和对照组的样本具有代表性。在 FunCorp，我们根据期望的指标增长计算样本大小。
- en: We also need to avoid the influence of some tests on others. This is a problem
    with mature products when a large number of changes are tested in parallel, some
    of which may affect ML output. For example, if we do tests in parallel for both
    the recommendation feed and moderation rules (for which the content may be rejected
    by the moderator), the test and control metrics may diverge not because of differences
    in the model but because of differences in content sorting.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要避免一些测试对其他测试的影响。这是成熟产品中的一个问题，当大量变化并行测试时，其中一些可能会影响 ML 输出。例如，如果我们同时对推荐 feed
    和审核规则（可能会被审核员拒绝的内容）进行测试，则测试和对照指标可能会出现偏差，这并非因为模型差异，而是因为内容排序差异。
- en: 10\. Remember the Classic Problems in Production
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 10\. 记住生产中的经典问题
- en: When rolling out the algorithm “in production” it is necessary to provide a
    solution to a number of classic problems.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在“生产环境”中推出算法时，必须提供解决一系列经典问题的方案。
- en: 'Users'' cold start: what to recommend to those who haven''t left feedback?
    We recommend here to make lists of globally popular content and make them as diverse
    as possible to be more likely to “hook” the user.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户的冷启动：如何推荐给那些没有留下反馈的用户？我们建议制作全球热门内容的列表，并尽可能使其多样化，以更有可能“吸引”用户。
- en: 'Content'' cold-start: how do you recommend the content that hasn''t had time
    to gain statistics? To solve this problem, cold-start content is usually swept
    into recommendations in a small proportion of recommendations.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内容的冷启动：你如何推荐那些还没有时间积累统计数据的内容？为了解决这个问题，冷启动内容通常会在推荐中以较小的比例出现。
- en: A feedback loop is a classic trap for recommendation systems. We show the content
    to the user, then collect feedback, and run the next learning cycle on that data.
    In this case, the system learns from the data it generates itself. To avoid this
    trap, we usually allocate a small percentage of users who receive random output
    instead of recommendations—with this design, the system will be trained not only
    on its own data but also on users' interactions with randomly selected content.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反馈循环是推荐系统中的一个经典陷阱。我们向用户展示内容，然后收集反馈，并在这些数据上运行下一个学习周期。在这种情况下，系统从它自己生成的数据中学习。为了避免这个陷阱，我们通常会分配一小部分用户接受随机输出而不是推荐——通过这种设计，系统将不仅仅在自己的数据上进行训练，还将在用户与随机选择的内容的互动上进行训练。
- en: Good luck with building recommendation systems and thanks for your attention!
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 祝你在构建推荐系统时好运，感谢你的关注！
- en: '[**Alexander Dzhumurat**](https://www.linkedin.com/in/dzhumurat-aleksandr-04942484/?originalSubdomain=ru)
    is the lead of DS team at FunCorp, a company that creates entertaining UGC apps
    with millions of active users (iFunny, ABPV) and helps create the best personalization
    possible. Previously Alexander led the DS team at online-cinema IVI.'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '[**亚历山大·朱穆拉特**](https://www.linkedin.com/in/dzhumurat-aleksandr-04942484/?originalSubdomain=ru)
    是 FunCorp 数据科学团队的负责人，该公司创建了具有数百万活跃用户的娱乐性 UGC 应用（如 iFunny, ABPV），并帮助实现最佳个性化。之前，亚历山大曾领导在线影院
    IVI 的数据科学团队。'
- en: More On This Topic
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 更多相关话题
- en: '[Ten Years of AI in Review](https://www.kdnuggets.com/2023/06/ten-years-ai-review.html)'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[十年的 AI 回顾](https://www.kdnuggets.com/2023/06/ten-years-ai-review.html)'
- en: '[Chip Huyen shares frameworks and case studies for implementing ML systems](https://www.kdnuggets.com/2023/02/sphere-chip-huyen-shares-frameworks-case-studies-implementing-ml-systems.html)'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Chip Huyen 分享了实现 ML 系统的框架和案例研究](https://www.kdnuggets.com/2023/02/sphere-chip-huyen-shares-frameworks-case-studies-implementing-ml-systems.html)'
- en: '[How to Build a Real-Time Recommendation Engine Using Graph Databases](https://www.kdnuggets.com/2023/08/build-realtime-recommendation-engine-graph-databases.html)'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[如何使用图数据库构建实时推荐引擎](https://www.kdnuggets.com/2023/08/build-realtime-recommendation-engine-graph-databases.html)'
- en: '[Building a Recommendation System with Hugging Face Transformers](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用 Hugging Face Transformers 构建推荐系统](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)'
- en: '[Lessons from a Senior Data Scientist](https://www.kdnuggets.com/2022/09/lessons-senior-data-scientist.html)'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[来自高级数据科学家的经验教训](https://www.kdnuggets.com/2022/09/lessons-senior-data-scientist.html)'
- en: '[KDnuggets News, September 28: Free Algorithms in Python Course •…](https://www.kdnuggets.com/2022/n38.html)'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[KDnuggets 新闻，9月28日：免费的 Python 算法课程 •…](https://www.kdnuggets.com/2022/n38.html)'
