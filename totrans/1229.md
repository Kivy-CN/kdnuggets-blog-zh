# 数据科学家的软件工程最佳实践

> 原文：[https://www.kdnuggets.com/2021/03/software-engineering-best-practices-data-scientists.html](https://www.kdnuggets.com/2021/03/software-engineering-best-practices-data-scientists.html)

[评论](#comments)

**由 [Madison Hunter](https://madison13.medium.com/), 地球科学学士本科生**

![](../Images/819721409a44c604cc26e9ec52dd53e3.png)

由 [Joonas kääriäinen](https://www.pexels.com/@joonas-kaariainen-67364?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 提供的照片，来源于 [Pexels](https://www.pexels.com/photo/bridge-with-lights-at-night-240572/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)

我最初并不理解为什么人们会抱怨数据科学家编写的代码，直到我自己开始编写数据分析代码。

* * *

## 我们的三大课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业生涯。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你的组织的IT需求

* * *

来自软件开发教育背景的我，感觉自己对编码最佳实践有很好的掌握，对编写干净代码充满信心。然后，我开始编写我的第一个数据分析代码。

你猜对了。

缺乏函数，不清晰的变量名，意大利面条式的代码，没有单元测试的痕迹，以及严重缺乏风格，导致我在让代码正常工作后，面对的是一锅狗的早餐般的代码。

最后，我终于明白了那些工程师所抱怨的所有问题。

数据科学并不是自然衍生于计算机科学的领域，这也反映在数据科学家背景的多样性上。许多数据科学家甚至没有计算机科学学位，他们通常来自数学、科学、工程、商业、医学等不相关的领域。

因此，数据科学家代码不总是最整洁也就不足为奇了。

我并不是说数据科学家需要能够编写完整的复杂库。相反，数据科学家应该能够编写干净的代码，这样代码可以被更新、调试，并且可以顺利地迁移到生产环境中，工程部门不会发出太多脏话。

编写整洁代码的重要性不仅仅是为了他人。在许多公司中，预算不足以同时聘用数据科学家和软件工程师，这意味着数据科学家通常负责创建生产级代码。因此，维护和开发干净、易用且可重用的代码应该作为一种自我 sanity 的因素来考虑。

很多人会争论优秀的代码是主观的。然而，通常有四个标准是大家都可以认同的，这些标准定义了使用最佳实践编写的代码：

1.  优秀的代码应该是高效的——这意味着你要从你的Python代码中榨取每一丝速度和效率，即使几乎没有。

1.  优秀的代码是可维护的——这意味着你可以维护代码，并且其他人也可以轻松理解和维护你的代码。

1.  优秀的代码是可读且结构良好的——这意味着任何人都应该能够查看你的代码并理解你试图实现的目标，而不需要费太多力气。

1.  优秀的代码是可靠的——干净的代码就是好的代码，而好的代码是可靠的，不容易出现漏洞或随机故障。

查阅这些最佳实践，你可以实施它们以达到上述四个标准。

### 使用描述性的变量名。

我常常看到数据分析代码使用像x、y这样的变量名，或者任何数学变量的英文词汇。

虽然这在编写数学公式时有效，但在阅读他人的代码时并不那么清晰。

在数据科学方面，我喜欢明确说明我的变量是什么。例如：

```py
null_hypothesis
standard_deviation_paired_differences_population
degrees_of_freedom
observed_frequency
test_statistic_chi_squared
```

任何上过统计学课程的人都能够理解我的变量是什么，以及它们在方程中做了什么。这些基本变量可以在具体计算或用途时变得更具描述性。

诀窍是尽可能详细地描述情况。当然，有时计算如此复杂，以至于写这样的描述性变量没有意义。然而，在那之前，尽量做到描述性。

### 使用函数。

函数，无论你使用什么编程方法论（面向对象、函数式等），对保持代码整洁、简洁、可读和 DRY（稍后会讨论）至关重要。

对于非计算机科学专业的数据科学家来说，函数并不总是直观的，因为代码在没有它们的情况下也能正确运行。

然而，最佳的程序员被认为是最懒的程序员。为什么？因为他们编写的代码最少，并且通常编写最干净的代码以产生解决方案。他们尽量少工作以使代码正常运行，并且经常提供最简洁的解决方案。这涉及到使用函数。

以下是一些编写优秀函数以保持代码整洁的技巧：

+   函数应该只做一件事。不是10件。不是20件。仅仅一件事。

+   函数应保持简小。有些人认为函数不应超过20行代码，但这是一个任意数字。尽量保持函数简洁明了。

+   函数应以从上到下的方式编写，以便你能阅读并理解其逻辑——就像阅读一本书一样。

+   尽量将函数参数的数量保持在最低限度（最好少于3个）。如果你要求超过三个函数参数，问问自己这个函数是否仅完成一个任务。

+   确保函数内部的逻辑正确缩进，并且整个函数的代码块排列整齐。这将帮助其他人查看函数内部的代码，以及函数的开始和结束位置。

+   使用描述性名称。

### 使用注释并编写适当的支持文档。

当你忙于构建改变生活的模型时，可能很容易忽视这一步，但事实是，如果没有其他人能使用它们，那么它们真的有多改变生活呢？

我个人的注释规则是：

+   在代码文件的顶部写一个注释，简要描述代码的目标。

+   在每个函数的顶部写一个注释，描述其输入、输出以及执行的逻辑。

+   在我不完全理解的逻辑顶部写一个注释，以便更好地组织思路。这有助于调试和代码重构。

在编写适当的支持文档时，你的文档不必比一个READme文件更复杂。在最基本的情况下，好的文档应包括：

+   代码的目标。

+   关于如何安装和使用代码的说明。

+   详细解释代码中的难点，逐行描述代码的具体功能，并且解释为什么选择这样编写代码。

+   用于调试和故障排除的截图。

+   有用的外部支持文档链接，可以进一步描述和解释你逻辑或代码的部分内容。

### 使用一致的编码风格，并熟悉你所使用语言的语法约定。

我承认有时未能始终遵循特定语言的适当约定。

在大学时主要学习C#之后，我对其约定变得熟悉和舒适，然后我就很懒惰地将这些约定应用到我遇到的每一种语言中。

不要像我一样。相反，花时间学习每种新语言的语法约定，并强迫自己正确使用这些约定。这不仅有助于你深入了解语言，还能帮助你编写更清晰的代码，并帮助你与使用相同语言的其他开发人员进行沟通。

这里是一个完成相同功能的代码示例，使用了两种不同的语言及其相应的约定（请注意，由于格式问题，可能缺少缩进）：

C#：

```py
// This is a comment in C#. I am going to write some code that prints out a value if the inputted number is correct.int year = 0;
Console.Write("\nEnter the year that C# became a language: ");
year = Convert.ToInt32(Console.ReadLine());if(year == 2000) 
{
Console.Write("That is correct!");
}
else 
{
Console.Write("This is incorrect.");
}
```

Python：

```py
# This is a comment in Python. This code is going to do the same job that the code above just did.year = int(input("Enter the year that Python became a language: "))if year == 1989:
print ("That is correct!")
else:
print ("That is incorrect.")
```

这段无聊的代码实际上没有做什么，但它给了你一个关于每种语言习惯不同的概念。

### 使用库。

使用现有库可以节省大量时间，尤其是在进行数据分析编码时。Python 拥有丰富的库，可以处理数据科学家提出的各种请求。这些库不仅已经为你编码，还经过调试并准备好生产使用。

查看这篇概述了 [顶级数据科学库](https://towardsdatascience.com/top-10-python-libraries-for-data-science-cd82294ec266) 及其能力的文章。我在这里总结了它，重点关注了我发现最有用的七个库：

### NumPy

+   基本数组操作：加法、乘法、切片、展平、重塑、索引。

+   高级数组操作：堆叠数组，分割成若干部分。

+   线性代数。

### Pandas

+   索引、操作、重命名、排序和合并数据框。

+   对数据框中的列进行基本的 CRUD（更新、添加、删除）功能。

+   输入缺失文件并处理缺失数据。

+   创建直方图或箱线图。

### Matplotlib

+   所有数据可视化，包括折线图、散点图、柱状图、直方图、饼图、茎叶图和频谱图等。

### TensorFlow

+   语音和声音识别。

+   情感分析。

+   人脸识别。

+   时间序列。

+   视频检测。

### Seaborn

+   确定变量之间的相关性。

+   分析单变量或双变量分布。

+   绘制因变量的线性回归模型。

### SciPy

+   常见的科学计算，包括线性代数、插值、统计学、微积分和常微分方程。

### Scikit-Learn

+   监督学习和无监督学习算法，用于分类、聚类、回归、降维、模型选择和预处理。

### 使用一个好的 IDE。

Jupyter 并不适用于编写生产级代码。

虽然有办法将 Jupyter Notebooks 调整为生成生产级代码，但我发现用它进行数据探索和分析的早期阶段更简单，然后在合适的 IDE 中开发生产级代码。

IDE 配备了简单的工具，帮助保持代码整洁，如代码 linting、自动格式化、语法高亮、查找功能和错误捕捉。此外，还有大量 IDE 扩展可以帮助你在编写代码时节省时间。

一些你可以查看的 IDE 包括：

+   [Visual Studio Code](https://code.visualstudio.com/) （我个人最喜欢的）

+   [PyCharm](https://www.jetbrains.com/pycharm/)

+   [Atom](https://ide.atom.io/)

+   [Spyder](https://www.spyder-ide.org/)

### 保持代码 DRY。

DRY（不要重复自己）是一个软件工程最佳实践，旨在保持代码整洁、简明扼要。

目标是避免重复任何代码。这意味着，如果你发现自己不断编写相同的代码行，你需要将这些代码转换为一个函数，只需编写一次。然后可以多次调用这个函数。

如果你在保持代码干燥方面遇到困难，只需使用 [我最喜欢的规则](https://codeburst.io/clean-code-functions-475fe755c4f1)：

1.  如果这是第一次，编码它。

1.  如果这是第二次，复制它。

1.  如果这是第三次，就将其做成一个函数或类。

### 编写单元测试。

[单元测试](https://www.guru99.com/unit-testing-guide.html)是一种软件测试类型，涉及测试代码中的各个组件。编写单元测试是为了确保每一段代码按预期执行。测试是为了确保执行特定功能的小段代码能够准确完成其工作。被测试的“单元”可以是单个函数、过程或整个对象。

一个很好的单元测试示例是测试一个函数如何响应不同的参数类型。这项测试的结果将确保你已经为所有可能性做好了计划，并且该函数以后不会抛出任何未解释的错误。

查看 Microsoft 关于如何编写单元测试的这篇文章：

[**编写单元测试的最佳实践 - .NET**

编写单元测试有许多好处；它们有助于回归测试、提供文档，并促进…](https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-best-practices)

尽管本文只描述了如何在 C# 中编写单元测试，但这些经验教训和示例适用于任何语言。

### 不要对一行代码的解决方案过于痴迷。

一行代码的解决方案非常适合你想要给朋友留下深刻印象，或写一篇病毒式传播的文章。如果你能用一行代码进行股票交易，谁不想呢？

虽然用一行代码创建解决方案令人印象深刻，但当涉及到调试和重构代码时，你也会面临一系列麻烦。

相反，尽量保持每行代码调用一到两个函数，并确保你的逻辑对任何阅读你代码的人来说都容易理解。如果你不能用简单的术语解释一行代码的作用，那你可能把这行代码做得太复杂了。

必须指出的是，开发人员编写的代码行数并不能很好地指示他们的能力或技巧——不要听信任何告诉你相反话的人。

### 最后的思考。

本文强调了数据科学家可以实施的最重要的最佳实践，以使他们的代码准备好投入生产。

你的代码是你的责任，所以花一些时间确保你编写的代码高效、简单且易于理解是有意义的。虽然还有很多其他编写干净代码的技巧和窍门，但上述列出的技巧是你今天就可以开始应用的最简单的技巧。

**简介：[麦迪逊·亨特](https://madison13.medium.com/)** 是一名地球科学本科生，软件开发毕业生。麦迪逊撰写关于数据科学、环境和 STEM 的随笔。

[原文](https://towardsdatascience.com/software-engineering-best-practices-for-data-scientists-4c199ede6e03). 已获授权转载。

**相关：**

+   [数据科学的软件工程技巧与最佳实践](/2020/10/software-engineering-best-practices-data-science.html)

+   [我从高效数据科学家那里学到的 15 个习惯](/2021/03/15-habits-learned-from-highly-effective-data-scientists.html)

+   [数据科学家的软件工程基础](/2020/06/software-engineering-fundamentals-data-scientists.html)

### 更多相关话题

+   [软件开发者 vs 软件工程师](https://www.kdnuggets.com/2022/05/software-developer-software-engineer.html)

+   [将 ChatGPT 融入数据科学工作流程：技巧与最佳实践](https://www.kdnuggets.com/2023/05/integrating-chatgpt-data-science-workflows-tips-best-practices.html)

+   [数据仓库和 ETL 最佳实践](https://www.kdnuggets.com/2023/02/data-warehousing-etl-best-practices.html)

+   [迁移到 AWS 云的 11 个最佳实践](https://www.kdnuggets.com/2023/04/11-best-practices-cloud-data-migration-aws-cloud.html)

+   [数据可视化最佳实践及有效沟通资源](https://www.kdnuggets.com/2023/04/data-visualization-best-practices-resources-effective-communication.html)

+   [数据科学团队协作的 5 个最佳实践](https://www.kdnuggets.com/2023/06/5-best-practices-data-science-team-collaboration.html)
