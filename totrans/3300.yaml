- en: 7 Steps to Mastering Data Preparation with Python
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/2017/06/7-steps-mastering-data-preparation-python.html](https://www.kdnuggets.com/2017/06/7-steps-mastering-data-preparation-python.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Data preparation, cleaning, pre-processing, cleansing, wrangling. Whatever term
    you choose, they refer to a roughly related set of pre-modeling data activities
    in the machine learning, data mining, and data science communities.
  prefs: []
  type: TYPE_NORMAL
- en: '![Data prep in CRISP-DM](../Images/46d01de23b57f7116bef588b1995aa70.png)'
  prefs: []
  type: TYPE_IMG
- en: Data preparation in the [CRISP-DM model](https://en.wikipedia.org/wiki/Cross_Industry_Standard_Process_for_Data_Mining).
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, the all-knowing Wikipedia defines [data cleansing](https://en.wikipedia.org/wiki/Data_cleansing)
    as:'
  prefs: []
  type: TYPE_NORMAL
- en: '...is the process of detecting and correcting (or removing) corrupt or inaccurate
    records from a record set, table, or database and refers to identifying incomplete,
    incorrect, inaccurate or irrelevant parts of the data and then replacing, modifying,
    or deleting the dirty or coarse data. Data cleansing may be performed interactively
    with data wrangling tools, or as batch processing through scripting.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Data wrangling](https://en.wikipedia.org/wiki/Data_wrangling), for comparison,
    is defined by Wikipedia as:'
  prefs: []
  type: TYPE_NORMAL
- en: '...the process of manually converting or mapping data from one "raw" form into
    another format that allows for more convenient consumption of the data with the
    help of semi-automated tools. This may include further munging, data visualization,
    data aggregation, training a statistical model, as well as many other potential
    uses. Data munging as a process typically follows a set of general steps which
    begin with extracting the data in a raw form from the data source, "munging" the
    raw data using algorithms (e.g. sorting) or parsing the data into predefined data
    structures, and finally depositing the resulting content into a data sink for
    storage and future use.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: While I would first point out that I am not thrilled with the term "[data sink](http://www.computerhope.com/jargon/d/datasink.htm),"
    I would go on to say that it is "identifying incomplete, incorrect, inaccurate
    or irrelevant parts of the data and then replacing, modifying, or deleting the
    dirty or coarse data" in the context of "mapping data from one 'raw' form into
    another..." all the way up to "training a statistical model" which I like to think
    of data preparation as encompassing, or "everything from data sourcing right up
    to, but not including, model building." That is the vague-yet-oddly-precise definition
    we'll move forward with.
  prefs: []
  type: TYPE_NORMAL
- en: Keep in mind, however, that this article covers one particular set of data preparation
    techniques, and additional, or completely different, techniques may be used in
    a given circumstance, based on requirements. You should find that the prescription
    held herein is one which is both orthodox and general in approach.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 1: Preparing for the Preparation'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'First, let''s stress what everyone else has already told you: it could be argued
    that this data preparation phase is not a preliminary step prior to a machine
    learning task, but actually an integral component (or even a majority) of what
    a typical machine learning task would encompass. For our purposes, however, we
    will separate the data preparation from the modeling as its own regimen.'
  prefs: []
  type: TYPE_NORMAL
- en: As Python is the ecosystem, much of what we will cover will be [Pandas](http://pandas.pydata.org/)
    related. For the uninitiated, Pandas is a data manipulation and analysis library,
    is one of the cornerstones of the Python scientific programming stack, and is
    a great fit for many of the tasks associated with data preparation.
  prefs: []
  type: TYPE_NORMAL
- en: Data preparation can be seen in the CRISP-DM model shown above (though it can
    be reasonably argued that "data understanding" falls within our definition as
    well). We can also equate our data preparation with the framework of the KDD Process
    -- specifically the first 3 major steps -- which are **selection**, **preprocessing**,
    and **transformation**. We can break these down into finer granularity, but at
    a macro level, these steps of the KDD Process encompass what data wrangling is.
  prefs: []
  type: TYPE_NORMAL
- en: '![KDD Process](../Images/d8eb8e24aba62cd437bb352025aca7d7.png)'
  prefs: []
  type: TYPE_IMG
- en: The KDD Process.
  prefs: []
  type: TYPE_NORMAL
- en: 'While readers should be able to follow this guide with few additional resources,
    for those interested in a more holistic take on Pandas, helpful information can
    be found in the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[10 Minutes to pandas](http://pandas.pydata.org/pandas-docs/stable/10min.html),
    Pandas documentation'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Intro to pandas data structures](http://www.gregreda.com/2013/10/26/intro-to-pandas-data-structures/),
    by Greg Reda'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Modern Pandas (in 7 parts)](http://tomaugspurger.github.io/modern-1.html),
    by Tom Augspurger'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'For some feedback on the data preparation process from 3 insiders -- Sebastian
    Raschka, Clare Bernard, and Joe Boutros -- read this interview before moving on:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Data Preparation Tips, Tricks, and Tools: An Interview with the Insiders](/2016/10/data-preparation-tips-tricks-tools.html),
    by Matthew Mayo'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Step 2: Exploratory Data Analysis'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Exploratory data analysis](https://en.wikipedia.org/wiki/Exploratory_data_analysis)
    (EDA) is an integral aspect of any greater data analysis, data science, or machine
    learning project. Understanding data before working with it isn''t just a pretty
    good idea, it is a priority if you plan on accomplishing anything of consequence.
    In her article [The Value of Exploratory Data Analysis](/2017/04/value-exploratory-data-analysis.html),
    Chloe Mawer explains:'
  prefs: []
  type: TYPE_NORMAL
- en: At a high level, EDA is the practice of using visual and quantitative methods
    to understand and summarize a dataset without making any assumptions about its
    contents. It is a crucial step to take before diving into machine learning or
    statistical modeling because it provides the context needed to develop an appropriate
    model for the problem at hand and to correctly interpret its results.
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The basic gist is that we need to know the makeup of our data before we can
    effectively select predictive algorithms or map out the remaining steps of our
    data preparation. Throwing our dataset at the hottest algorithm and hoping for
    the best is not a strategy.
  prefs: []
  type: TYPE_NORMAL
- en: 'Knowing our requirements are also important: if having a human-readable output
    is a high priority in order reason our results, using a neural network is likely
    not going to cut it. A decision tree may be not provide the highest classification
    accuracy in a given scenario, but perhaps any such sacrifice in accuracy would
    be acceptable in exchange for a decipherable process (*and* cue the hate mail).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Chloe states that EDA usually involves a combination of the following methods:'
  prefs: []
  type: TYPE_NORMAL
- en: Univariate visualization of and summary statistics for each field in the raw
    dataset
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bivariate visualization and summary statistics for assessing the relationship
    between each variable in the dataset and the target variable of interest (e.g.
    time until churn, spend)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Multivariate visualizations to understand interactions between different fields
    in the data
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Dimensionality reduction to understand the fields in the data that account for
    the most variance between observations and allow for the processing of a reduced
    volume of data
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Clustering of similar observations in the dataset into differentiated groupings,
    which by collapsing the data into a few small data points, patterns of behavior
    can be more easily identified
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It should be noted that her article stresses the importance of visualization
    in the EDA process, as opposed to simple summarization alone. Also, we won't spend
    much time on the more advanced aspects of EDA (dimensionality reduction & clustering
    of observations) in this step, as I hope to write something more in-depth on these
    topics in the near future.
  prefs: []
  type: TYPE_NORMAL
- en: For a more complete overview of why EDA is important (and often not given its
    fair credit), [read Chloe's article](/2017/04/value-exploratory-data-analysis.html).
  prefs: []
  type: TYPE_NORMAL
- en: '![EDA Iris](../Images/a693b17e7e06f6bb8261edf83d6e2fed.png)'
  prefs: []
  type: TYPE_IMG
- en: An excerpt of a distribution visualization of the [iris dataset](https://en.wikipedia.org/wiki/Iris_flower_data_set).
  prefs: []
  type: TYPE_NORMAL
- en: 'For an example exploratory data analysis process as applied to the Titanic
    dataset, read:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Titanic EDA](https://github.com/TarekDib03/titanic-EDA/blob/master/Titanic%20-%20Project.ipynb),
    by Tarek Dib'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To get an idea of using [Seaborn](https://seaborn.pydata.org/), a statistical
    data visualization library, to visualize a dataset distribution see:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Visualizing the distribution of a dataset](http://seaborn.pydata.org/tutorial/distributions.html),
    Seaborn documentation'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'A pair of additional libraries which may be useful for data exploration:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Dora](https://github.com/NathanEpstein/Dora) - Tools for exploratory data
    analysis in Python, by Nathan Epstein'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[pandas-profiling](https://github.com/JosPolfliet/pandas-profiling) - Create
    HTML profiling reports from pandas DataFrame objects, by Jos Polfliet'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'For a quick word on categorical data, see the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Qualitative Research Methods for Data Science?](/2017/05/qualitative-research-methods-data-science.html),
    by Kevin Gray'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Generating a wordcloud in Python](https://github.com/amueller/word_cloud),
    by Andreas Mueller'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Step 3: Dealing with Missing Values'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: There are all sorts of strategies for dealing with missing data, and none of
    them are applicable universally. Some people will say "never use instances which
    include empty values." Others will argue "never use an attribute's mean value
    to replace missing values." Conversely, you may hear more complex methods endorsed
    wholesale, such as "only first clustering a dataset into the number of known classes
    and then using intra-cluster regression to calculate missing values is valid."
  prefs: []
  type: TYPE_NORMAL
- en: Listen to none of this. "Never" and "only" and other inflexible assertions hold
    no value in the nuanced world of data finessing; different types of data and processes
    suggest different best practices for dealing with missing values. However, since
    this type of knowledge is both experience and domain based, we will focus on the
    more basic strategies which can be employed.
  prefs: []
  type: TYPE_NORMAL
- en: '![Missing piece](../Images/ec3c609ca1c1cd7e4305cd72bb8f609a.png)'
  prefs: []
  type: TYPE_IMG
- en: Another one of those pesky missing values.
  prefs: []
  type: TYPE_NORMAL
- en: 'Some common methods for dealing with missing values include:'
  prefs: []
  type: TYPE_NORMAL
- en: dropping instances
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: dropping attributes
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: imputing the attribute mean for all missing values
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: imputing the attribute median for all missing values
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: imputing the attribute mode for all missing values
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: using regression to impute attribute missing values
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: As mentioned above, clearly the type of modeling methods being employed will
    have an effect on your decision -- for example, decision trees are not amenable
    to missing values. Additionally, you could technically entertain any statistical
    method you could think of for determining missing values from the dataset, but
    the listed approaches are tried, tested, and commonly used approaches.
  prefs: []
  type: TYPE_NORMAL
- en: 'As our discussion here is Python and Pandas based, here is relevant information:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Working with missing data](http://pandas.pydata.org/pandas-docs/stable/missing_data.html),
    Pandas documentation'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[pandas.DataFrame.fillna](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.fillna.html),
    Pandas documentation'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'There are a lot of ways to accomplish filling missing values in a Pandas DataFrame
    with what it is you want them replaced with. Here are a few basic examples:'
  prefs: []
  type: TYPE_NORMAL
- en: 'For some additional views on dealing with missing values, particularly imputation,
    see:'
  prefs: []
  type: TYPE_NORMAL
- en: '[How to Treat Missing Values in Your Data: Part I](https://clevertap.com/blog/how-to-treat-missing-values-in-your-data-part-i/),
    by Jacob Joseph'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[How to Treat Missing Values in Your Data: Part II](https://clevertap.com/blog/how-to-treat-missing-values-in-your-data-part-ii),
    by Jacob Joseph'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Three R Libraries Every Data Scientist Should Know (Even if You Use Python)](https://www.kdnuggets.com/2021/12/three-r-libraries-every-data-scientist-know-even-python.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Write Clean Python Code Using Pipes](https://www.kdnuggets.com/2021/12/write-clean-python-code-pipes.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[What Makes Python An Ideal Programming Language For Startups](https://www.kdnuggets.com/2021/12/makes-python-ideal-programming-language-startups.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Stop Learning Data Science to Find Purpose and Find Purpose to…](https://www.kdnuggets.com/2021/12/stop-learning-data-science-find-purpose.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[5 Key Skills Needed To Become a Great Data Scientist](https://www.kdnuggets.com/2021/12/5-key-skills-needed-become-great-data-scientist.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[6 Predictive Models Every Beginner Data Scientist Should Master](https://www.kdnuggets.com/2021/12/6-predictive-models-every-beginner-data-scientist-master.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
