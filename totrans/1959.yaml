- en: How To Use Docker Volumes for Persistent Data Storage
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/how-to-use-docker-volumes-for-persistent-data-storage](https://www.kdnuggets.com/how-to-use-docker-volumes-for-persistent-data-storage)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![How To Use Docker Volumes for Persistent Data Storage](../Images/77e40aefad5bc5fdb7a05f51fb881cf8.png)'
  prefs: []
  type: TYPE_IMG
- en: When using Docker, you can use volumes to persist data even when you stop or
    restart the containers. We'll create and use Docker volumes for PostgreSQL.
  prefs: []
  type: TYPE_NORMAL
- en: Prerequisites
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'To follow along with this tutorial:'
  prefs: []
  type: TYPE_NORMAL
- en: You should have [Docker installed](https://docs.docker.com/get-docker/) on your
    machine
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You should be comfortable with Docker commands and PostgreSQL
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Step 1: Pull the PostgreSQL Image'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'First, we pull the PostgreSQL image from DockerHub:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 2: Create a Docker Volume'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Next, let’s create a Docker volume to store the data. This volume will persist
    the data even if the container is removed.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 3: Run the PostgreSQL Container'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now that we’ve pulled the image and created a volume, we can run the PostgreSQL
    container attaching the created volume to it.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: This command runs `my_postgres` in detached mode. Using -**v pg_data:/var/lib/postgresql/data**
    mounts the `pg_data` volume to **/var/lib/postgresql/data** in the container.
    And using **-p 5432:5432** maps port 5432 of `my_postgres` to port 5432 on the
    host machine.
  prefs: []
  type: TYPE_NORMAL
- en: 'Step 4: Verify the Volume Usage'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now that we’ve created the volume, we can verify it’s being used. You can inspect
    the volume and check the contents.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Running this command will show details about the volume, including its mount
    point on your host system. You can navigate to this directory and see the PostgreSQL
    data files.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 5: Create a Database and Table'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Connect to the Postgres instance and create a database and table.
  prefs: []
  type: TYPE_NORMAL
- en: 'Start a psql session:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Create a new database:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Connect to the new database:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Create a table and insert some data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Run a sample query:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 6: Stop and Remove the Container'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Stop the running container and remove it. We do this so we can test that the
    data persists even if the container is stopped.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'Step 7: Re-run the Postgres Container with the Same Volume'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Start a new PostgreSQL container with the same volume to ensure data persistence.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: Connect to the Postgres instance and verify that the data persists.
  prefs: []
  type: TYPE_NORMAL
- en: 'Open a psql session:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'Connect to the `mydb` database:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'Verify the data in the `users` table:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'You should still see the output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: I hope this tutorial helps you understand how to use volumes to persists data
    when working with Docker.
  prefs: []
  type: TYPE_NORMAL
- en: Additional Resources
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To learn more, read the following resources:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Volumes | Docker Docs](https://docs.docker.com/storage/volumes/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Manage data in Docker](https://docs.docker.com/storage/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Happy exploring!
  prefs: []
  type: TYPE_NORMAL
- en: '**[](https://twitter.com/balawc27)**[Bala Priya C](https://www.kdnuggets.com/wp-content/uploads/bala-priya-author-image-update-230821.jpg)****
    is a developer and technical writer from India. She likes working at the intersection
    of math, programming, data science, and content creation. Her areas of interest
    and expertise include DevOps, data science, and natural language processing. She
    enjoys reading, writing, coding, and coffee! Currently, she''s working on learning
    and sharing her knowledge with the developer community by authoring tutorials,
    how-to guides, opinion pieces, and more. Bala also creates engaging resource overviews
    and coding tutorials.'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[How To Use Docker Tags to Manage Image Versions Effectively](https://www.kdnuggets.com/how-to-use-docker-tags-to-manage-image-versions-effectively)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Optimizing Data Storage: Exploring Data Types and Normalization in SQL](https://www.kdnuggets.com/optimizing-data-storage-exploring-data-types-and-normalization-in-sql)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[From Oracle to Databases for AI: The Evolution of Data Storage](https://www.kdnuggets.com/2022/02/oracle-databases-ai-evolution-data-storage.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Cloud Storage Adoption is the Need of the Hour for Business](https://www.kdnuggets.com/2022/02/cloud-storage-adoption-need-hour-business.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[12 Docker Commands Every Data Scientist Should Know](https://www.kdnuggets.com/2023/01/12-docker-commands-every-data-scientist-know.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Docker for Data Science Cheat Sheet](https://www.kdnuggets.com/2023/02/docker-data-science-cheat-sheet.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
