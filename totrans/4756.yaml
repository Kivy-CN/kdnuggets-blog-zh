- en: Building Surveillance System Using USB Camera and Wireless-Connected Raspberry
    Pi
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用USB摄像头和无线连接的树莓派构建监控系统
- en: 原文：[https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2](https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2](https://www.kdnuggets.com/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html/2)
- en: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [comments](/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html?page=2#comments)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/11/building-surveillance-system-usb-camera-wireless-connected-raspberry-pi.html?page=2#comments)'
- en: 3\. Capturing Images using PyGame
  id: totrans-3
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3\. 使用PyGame捕获图像
- en: The “**fswebcam**” package is useful for quickly testing whether the camera
    is working well or not. After making sure it is functioning well, we can start
    building a Python script that accesses the camera to capture images continuously
    using the PyGame library. The following code uses PyGame for capturing a single
    image, opens a window for displaying that image, and finally save such image.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: “**fswebcam**”包对于快速测试摄像头是否正常工作非常有用。确保摄像头正常后，我们可以开始编写一个Python脚本，通过PyGame库连续捕获图像。以下代码使用PyGame捕获单张图像，打开一个窗口以显示该图像，并最终保存该图像。
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '* * *'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Our Top 3 Course Recommendations
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 我们的前三大课程推荐
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity)
    - 快速进入网络安全职业的捷径'
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics)
    - 提升你的数据分析技能'
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport)
    - 支持你所在组织的IT'
- en: '* * *'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Assume that the above code is saved in a Python file named “**im_cap.py**”.
    To execute such code, we can issue the following command from the terminal:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 假设上述代码保存在一个名为“**im_cap.py**”的Python文件中。要执行这些代码，我们可以从终端发出以下命令：
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Here is the window displayed after executing such file.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这是执行该文件后显示的窗口。
- en: '![](../Images/70fb7b5dcdf168cdeb19ecf08f6c499f.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/70fb7b5dcdf168cdeb19ecf08f6c499f.png)'
- en: We can modify the previous code to capture more than one image. For example,
    we can use a **for** loop to capture a number of previously specified images.
    We can also use a **while** loop that is not limited to a number of images. Here
    is the modified code that captures 2,000 images using a **for** loop.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以修改之前的代码以捕获多张图像。例如，我们可以使用**for**循环捕获预先指定数量的图像。我们也可以使用不限制图像数量的**while**循环。这里是修改后的代码，它使用**for**循环捕获2,000张图像。
- en: '[PRE2]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Here are 8 captured images. Note that the camera position is changed a bit.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这是8张捕获的图像。请注意，摄像头的位置有些许变化。
- en: '![](../Images/e8f73bbe809027e9bf3f5ec9fc74063a.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e8f73bbe809027e9bf3f5ec9fc74063a.png)'
- en: 4\. Building the Background Model
  id: totrans-20
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4\. 构建背景模型
- en: Up to this point, we successfully built a simple surveillance system in which
    a camera captures images which are saved in the SD card of RPi. We can extend
    that to automatically detect changes to the scene. This is done by building a
    background model for the scene. Any change to such a model will indicate a change.
    For example, if someone is passing through the scene will cause a change to the
    background.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们成功地构建了一个简单的监控系统，其中摄像头捕获的图像被保存在RPi的SD卡中。我们可以扩展该系统以自动检测场景变化。这是通过构建场景的背景模型来完成的。任何对该模型的更改都将指示一个变化。例如，如果有人经过场景，将导致背景的变化。
- en: The background model can be simply created by averaging multiple captured images
    to the scene background without any object in them. Because we are interested
    in the color information, the images will be converted into binary. Here is the
    Python code used to build the background model.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 背景模型可以通过将多个捕获的图像平均化来简单创建，这些图像中不包含任何物体。因为我们关注的是颜色信息，这些图像将被转换为二进制。以下是用于构建背景模型的Python代码。
- en: '[PRE3]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Here is the background model in both gray and binary after averaging 500 images.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这是在平均500张图片后得到的灰度和二值背景模型。
- en: '![](../Images/bc07771e6f250b549b1f42728a842909.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bc07771e6f250b549b1f42728a842909.png)'
- en: 5\. Detecting Changes to the Background Model
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5\. 检测背景模型的变化
- en: After building the background model, we can test a new image to check if there
    is a change to the background or not. This is done simply by converting the new
    image into binary. Then the number of white pixels is compared in both images.
    If the number exceeds a given threshold, this indicates a change from the background.
    The threshold changes from scene to scene. Here is the code used for testing a
    new image.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在建立背景模型之后，我们可以测试新图片以检查背景是否发生变化。这可以通过将新图片转换为二值图像来简单实现。然后比较两张图像中的白色像素数量。如果数量超过给定的阈值，则表示背景发生了变化。阈值因场景而异。这里是用于测试新图片的`code`。
- en: '[PRE4]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Here is a test image in both color, gray, and binary in which there is a change
    from the background due to the appearance of an object (person) in the scene.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个测试图像，显示了颜色、灰度和二值图像中由于场景中出现物体（人）而与背景的变化。
- en: '![](../Images/d86cfb508869bb37d5643695b38cac51.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d86cfb508869bb37d5643695b38cac51.png)'
- en: 6\. Building a Simple Circuit that Lights a Led When a Change Occurs
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6\. 建立一个简单的电路，当发生变化时点亮LED灯
- en: 'As an indication of a change to the background model, we can build a simple
    circuit in which a led lights when a change occurs. This circuit will be connected
    to the GPIO (General Purpose Input Output) bins of the RPi. The circuit needs
    the following components:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 作为背景模型变化的指示，我们可以建立一个简单的电路，当检测到变化时LED灯会亮起。这个电路将连接到RPi的GPIO（通用输入输出）引脚。电路需要以下组件：
- en: One breadboard.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个面包板。
- en: One led.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个LED灯。
- en: One resistor (more than or equal to 100 ohms). I use a 178.8 ohms resistor.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个电阻（大于或等于100欧姆）。我使用的是178.8欧姆的电阻。
- en: Two male/male jumper wires.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两根公/公跳线。
- en: Two male/female jumper wires.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两根公/母跳线。
- en: It is recommended to test the circuit before connecting it to the GPIO pins.
    This is because if the resistor value was not selected properly, this might lead
    to not only burning the led but also damaging the GPIO pins. To do the test, we
    need a battery for supplying the breadboard by power. Here is the circuit after
    connecting all components correctly.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在将电路连接到GPIO引脚之前，建议先进行测试。这是因为如果电阻值选择不当，可能不仅会烧毁LED，还会损坏GPIO引脚。测试时需要一个电池为面包板供电。这里是正确连接所有组件后的电路图。
- en: '![](../Images/af2906aa9e63f23914c18876149135cb.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/af2906aa9e63f23914c18876149135cb.png)'
- en: After that, we can remove the battery and connect the breadboard the GPIO pins
    of RPi. Based on the breadboard numbering of the GPIO pins, the ground is connected
    to bin number 20 and the high voltage is connected to the output bin number 22\.
    The following figure illustrates the connections between the breadboard and the
    RPi. The RPi is also connected to both the charger and the USB camera.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们可以拆下电池，并将面包板连接到RPi的GPIO引脚。根据GPIO引脚的面包板编号，地连接到引脚号20，高电压连接到输出引脚号22。下图展示了面包板与RPi之间的连接。RPi也连接到充电器和USB摄像头。
- en: '![](../Images/f917ae6b5def74ff37d2bb3f20c6398f.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f917ae6b5def74ff37d2bb3f20c6398f.png)'
- en: The output GPIO bin is controlled using the Python script given below. Its default
    state is LOW meaning the led is turned off. When there is a change to the background,
    the state will be changed to HIGH meaning the led is turned on. The led remains
    on for 0.1 seconds then its state returns back to off. When another input image
    is different from the background, the led returns back to on for another 0.1 seconds.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 输出GPIO引脚由以下Python脚本控制。其默认状态为LOW，表示LED灯熄灭。当背景发生变化时，状态会变为HIGH，表示LED灯点亮。LED灯会亮0.1秒，然后状态恢复为熄灭。当另一个输入图像与背景不同时，LED灯会再亮0.1秒。
- en: '[PRE5]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The following figure is shown one input image which is different from the background
    image due to the existence of a person. As a result, the led will be turned on
    for 0.1 seconds.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了一张输入图像，由于存在一个人，它与背景图像不同。因此，LED灯将亮0.1秒钟。
- en: '![](../Images/3024e1ed52ae5a4c77d2b20f56c94497.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3024e1ed52ae5a4c77d2b20f56c94497.png)'
- en: The following video ([https://youtu.be/WOUG-vjg3A4](https://youtu.be/WOUG-vjg3A4))
    shows the led state for multiple frames captured using the camera. The led is
    turned on when the input image is different from the background model according
    to the used threshold.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 以下视频（[https://youtu.be/WOUG-vjg3A4](https://youtu.be/WOUG-vjg3A4)）展示了使用相机捕获的多个帧的LED状态。当输入图像与背景模型根据使用的阈值不同，LED会被点亮。
- en: '**For More Details**'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '**更多详情**'
- en: Ahmed Fawzy Gad, “Building an Image Classifier Running on Raspberry Pi”, September
    2018, [https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad](https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Ahmed Fawzy Gad, “在树莓派上构建图像分类器”，2018年9月，[https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad](https://www.linkedin.com/pulse/building-image-classifier-running-raspberry-pi-ahmed-gad)
- en: '**For Contacting the Author**'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**联系作者**'
- en: E-mail: [ahmed.f.gad@gmail.com](https://mailto:ahmed.f.gad@gmail.com/)
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '电子邮件: [ahmed.f.gad@gmail.com](https://mailto:ahmed.f.gad@gmail.com/)'
- en: LinkedIn: [https://linkedin.com/in/ahmedfgad/](https://linkedin.com/in/ahmedfgad/)
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'LinkedIn: [https://linkedin.com/in/ahmedfgad/](https://linkedin.com/in/ahmedfgad/)'
- en: KDnuggets: [https://www.kdnuggets.com/author/ahmed-gad](https://www.kdnuggets.com/author/ahmed-gad)
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'KDnuggets: [https://www.kdnuggets.com/author/ahmed-gad](https://www.kdnuggets.com/author/ahmed-gad)'
- en: YouTube: [http://youtube.com/AhmedGadFCIT](https://youtube.com/AhmedGadFCIT)
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'YouTube: [http://youtube.com/AhmedGadFCIT](https://youtube.com/AhmedGadFCIT)'
- en: TowardsDataScience: [https://towardsdatascience.com/@ahmedfgad](https://towardsdatascience.com/@ahmedfgad)
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'TowardsDataScience: [https://towardsdatascience.com/@ahmedfgad](https://towardsdatascience.com/@ahmedfgad)'
- en: '**Bio: [Ahmed Gad](https://www.linkedin.com/in/ahmedfgad/)** received his B.Sc.
    degree with excellent with honors in information technology from the Faculty of
    Computers and Information (FCI), Menoufia University, Egypt, in July 2015\. For
    being ranked first in his faculty, he was recommended to work as a teaching assistant
    in one of the Egyptian institutes in 2015 and then in 2016 to work as a teaching
    assistant and a researcher in his faculty. His current research interests include
    deep learning, machine learning, artificial intelligence, digital signal processing,
    and computer vision.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**简介: [Ahmed Gad](https://www.linkedin.com/in/ahmedfgad/)**于2015年7月在埃及门努非亚大学计算机与信息学院（FCI）获得信息技术学士学位，并以优异的成绩毕业。由于在学院中排名第一，他在2015年被推荐担任埃及某学院的教学助理，并在2016年继续担任教学助理和研究员。他目前的研究兴趣包括深度学习、机器学习、人工智能、数字信号处理和计算机视觉。'
- en: '[Original](https://www.linkedin.com/pulse/building-surveillance-system-using-usb-camera-raspberry-ahmed-gad/).
    Reposted with permission.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '[原文](https://www.linkedin.com/pulse/building-surveillance-system-using-usb-camera-raspberry-ahmed-gad/)。经许可转载。'
- en: '**Related:**'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**相关:**'
- en: '[Intuitive Ensemble Learning Guide with Gradient Boosting](/2018/07/intuitive-ensemble-learning-guide-gradient-boosting.html)'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[直观的集成学习指南：梯度提升](/2018/07/intuitive-ensemble-learning-guide-gradient-boosting.html)'
- en: '[Building an Image Classifier Running on Raspberry Pi](/2018/10/building-image-classifier-running-raspberry-pi.html)'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[在树莓派上构建图像分类器](/2018/10/building-image-classifier-running-raspberry-pi.html)'
- en: '[Genetic Algorithm Implementation in Python](/2018/07/genetic-algorithm-implementation-python.html)'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Python中遗传算法的实现](/2018/07/genetic-algorithm-implementation-python.html)'
- en: More On This Topic
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 相关主题
- en: '[Building a Recommender System for Amazon Products with Python](https://www.kdnuggets.com/2023/02/building-recommender-system-amazon-products-python.html)'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[用Python构建亚马逊产品推荐系统](https://www.kdnuggets.com/2023/02/building-recommender-system-amazon-products-python.html)'
- en: '[Building a Recommendation System with Hugging Face Transformers](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用Hugging Face Transformers构建推荐系统](https://www.kdnuggets.com/building-a-recommendation-system-with-hugging-face-transformers)'
- en: '[How a Level System can Help Forecast AI Costs](https://www.kdnuggets.com/2022/03/level-system-help-forecast-ai-costs.html)'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[等级系统如何帮助预测AI成本](https://www.kdnuggets.com/2022/03/level-system-help-forecast-ai-costs.html)'
- en: '[Learning System Design: Top 5 Essential Reads](https://www.kdnuggets.com/learning-system-design-top-5-essential-reads)'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[系统设计学习：前5本必读书籍](https://www.kdnuggets.com/learning-system-design-top-5-essential-reads)'
- en: '[Monitor Your File System With Python’s Watchdog](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用Python的Watchdog监控文件系统](https://www.kdnuggets.com/monitor-your-file-system-with-pythons-watchdog)'
- en: '[Building Microservice for Multi-Chat Backends Using Llama and ChatGPT](https://www.kdnuggets.com/building-microservice-for-multichat-backends-using-llama-and-chatgpt)'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[使用Llama和ChatGPT构建多聊天后端的微服务](https://www.kdnuggets.com/building-microservice-for-multichat-backends-using-llama-and-chatgpt)'
