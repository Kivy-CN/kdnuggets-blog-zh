# Raspberry Pi 物联网项目的乐趣与利润

> 原文：[https://www.kdnuggets.com/2018/09/raspberry-pi-iot-projects-fun-profit.html](https://www.kdnuggets.com/2018/09/raspberry-pi-iot-projects-fun-profit.html)

![c](../Images/3d9c022da2d331bb56691a9617b91b90.png) [评论](/2018/09/raspberry-pi-iot-projects-fun-profit.html?page=2#comments)

**由 [Rubens Zimbres](Data Scientist)，数据科学家**

软件与硬件之间的界限令人着迷。我们数据科学家习惯于为商业目的开发机器学习算法，这些模型的输出通常以利润、成本节省甚至无形的输出（如客户满意度）来衡量。当然，我们可以通过仪表盘如 Power BI、Tableau 或在云端使用 Kibana、Quick Sight 或 Tago 来可视化我们的模型输出。但在屏幕之外看到我们模型的实际效果是非常令人满足的。

* * *

## 我们的三大课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity Certificate](https://www.kdnuggets.com/google-cybersecurity) - 快速开启网络安全职业生涯

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - 提升您的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support Professional Certificate](https://www.kdnuggets.com/google-itsupport) - 支持您的组织进行 IT 管理

* * *

我一直从事金融和电信领域的物联网工作。我们可以很容易地在仪表盘上生成关于系统故障的警报，比如基站（BTS）的饱和，这些基站是电信信号通过的节点。现在想象一下，除了仪表盘上的警报之外，我们还能自动将电信数据流量重定向到不同的通道，以便销售点（POS）始终保持连接。这将提高收单方的利润和商家的满意度。我们甚至可以调整现实世界中机器的设置。

在物联网项目中，我们与硬件紧密合作。像销售点（POS）、电力和水表、甘蔗研磨机、Libelium 套件（用于农业）、电梯、健康设备等设备会发送遥测数据，这些数据可以被分析以开发预测性维护模型，从而帮助企业降低成本、提高效率，并优化物流。在这些情况下，可以使用 SimCard、Wi-Fi、蓝牙或无线电信号（LoRa）来实现连接。

IoT 解决方案的一部分是网关。它在设备（温度、湿度传感器）和云之间中介通信。在我之前的文章中，我解释了如何将笔记本电脑变成 IoT 设备，提供了如何将数据从设备发送到 AWS，从设备到仪表板的端到端解决方案的详细信息 ([kdnuggets.com/2018/06/zimbres-iot-aws-machine-learning-dashboard.html](/2018/06/zimbres-iot-aws-machine-learning-dashboard.html))。

在这篇文章中，我将解释如何在没有图形界面的情况下，从命令行运行 IoT 项目，使用 Ubuntu Core 在树莓派 3 上。更简单的方法是使用 Raspbian，它为你的项目提供图形界面。Raspbian 是一个基于 Debian 的计算机操作系统。然而，我决定尝试 Ubuntu Core，因为安全性应该是 IoT 的主要关注点。Ubuntu Core 可以用于数字标牌、机器人、无人机和边缘网关。这是一个更具挑战性和安全性的选择。

下面的图片显示了常规 Linux 系统和 Ubuntu Core 之间的区别：

![Image](../Images/a5e7f3adc3484ae89e68266b09368abe.png)

Ubuntu Core 是一个轻量级系统，其核心理念是“安全”。它由 snaps 组成，“自包含、隔离且受保护的代码片段”。即使使用 `ESC :w !sudo tee %` 命令在 vim 中，也很难更改系统中的只读文件。

由于这是一个 ARM 系统，安装机器学习库相当不同，因为这种类型的系统有一些特定的软件包，许多依赖项没有包含，甚至连“wget”也没有。因此我们开始吧。当你购买树莓派时，它没有电源（如右上角所示）和 SD 卡（右侧显著位置）。Model 3 B 配有 4 个 USB 端口和一个以太网端口。它还包含 HDMI、音频和摄像头接口。在这个项目中，我们不会使用鼠标，显示器、以太网线和键盘仅在系统的首次运行时用于设置互联网连接。

![Image](../Images/f27e7c1f698f424d0ea244fcd8ec074f.png)

首先要做的是在 SD 卡（micro）中安装操作系统。所以，从他们的网站下载 Ubuntu Core 镜像：[http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-pi3.img.xz](http://cdimage.ubuntu.com/ubuntu-core/16/stable/current/ubuntu-core-16-pi3.img.xz)

然后，下载 Etcher 以将镜像闪存到卡上：[https://etcher.io/](https://etcher.io/)

现在，你需要生成私钥和公钥，并将其上传到你的 Ubuntu One 账户（https://login.ubuntu.com/）。

```py

mkdir ~/.ssh
chmod 700 ~/.ssh
ssh-keygen -t rsa -b 4096

```

然后，复制密钥代码并粘贴到你的 Ubuntu One 账户中：

```py

ssh-rsa ABCDEF1234512345 user@Dell

```

将卡插入树莓派中，并打开电源开关。 Voilà，系统将启动：

![Image](../Images/ffa8de6308b05378de320279508b99ee.png)

这在第一次运行时会花费几秒钟，你将被引导到网络配置界面。配置 DHCP 和你的 Wi-Fi 用户名及密码。然后 Ubuntu Core 将提供你应该 ssh 的地址。

万一，请确保端口 22（用于 ssh）是开放的：

```py

sudo ufw allow 22

```

现在，我们将密钥复制到客户端计算机上的新目录 .ssh 中：

```py

ssh-keygen -R 192.168.15.XXX
mkdir .ssh
cp id_rsa ~/.ssh/id_rsa
cp id_rsa.pub ~/.ssh/id_rsa.pub
cd .ssh

```

我们已经准备好通过 ssh 连接到树莓派。运行：

```py

ssh -vvv user@192.168.15.XXX 
Or
ssh -vvv 192.168.15.XXX -l user

```

-vvv 命令将提供有关 ssh 连接的详细信息。连接时，会弹出一个窗口要求输入密码。你已连接，登录将发生变化：

`user@localhost:~$`

现在，你可以断开显示器、键盘和网线，因为通信将通过Wi-Fi进行，整个项目将通过命令行完成。现在，让我们安装 snap classic，这是一个容器，我们将在其中安装机器学习库：

```py

sudo snap install classic --edge --devmode
sudo classic

Creating classic environment
Parallel unsquashfs: Using 4 processors
11111 inodes (11975 blocks) to write
[===========================================================/] 11975/11975 100%

(classic)user@localhost:~$ sudo apt update
(classic)user@localhost:~$ sudo apt install snapcraft build-essential git

```

此时，你可以回到我之前的文章中，其中我测量 CPU 温度并发送到亚马逊 AWS（kdnuggets.com/2018/06/zimbres-iot-aws-machine-learning-dashboard.html），或者我们可以继续：

```py

export LC_ALL=C
source .bashrc
pip install setuptools
pip install AWSIoTPythonSDK

```

![图片](../Images/a08a59dea7e2e98d470f4cf1e7105b59.png)

在 Ubuntu Core 中，生成和编辑笔记本并不简单。你不能打开 Jupyter、Spyder 或甚至 Notepad 创建新文件，因为没有图形界面。你需要使用命令“touch”来创建文件：

```py

touch AWS_Send_0.py

```

创建新文件后，你可以使用“vim”命令打开并编辑文件，并粘贴代码：

```py

vi AWS_Send_0.py

```

输入“i”然后 CTRL+SHIFT+V 粘贴代码到：https://github.com/RubensZimbres/Repo-2018/blob/master/CPU%20Temperature%20-%20IoT%20Project/AWS_Send_test.py

之后，输入：

```py

ESC :wq ENTER

```

![图片](../Images/d61fc85b7395624fe3013c0417487225.png)

这将保存文件。记得将 rootCA.pem + *.crt + *private.pem.key + *.public.pem.key 复制到你的树莓派中，以便正确访问 AWS IoT Core。

运行以下命令将树莓派 CPU 温度发送到 AWS：

```py

python AWS_Send_0.py -e a23312345.iot.us-east-1.amazonaws.com -r rootCA.pem -c 123412345-certificate.pem.crt -k 12345-private.pem.key -id arn:aws:iot:us-east-1:1123112345:thing/CPUDevice -t 'Topic'

```

你将通过 IoT Core 仪表盘检查你的连接：

![图片](../Images/3315e307f68baac8f4eaef3f30b8d64c.png)

需要注意的是，你在 Ubuntu classic 环境下运行 Python，在 chroot 中。所以，需要运行“sudo python”来访问树莓派的 GPIO（通用输入/输出）端口。

### 更多相关主题

+   [Python 中的进度条：用 tqdm 享受乐趣和收益](https://www.kdnuggets.com/2022/09/progress-bars-python-tqdm-fun-profit.html)

+   [适合初学者的有趣 Python 项目！](https://www.kdnuggets.com/2022/10/beginner-friendly-python-projects-fun.html)

+   [有趣且简短的课程，帮助你快速了解生成式 AI](https://www.kdnuggets.com/short-and-fun-courses-to-get-you-up-to-speed-about-generative-ai)

+   [AIoT 革命：AI 和 IoT 如何改变我们的世界](https://www.kdnuggets.com/2022/07/aiot-revolution-ai-iot-transforming-world.html)

+   [KDnuggets 新闻，7月27日：AIoT 革命：AI 和 IoT 如何…](https://www.kdnuggets.com/2022/n30.html)

+   [简单快速的数据流处理用于机器学习项目](https://www.kdnuggets.com/2022/11/simple-fast-data-streaming-machine-learning-projects.html)
