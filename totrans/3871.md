# 数据科学家的软件工程最佳实践

> 原文：[https://www.kdnuggets.com/2021/03/software-engineering-best-practices-data-scientists.html](https://www.kdnuggets.com/2021/03/software-engineering-best-practices-data-scientists.html)

[评论](#comments)

**由 [Madison Hunter](https://madison13.medium.com/) 提供，地球科学本科生**

![](../Images/819721409a44c604cc26e9ec52dd53e3.png)

图片来源于 [Joonas kääriäinen](https://www.pexels.com/@joonas-kaariainen-67364?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 来自 [Pexels](https://www.pexels.com/photo/bridge-with-lights-at-night-240572/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)

我在开始自己编写数据分析代码之前，真的不明白为什么人们会抱怨数据科学家编写的代码。

* * *

## 我们的前三个课程推荐

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [谷歌网络安全证书](https://www.kdnuggets.com/google-cybersecurity) - 快速进入网络安全职业。

![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [谷歌数据分析专业证书](https://www.kdnuggets.com/google-data-analytics) - 提升你的数据分析技能

![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [谷歌IT支持专业证书](https://www.kdnuggets.com/google-itsupport) - 支持你所在的组织进行IT工作

* * *

我从软件开发的教育背景中得到了很好的编码最佳实践的把握，并对自己编写干净代码的能力充满信心。然后，我开始编写我的第一个数据分析。

你猜对了。

缺乏函数、不清晰的变量名、意大利面条代码，没有任何单元测试的痕迹，风格严重缺失，这让我在让代码运行后，得尝试去理解相当于狗粮的东西。

最终，我终于理解了那些工程师抱怨的原因。

数据科学并不是自然源自计算机科学的领域，这反映在数据科学家的广泛背景上。许多数据科学家甚至没有计算机科学学位，他们往往来自其他无关的领域，包括数学、科学、工程、商业、医学等。

因此，数据科学家并不以总是拥有最干净的代码而闻名也就不足为奇了。

我并不是说数据科学家需要能够编写完整的复杂库。相反，数据科学家应该能够编写可以被更新、调试并且能顺利移入生产环境的干净代码，且工程部门不会发出太多脏话。

编写干净代码的重要性不仅仅是为了他人。在许多公司，预算不足以雇用数据科学家*和*软件工程师，这意味着数据科学家通常负责创建生产就绪的代码。因此，自身的理智也应作为维护和开发干净、易用、可重用代码的一个因素。

许多人会争辩说，好的代码是主观的。然而，一般来说，有四个标准是大家都能达成共识的，这些标准定义了使用最佳实践编写的代码：

1.  好的代码应该是高效的——这意味着你要从你的Python代码中挤出每一点速度和效率，即使没有。

1.  好的代码是可维护的——这意味着你可以维护代码，其他人也可以轻松理解和维护你的代码。

1.  好的代码是可读且结构良好的——这意味着任何人都应该能够查看你的代码，并理解你试图完成的任务，而不需要费太多力气。

1.  好的代码是可靠的——干净的代码就是好代码，而好代码是可靠的，不容易出现错误或随机故障。

查看这些最佳实践，你可以实施这些实践以达到上述四个标准。

### 使用描述性的变量名。

我经常看到数据分析代码使用变量名如x、y或任何数学变量的英文名称。

虽然这在写出数学公式时有效，但当你在别人的代码中阅读时，它并不那么清晰。

在数据科学中，我喜欢准确说明我的变量是什么。例如：

```py
null_hypothesis
standard_deviation_paired_differences_population
degrees_of_freedom
observed_frequency
test_statistic_chi_squared
```

任何上过统计课程的人都能理解我的变量是什么，它们在我的方程中做什么。这些基本变量在特定计算或使用时可以被做得更具描述性。

诀窍是尽可能详尽地描述情况。当然，也会有计算非常复杂的情况，这时写出如此详细的变量名可能没有意义。然而，在这之前，尽量做到详细。

### 使用函数。

无论你的编程方法论是什么（面向对象、函数式等），函数对于保持代码的清晰、简洁、可读和DRY（稍后会讲）至关重要。

对于非计算机科学专业的数据科学家，函数并不总是直观的，因为代码在没有它们的情况下也会正常运行。

然而，最好的程序员被认为是最懒的程序员。为什么？因为他们编写的代码最少，且通常编写出最干净的代码来解决问题。他们尽可能少地工作以使代码正常运行，且经常提供最简洁的解决方案。这涉及到使用函数。

这里有一些编写优秀函数以保持代码清晰的技巧：

+   函数应仅执行一项任务。不是10项，也不是20项。仅执行一项任务。

+   函数应该很小。有些人认为函数的代码行数不应超过 20 行，但这是一个任意数字。尽量保持函数简短且切中要点。

+   函数的编写方式应使你能够从上到下阅读并理解其逻辑——就像阅读一本书一样。

+   尽量将函数参数的数量控制在最低限度（最好少于 3 个）。如果需要超过三个函数参数，请自问该函数是否仅完成一个任务。

+   确保函数内的逻辑正确缩进，并且整个函数的代码块清晰。这将帮助其他人看到函数内部的代码，以及函数的开始和结束位置。

+   使用描述性的名称。

### 使用注释并编写适当的支持文档。

在构建具有改变生活的模型时，可能很容易忽视这一步，但事实是，如果没有其他人能够使用它们，那么它们真的有多么改变生活呢？

我个人对注释的规则：

+   在代码文件顶部写一个注释，简要描述代码的目标。

+   在每个函数的顶部写一个注释，描述其输入、输出以及它执行的逻辑。

+   在我不完全理解的逻辑顶部写下注释，以便更好地整理我的思路。这有助于调试和代码重构。

在编写适当的支持文档时，你的文档不必比 READme 文件更复杂。最基本的，好的文档应该包括：

+   代码的目标。

+   关于如何安装和使用代码的说明。

+   详细解释代码中的难点，逐行描述代码的作用，并且可能还要解释为什么你选择这样编写代码。

+   用于调试和故障排除的截图。

+   有助于进一步描述和解释你逻辑或代码的外部支持文档的有用链接。

### 使用一致的编码风格，并熟悉你使用的语言的语法约定。

我也曾未始终遵循给定语言的适当约定。

在大学时主要学习 C# 后，我熟悉并适应了它的约定，然后懒散地将这些约定应用到我遇到的其他语言中。

不要像我一样。相反，花时间学习每种新语言的语法约定，并强迫自己正确使用这些约定。这不仅有助于你深入理解语言，还能帮助你编写更简洁的代码，并帮助你与使用相同语言的其他开发人员沟通。

这里有一个用两种不同语言和各自适当约定完成相同功能的代码示例（请注意，由于格式原因缺少了缩进）：

C#：

```py
// This is a comment in C#. I am going to write some code that prints out a value if the inputted number is correct.int year = 0;
Console.Write("\nEnter the year that C# became a language: ");
year = Convert.ToInt32(Console.ReadLine());if(year == 2000) 
{
Console.Write("That is correct!");
}
else 
{
Console.Write("This is incorrect.");
}
```

Python：

```py
# This is a comment in Python. This code is going to do the same job that the code above just did.year = int(input("Enter the year that Python became a language: "))if year == 1989:
print ("That is correct!")
else:
print ("That is incorrect.")
```

这段傻乎乎的代码实际上并没有做什么，但它让你对每种语言的惯例差异有些了解。

### 使用库。

使用现有的库可以节省大量时间，特别是在进行数据分析编码时。Python 充满了可以处理数据科学家提出的每一个请求的库。这些库不仅已经为你编写好，而且已经过调试，适合生产使用。

查看这篇概述了[顶级数据科学库](https://towardsdatascience.com/top-10-python-libraries-for-data-science-cd82294ec266)及其功能的文章。我在这里总结了，重点介绍了我发现最有用的七个库：

### NumPy

+   基本数组操作：添加、乘法、切片、展平、重塑、索引。

+   高级数组操作：堆叠数组，分割成多个部分。

+   线性代数。

### Pandas

+   索引、操作、重命名、排序和合并数据框架。

+   数据框架中列的基本 CRUD（更新、添加、删除）功能。

+   输入缺失文件并处理缺失数据。

+   创建直方图或箱线图。

### Matplotlib

+   所有数据可视化，包括折线图、散点图、条形图、直方图、饼图、茎叶图和谱图等。

### TensorFlow

+   语音和声音识别。

+   情感分析。

+   面部识别。

+   时间序列。

+   视频检测。

### Seaborn

+   确定变量之间的相关性。

+   分析单变量或双变量分布。

+   绘制依赖变量的线性回归模型。

### SciPy

+   常见的科学计算，包括线性代数、插值、统计学、微积分和常微分方程。

### Scikit-Learn

+   分类、聚类、回归、降维、模型选择和预处理的监督和无监督学习算法。

### 使用一个好的 IDE。

Jupyter 并不适合编写生产级代码。

尽管可以将 Jupyter Notebooks 调整为创建生产级代码的方式，但我发现将其用于数据探索和分析的早期阶段更为简单，然后在合适的 IDE 中开发生产级代码。

IDE 提供了简单的工具，有助于保持代码整洁，例如代码检查、自动格式化、语法高亮、查找功能和错误捕获。此外，还有大量的 IDE 扩展可以帮助你在编写代码时节省时间。

一些你可以查看的 IDE 包括：

+   [Visual Studio Code](https://code.visualstudio.com/)（我个人最喜欢的）

+   [PyCharm](https://www.jetbrains.com/pycharm/)

+   [Atom](https://ide.atom.io/)

+   [Spyder](https://www.spyder-ide.org/)

### 保持代码的 DRY。

DRY（Don't Repeat Yourself）是一种软件工程最佳实践，旨在保持代码简洁、精炼并且直截了当。

目标是不重复任何代码。这意味着，如果你发现自己反复编写相同的代码行，你需要将这些代码转化为一个只编写一次的函数。这个函数可以被多次调用。

如果你在保持代码 DRY（Don't Repeat Yourself）方面遇到困难，可以使用[我最喜欢的规则](https://codeburst.io/clean-code-functions-475fe755c4f1)：

1.  如果这是第一次，编写代码。

1.  如果这是第二次，复制代码。

1.  如果这是第三次，将其做成一个函数或类。

### 编写单元测试。

[单元测试](https://www.guru99.com/unit-testing-guide.html)是一种软件测试类型，涉及对代码中各个组件进行测试。编写单元测试的目的是确保每一段代码都按预期执行。测试是为了确保执行特定功能的小段代码能准确完成其任务。被测试的“单元”可以是单个函数、过程或整个对象。

单元测试的一个很好的例子是测试函数在接收到不同参数类型时的响应。此测试的结果将确保你已经考虑了所有可能性，并且函数在以后不会抛出任何无法解释的错误。

查看微软关于如何编写单元测试的这篇文章：

[**编写单元测试的最佳实践 - .NET**](https://docs.microsoft.com/en-us/dotnet/core/testing/unit-testing-best-practices)

编写单元测试有很多好处；它们有助于回归测试，提供文档，并促进……

虽然本文仅描述了如何在 C# 中编写单元测试，但这些经验教训和示例适用于任何语言。

### 不要对一行解决方案过于执着。

一行代码的解决方案非常适合你想打动你的朋友，或者你想在 Medium 上写一篇病毒式文章的时候。谁不想用一行代码来交易股票呢？

虽然使用一行代码创建解决方案令人印象深刻，但当涉及到调试和重构代码时，你也会面临很多问题。

相反，尽量将每行代码限制为一到两个函数调用，并确保你的逻辑对任何阅读你代码的人都容易理解。如果你不能用简单的术语解释一行代码的作用，你可能把那一行做得太复杂了。

必须指出的是，开发人员编写的代码行数并不能很好地反映他们的能力或水平——不要听任何告诉你其他意见的人。

### 结论。

本文强调了数据科学家可以实施的最重要的最佳实践，以使其代码达到生产准备状态。

你的代码是你的责任，因此花时间确保你编写的代码高效、简单且易于理解是很有意义的。虽然还有许多其他清理代码的技巧和窍门，但上述列出的这些是你今天就可以应用的最简单的技巧。

**个人简介：[Madison Hunter](https://madison13.medium.com/)** 是一名地球科学本科生，软件开发毕业生。Madison 撰写关于数据科学、环境和 STEM 的随笔。

[原文](https://towardsdatascience.com/software-engineering-best-practices-for-data-scientists-4c199ede6e03)。经授权转载。

**相关：**

+   [数据科学的工程师技巧和最佳实践](/2020/10/software-engineering-best-practices-data-science.html)

+   [我从高效数据科学家那里学到的15个习惯](/2021/03/15-habits-learned-from-highly-effective-data-scientists.html)

+   [数据科学家的软件工程基础](/2020/06/software-engineering-fundamentals-data-scientists.html)

### 更多相关内容

+   [软件开发者与软件工程师](https://www.kdnuggets.com/2022/05/software-developer-software-engineer.html)

+   [将 ChatGPT 集成到数据科学工作流中：技巧和最佳实践](https://www.kdnuggets.com/2023/05/integrating-chatgpt-data-science-workflows-tips-best-practices.html)

+   [数据仓储和ETL最佳实践](https://www.kdnuggets.com/2023/02/data-warehousing-etl-best-practices.html)

+   [迁移到 AWS 云的11个最佳实践](https://www.kdnuggets.com/2023/04/11-best-practices-cloud-data-migration-aws-cloud.html)

+   [数据可视化最佳实践和有效沟通的资源](https://www.kdnuggets.com/2023/04/data-visualization-best-practices-resources-effective-communication.html)

+   [数据科学团队协作的5个最佳实践](https://www.kdnuggets.com/2023/06/5-best-practices-data-science-team-collaboration.html)
