- en: Getting Started with Claude 2 API
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://www.kdnuggets.com/getting-started-with-claude-2-api](https://www.kdnuggets.com/getting-started-with-claude-2-api)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '![Getting Started with Claude 2 API](../Images/23d6640d3c41a581cbde7bd6f9c39627.png)'
  prefs: []
  type: TYPE_IMG
- en: Image by Author
  prefs: []
  type: TYPE_NORMAL
- en: What is Claude 2?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Our Top 3 Course Recommendations
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 1\. [Google Cybersecurity
    Certificate](https://www.kdnuggets.com/google-cybersecurity) - Get on the fast
    track to a career in cybersecurity.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/e225c49c3c91745821c8c0368bf04711.png) 2\. [Google Data Analytics
    Professional Certificate](https://www.kdnuggets.com/google-data-analytics) - Up
    your data analytics game'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0244c01ba9267c002ef39d4907e0b8fb.png) 3\. [Google IT Support
    Professional Certificate](https://www.kdnuggets.com/google-itsupport) - Support
    your organization in IT'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: Anthropic's conversational AI assistant, [Claude 2](https://www.anthropic.com/index/claude-2),
    is the latest version that comes with significant improvements in performance,
    response length, and availability compared to its previous iteration. The latest
    version of the model can be accessed through our API and a new public beta website
    at claude.ai.
  prefs: []
  type: TYPE_NORMAL
- en: Claude 2 is known for being easy to chat with, clearly explaining its reasoning,
    avoiding harmful outputs, and having a robust memory. It has enhanced reasoning
    capabilities.
  prefs: []
  type: TYPE_NORMAL
- en: Claude 2 showed a significant improvement in the multiple-choice section of
    the Bar exam, scoring 76.5% compared to Claude 1.3's 73.0%. Moreover, Claude 2
    outperforms over 90% of human test takers in reading and writing sections of the
    GRE. In coding evaluations such as HumanEval, Claude 2 achieved 71.2% accuracy,
    which is a considerable increase from 56.0% in the past.
  prefs: []
  type: TYPE_NORMAL
- en: The Claude 2 API is being offered to our thousands of business customers at
    the same price as Claude 1.3\. You can easily use it through web API, as well
    as Python and Typescript clients. This tutorial will guide you through the setup
    and usage of the Claude 2 Python API, and help you learn about the various functionalities
    it offers.
  prefs: []
  type: TYPE_NORMAL
- en: Setting Up
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Before we jump into accessing the API, we need to first apply for API [Early
    Access](https://www.anthropic.com/earlyaccess). You will fill out the form and
    wait for confirmation. Make sure you are using your business email address. I
    was using **@kdnuggets.com**.
  prefs: []
  type: TYPE_NORMAL
- en: After receiving the confirmation email, you will be provided with access to
    the console. From there, you can generate API keys by going to [Account Settings](https://console.anthropic.com/account/keys).
  prefs: []
  type: TYPE_NORMAL
- en: Install the Anthropic Python client using PiP. Make sure you are using the latest
    Python version.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Setup the anthropic client using the API key.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Instead of providing the API key for creating the client object, you can set
    `ANTHROPIC_API_KEY` environment variable and provide it the key.
  prefs: []
  type: TYPE_NORMAL
- en: Accessing Claude 2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Here is the basic sync version of generating responses using the prompt.
  prefs: []
  type: TYPE_NORMAL
- en: Import all necessary modules.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Initial the client using API key.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To generate a response you have to provide a model name, max tokes, and prompt.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Your prompt usually has `HUMAN_PROMPT` ('\n\nHuman:') and `AI_PROMPT` ('\n\nAssistant:').
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Print the response.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Output:**'
  prefs: []
  type: TYPE_NORMAL
- en: As we can see, we got quite good results. I think it is even better than GPT-4.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: You can also call Claude 2 API using asynchronous requests.
  prefs: []
  type: TYPE_NORMAL
- en: Synchronous APIs execute requests sequentially, blocking until a response is
    received before invoking the next call, while asynchronous APIs allow multiple
    concurrent requests without blocking, handling responses as they complete through
    callbacks, promises or events; this provides asynchronous APIs greater efficiency
    and scalability.
  prefs: []
  type: TYPE_NORMAL
- en: Import AsyncAnthropic instead of Anthropic
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Define a function with async syntax.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Use `await` with each API call
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '**Output: **'
  prefs: []
  type: TYPE_NORMAL
- en: We got accurate results.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '**Note:** If you are using the async function in Jupyter Notebook, use `await
    main()`. Otherwise, use `asyncio.run(main())`.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Claude 2 Streaming
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Streaming has become increasingly popular for large language models. Instead
    of waiting for the complete response, you can start processing the output as soon
    as it becomes available. This approach helps reduce the perceived latency by returning
    the output of the Language Model token by token, as opposed to all at once.
  prefs: []
  type: TYPE_NORMAL
- en: You just have to set a new argument `stream` to `True` in completion function.
    Caude 2 uses Server Side Events (SSE) to support the response streaming.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '**Output:**'
  prefs: []
  type: TYPE_NORMAL
- en: '![Getting Started with Claude 2 API](../Images/39e8ce742bdd6aa34bbc6cd8cecaccdd.png)'
  prefs: []
  type: TYPE_IMG
- en: Billing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Billing is the most important aspect of integrating the API in your application.
    It will help you plan for the budget and charge your clients. Aloof the LLMs APIs
    are charged based on token.  You can check the below table to understand the pricing
    structure.
  prefs: []
  type: TYPE_NORMAL
- en: '![Getting Started with Claude 2 API](../Images/785f7e1734371aac50d7001a80d1d3b5.png)'
  prefs: []
  type: TYPE_IMG
- en: Image from Anthropic
  prefs: []
  type: TYPE_NORMAL
- en: An easy way to count the number of tokens is by providing a prompt or response
    to the `count_tokens` function.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Other Functions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Apart from basic response generation, you can use the API to fully integrate
    into your application.
  prefs: []
  type: TYPE_NORMAL
- en: '**Using types:** The requests and responses use TypedDicts and Pydantic models
    respectively for type checking and autocomplete.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Handling errors:** Errors raised include APIConnectionError for connection
    issues and APIStatusError for HTTP errors.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Default Headers:** anthropic-version header is automatically added. This
    can be customized.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Logging:** Logging can be enabled by setting the ANTHROPIC_LOG environment
    variable.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Configuring the HTTP client:** The HTTPx client can be customized for proxies,
    transports etc.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Managing HTTP resources:** The client can be manually closed or used in a
    context manager.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Versioning:** Follows Semantic Versioning conventions but some backwards-incompatible
    changes may be released as minor versions.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Anthropic Python API provides easy access to Claude 2 state-of-the-art conversational
    AI model, enabling developers to integrate Claude's advanced natural language
    capabilities into their applications. The API offers synchronous and asynchronous
    calls, streaming, billing based on token usage, and other features to fully leverage
    Claude 2's improvements over previous versions.
  prefs: []
  type: TYPE_NORMAL
- en: The Claude 2 is my favorite so far, and I think building applications using
    the Anthropic API will help you build a product that outshines others.
  prefs: []
  type: TYPE_NORMAL
- en: Let me know if you would like to read a more advanced tutorial. Perhaps I can
    create an application using Anthropic API.
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://www.polywork.com/kingabzpro)****[Abid Ali Awan](https://www.polywork.com/kingabzpro)****
    ([@1abidaliawan](https://www.linkedin.com/in/1abidaliawan)) is a certified data
    scientist professional who loves building machine learning models. Currently,
    he is focusing on content creation and writing technical blogs on machine learning
    and data science technologies. Abid holds a Master''s degree in technology management
    and a bachelor''s degree in telecommunication engineering. His vision is to build
    an AI product using a graph neural network for students struggling with mental
    illness.'
  prefs: []
  type: TYPE_NORMAL
- en: More On This Topic
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Getting Started With Claude 3 Opus That Just Destroyed GPT-4 and Gemini](https://www.kdnuggets.com/getting-started-with-claude-3-opus-that-just-destroyed-gpt-4-and-gemini)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Meet Gorilla: UC Berkeley and Microsoft’s API-Augmented LLM…](https://www.kdnuggets.com/2023/06/meet-gorilla-uc-berkeley-microsoft-apiaugmented-llm-outperforms-gpt4-chatgpt-claude.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[ChatGPT Dethroned: How Claude Became the New AI Leader](https://www.kdnuggets.com/2023/07/chatgpt-dethroned-claude-became-new-ai-leader.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Top 10 Tools for Detecting ChatGPT, GPT-4, Bard, and Claude](https://www.kdnuggets.com/2023/05/top-10-tools-detecting-chatgpt-gpt4-bard-llms.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[3 Ways to Access Claude AI for Free](https://www.kdnuggets.com/2023/06/3-ways-access-claude-ai-free.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Getting Started with SQL Cheatsheet](https://www.kdnuggets.com/2022/08/getting-started-sql-cheatsheet.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
